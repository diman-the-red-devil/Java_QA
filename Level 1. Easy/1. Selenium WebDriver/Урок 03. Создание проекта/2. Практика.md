# Java_QA / Level 1. Easy - Основы / 1.1. Selenium WebDriver / Урок 03. Создание проекта

[![Назад](https://img.shields.io/badge/-%D0%9D%D0%B0%D0%B7%D0%B0%D0%B4-brightgreen)](1.%20Лекция.md)
[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](3.%20Задание.md)

***

## 1. Создание нового проекта Maven в папке склонированного репозитория GitHub

1). Запустить IntelliJ IDEA.

2). Нажать **Create New Project**.

![New Maven Project - Create New Project](./_Files/2.%20New%20Project/01.jpg "New Maven Project - Create New Project")

3). Выбрать тип проекта **Maven**.

![New Maven Project - Maven Project](./_Files/2.%20New%20Project/02.jpg "New Maven Project - Maven Project")

4). Заполнить поля на форме

* **Name** - наименование проекта
* **Location** - расположение проекта (папка склонированного репозитория)
* **GroupId** - GAV параметр артефакта, группа
* **ArtifactId** - GAV параметр артефакта, артефакт
* **Version** - GAV параметр артефакта, версия

5). Нажать **Finish**

![New Maven Project - New Project](./_Files/2.%20New%20Project/03.jpg "New Maven Project - New Project")

6). Готово! Проект Maven создан.

![New Maven Project - New Project](./_Files/2.%20New%20Project/04.jpg "New Maven Project - New Project")

***

## 2. Добавление зависимостей в POM

После создания проекта откроется файл POM в который нужно прописать зависимости и настройки плагинов.

### Настройки и параметры

В POM.xml добавить следующие настройки в раздел **properties**

```xml
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
```

### Тестовый фреймворк - JUnit5

В POM.xml добавить следующую зависимость в раздел **dependencies**

```xml
<dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter-engine</artifactId>
    <version>5.1.0</version>
    <scope>test</scope>
</dependency>
```

### Веб драйвер - Selenium WebDriver

В POM.xml добавить следующую зависимость в раздел **dependencies**

```xml
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>3.141.59</version>
    <scope>test</scope>
</dependency>
```

### Менеджер веб драйверов - WebDriverManager

В POM.xml добавить следующую зависимость в раздел **dependencies**

```xml
<dependency>
    <groupId>io.github.bonigarcia</groupId>
    <artifactId>webdrivermanager</artifactId>
    <version>4.2.2</version>
    <scope>test</scope>
</dependency>
```

### Система логирования -  Log4J2

В POM.xml добавить следующую зависимость в раздел **dependencies**

```xml
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-api</artifactId>
    <version>2.14.0</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.14.0</version>
    <scope>test</scope>
</dependency>
```

***

## 3. Подключение и настройка плагинов

### Плагин для запуска тестов - maven-surefire-plugin

В POM.xml добавить следующий плагин в раздел **build**/**plugins**

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.22.2</version>
</plugin>
```

### Плагин для компиляции - maven-compiler-plugin

В POM.xml добавить следующий плагин в раздел **build**/**plugins**

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.8.1</version>
    <configuration>
        <source>11</source>
        <target>11</target>
    </configuration>
</plugin>
```

***

## 4. Итоговый файл POM.xml

Ниже привден итоговый файл POM.xml со всеми зависимостями и настройками.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.example</groupId>
    <artifactId>Sample</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter-engine</artifactId>
            <version>5.1.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>3.141.59</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>io.github.bonigarcia</groupId>
            <artifactId>webdrivermanager</artifactId>
            <version>4.2.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-api</artifactId>
            <version>2.14.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-core</artifactId>
            <version>2.14.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.22.2</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.8.1</version>
                <configuration>
                    <source>11</source>
                    <target>11</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
```

***

## 5. Настройка логирования

Шаги:

1). Создать файл **log4j2.xml** в папке **./src/main/resources**. 

![New Maven Project - log4j2.xml](./_Files/2.%20New%20Project/05.jpg "New Maven Project - log4j2.xml")

2). Добавить в файл настройки для логирования.

```xml
<Configuration monitorInterval="30">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%highlight{[%d{HH:mm:ss.SSS}] | %-5p | %-32.42t | %-32.42c{1} | %m%n}{FATAL=red blink, ERROR=red blink, WARN=yellow bold, INFO=black, DEBUG=green bold, TRACE=blue}"/>
        </Console>
        <File name="MyFile" fileName="logs.log">
            <PatternLayout>
                <Pattern>%d %p %c{1.} [%t] %m%n</Pattern>
            </PatternLayout>
        </File>
    </Appenders>
    <Loggers>
        <Root level="info">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="MyFile"/>
        </Root>
    </Loggers>
</Configuration>
```

***

## 6. Написание первого автотеста

Сценарий теста: открыть в браузере yandex.ru.

Шаги:

1). Создать файл **SampleTest.java** в папке **./src/test/java**.

![New Maven Project - SampleTest.java](./_Files/2.%20New%20Project/06.jpg "New Maven Project - SampleTest.java")

2). Добавить в файл код.
 
* объявление веб драйвера 

```java
protected static WebDriver driver;
```

* инициализация логгера

```java
private Logger logger = LogManager.getLogger(SampleTest.class);
```

* метод setUp() - действия перед каждым тестом (аннотация @BeforeEach)

Создаем новый экземпляр драйвера Google Chrome, пишем в лог.

```java
@BeforeEach
public void setUp() {
    WebDriverManager.chromedriver().setup();
    driver = new ChromeDriver();
    logger.info("Драйвер стартовал!");
}
```

* метод setDown() - действия после каждого теста (аннотация @AfterEach)

Закрываем все окна браузера Google Chrome, завершаем работу браузера и сервисов, освобождаем ресурсы, пишем в лог.

```java
@AfterEach
public void setDown() {
    if(driver != null) {
        driver.quit();
        logger.info("Драйвер остановлен!");
    }
}
```

* метод openPage() - сам тест (аннотация @Test)
 
Открываем https://yandex.ru/ в браузере Google Chrome, пишем в лог.

```java
@Test
public void openPage() {
    driver.get("https://yandex.ru/");
    logger.info("Открыта страница Yandex - " + "https://yandex.ru/");
}
```

***

## 7. Итоговый код класса SampleTest.java

```java
import io.github.bonigarcia.wdm.WebDriverManager;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

public class SampleTest {
    protected static WebDriver driver;
    private Logger logger = LogManager.getLogger(SampleTest.class);

    @BeforeEach
    public void setUp() {
        WebDriverManager.chromedriver().setup();
        driver = new ChromeDriver();
        logger.info("Драйвер стартовал!");
    }

    @Test
    public void openPage() {
        driver.get("https://yandex.ru/");
        logger.info("Открыта страница Yandex - " + "https://yandex.ru/");
    }

    @AfterEach
    public void setDown() {
        if(driver != null) {
            driver.quit();
            logger.info("Драйвер остановлен!");
        }
    }
}
```

***

## 8. Запуск автотеста

Шаги:

1). Выполнить команду **mvn clean test**.

![New Maven Project - mvn clean test](./_Files/2.%20New%20Project/07.jpg "New Maven Project - mvn clean test")

2). Готово! Тест запущен и пройден.

В результате будет выполнен тест.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/08.jpg "New Maven Project - Запуск теста")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/09.jpg "New Maven Project - Лог запуска")

***

## 9. Работа с Git

Шаги:

1). Выполнить **Add** (Добавить новые файлы в отслеживаемые Git).

* выбор файлов

![Git - Add Files](./_Files/3.%20Commit/01.jpg "Git - Add Files")

* **Правая кнопка мыши** -> **Git** -> **Add**

![Git - Add Files](./_Files/3.%20Commit/02.jpg "Git - Add Files")

* цвет названия файла смениться с красного на зеленый

![Git - Add Files](./_Files/3.%20Commit/03.jpg "Git - Add Files")

2). Добавить все необходимые файлы.

3). Выполнить **Commit** (Зафиксировать изменения в файлах).

* **Menu** -> **VCS** -> **Commit...**

![Git - Commit Files](./_Files/3.%20Commit/04.jpg "Git - Commit Files")

* отметить файлы, которые войдут в коммит

![Git - Commit Files](./_Files/3.%20Commit/05.jpg "Git - Commit Files")

* не отмечать файлы, которые не должны попасть в коммит

![Git - Commit Files](./_Files/3.%20Commit/06.jpg "Git - Commit Files")

* добавить сообщение-комментарий к коммиту

* нажать **Commit**

![Git - Commit Files](./_Files/3.%20Commit/07.jpg "Git - Commit Files")

* отобразится сообщение, что файлы закоммичены

![Git - Commit Files](./_Files/3.%20Commit/08.jpg "Git - Commit Files")

4). Выполнить **Push** (Отправить изменения в удаленный репозиторий).

* **Menu** -> **VCS** -> **Git** -> **Push...**

![Git - Push Files](./_Files/3.%20Commit/09.jpg "Git - Push Files")

* нажать **Push**

![Git - Push Files](./_Files/3.%20Commit/10.jpg "Git - Push Files")

5). Готово! 

Файлы отправлены в удаленный репозиторий.

***

Задание [![Перейти](https://img.shields.io/badge/-%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8-blue)](3.%20Задание.md)