# Java_QA / Level 1. Easy - Основы / 1.1. Selenium WebDriver / Урок 07. Веб элементы

[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](2.%20Практика.md)

***

## 1. Интерфейс WebElement

***WebElement*** - интерфейс реализующий взаимодействие с веб элементами.

![Веб элементы](_Files/1.%20Web%20Elements/01.jpg "Веб элементы")

Методы интерфейса *WebElement*:

* **Свойства**

| Тип       | Метод                        | Описание                                                   | 
|-----------|------------------------------|------------------------------------------------------------|
| String    | getTagName()                 | Получение имени тега элемента                              |
| String    | getCssValue(String name)     | Получение значения CSS параметра элемента                  |
| String    | getAttribute(String name)    | Получение значения атрибута элемента                       |
| String    | getAccessibleName()          | Получение имени                                            |
| String    | getDomProperty(String name)  | Получение значения параметра элемента                      |
| String    | getDomAttribute(String name) | Получение значения атрибута элемента                       |
| Dimension | getSize()                    | Получение значения ширины и высоты элемента                |
| Point     | getLocation()                | Получение значения координат верхнего левого угла элемента |
| Rectangle | getRect()                    | Получение                                                  |
| String    | getText()                    | Получение текстового содержимого элемента                  |
| boolean   | isDisplayed()                | Проверка видимости элемента                                |
| boolean   | isEnabled()                  | Проверка доступности элемента                              |
| boolean   | isSelected()                 | Проверка выбора элемента                                   |

* **Действия**

| Тип  | Метод                                | Описание                        | 
|------|--------------------------------------|---------------------------------|
| void | click()                              | Нажатие на элемент              |
| void | sendKeys(CharSequence... keysToSend) | Ввод текста в поле ввода        |
| void | clear()                              | Очистка поля ввода              |
| void | submit()                             | Отправка данных формы           |
| void | findElement(By by)                   | Поиск элемента внутри элемента  |
| void | findElements(By by)                  | Поиск элементов внутри элемента |

[selenium/docs/api : WebDriver](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/WebDriver.html)

## 2. Свойства

### 2.1. Атрибуты и свойства

Для получения имени тега применяется команда **getTagName()**.

```java
WebElement element = driver.findElement(By.id("email"));
String tagName = element.getTagName();
```

Для получения значения атрибута применяется команда **getAttribute(String name)**.

```java
WebElement element = driver.findElement(By.id("email"));
String tagName = element.getAttribute();
```

### 2.2. Размер и положение

Для получения размеров (значения ширины и высоты) элемента применяется команда **getSize()**.

```java
WebElement element = driver.findElement(By.id("email"));
Dimension size = element.getSize();
int height = size.getHeight();
int width = size.getWidth();
```


Для получения положения верхнего левого угла (значения координат x, y) элемента применяется команда **getLocation()**.

```java
WebElement element = driver.findElement(By.id("email"));
Point location = element.getLocation();
int x = location.getX();
int y = location.getY();
```

Для получения размеров и положения верхнего левого угла элемента применяется команда **getRect()**.

```java
WebElement element = driver.findElement(By.id("email"));
Rectangle rect = element.getRect();
Dimension size = rect.getDimension();
int height = size.getHeight();
int width = size.getWidth();
Point location = rect.getPoint();
int x = location.getX();
int y = location.getY();
```

#### Класс Dimension

***Dimension*** - класс представляющий размеры (ширина и высота).

| Тип | Метод       | Описание         | 
|-----|-------------|------------------|
| int | getHeight() | Получение высоты |
| int | getWidth()  | Получение ширины |

[selenium/docs/api : Dimension](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/Dimension.html)

#### Класс Point

***Point*** - класс представляющий положение точки (координаты x, y).

| Тип   | Метод                            | Описание                                | 
|-------|----------------------------------|-----------------------------------------|
| int   | getX()                           | Получение координаты x                  |
| int   | getY()                           | Получение координаты y                  |
| Point	| moveBy(int xOffset, int yOffset) | Перемещение в точку с координатами x, y |

[selenium/docs/api : Point](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/Point.html)

#### Класс Rectangle

***Rectangle*** - класс представляющий положение верхнего левого угла и размеры элемента.

| Тип       | Метод          | Описание                                              | 
|-----------|----------------|-------------------------------------------------------|
| Dimension | getDimension() | Получение размеров элемента                           |
| int       | getHeight()    | Получение высоты элемента                             |
| int       | getWidth()     | Получение ширины элемента                             |
| Point     | getPoint()     | Получение положения верхнего левого угла элемента     |
| int       | getX()         | Получение координаты x верхнего левого угла элемента  |
| int       | getY()         | Получение координаты y верхнего левого угла элемента  |

[selenium/docs/api : Rectangle](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/Rectangle.html)

### 2.3. Видимость и доступность

Для проверки видимости элемента применяется команда **isDisplayed()**.

```java
WebElement element = driver.findElement(By.id("email"));
boolean isDisplayed = element.isDisplayed();
```

Для проверки доступности элемента применяется команда **isEnabled()**.

```java
WebElement element = driver.findElement(By.id("email"));
boolean isEnabled = element.isEnabled();
```

Для проверки выбора элемента применяется команда **isSelected()**.

```java
WebElement element = driver.findElement(By.id("email"));
boolean isSelected = element.isSelected();
```

### 2.4. Текст

Для получения текстового содержимого элемента применяется команда **getText()**.

```java
WebElement element = driver.findElement(By.tagName("h1"));
String text = element.getText();
```

### 2.5. Стили

Для получения значения CSS применяется команда **getCssValue(String name)**.

```java
WebElement element = driver.findElement(By.id("email"));
String tagName = element.getCssValue();
```

***

## 3. Простые действия

### 3.1. Нажатие на элемент

Для выполнения нажатия на элемент применяется команда **click()**.

```java
WebElement element = driver.findElement(By.name("send"));
element.click();
```

### 3.2. Ввод текста

Для ввода текста в поля ввода применяется команда **sendKeys()**.

```java
WebElement element = driver.findElement(By.name("email"));
element.sendKeys("fake@fake.fake");
```

### 3.3. Удаление текста

Для удаления текста из поля ввода применяется команда **clear()**

```java
WebElement element = driver.findElement(By.name("email"));
element.clear();
```

### 3.4. Отправка данных формы

Для отправки данных формы применяется команда **submit()**

```java
WebElement element = driver.findElement(By.name("email"));
element.submit();
```

***

## 4. Интерфейс Action

***Action*** - интерфейс реализующий сложные взаимодействия.

Методы интерфейса **Action**

| Тип  | Метод     | Описание            | 
|------|-----------|---------------------|
| void | perform() | Выполнение действия |

[selenium/docs/api : Action](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/interactions/Action.html)

### 4.1. Класс Actions

***Actions*** - класс предоставляющий команды реализующие сложные взаимодействия.

Данный класс реализует интерфейс **Actions**.

Методы класса **Actions**

| Тип     | Метод                                                      | Описание                                        |
|---------|------------------------------------------------------------|-------------------------------------------------|
| Actions | click()                                                    | Левый клик мышью в текущей позиции              |
| Actions | click(WebElement target)                                   | Левый клик мышью в центре элемента              |
| Actions | clickAndHold()                                             | Левый клик мышью c удержанием в текущей позиции |
| Actions | clickAndHold(WebElement target)                            | Левый клик мышью c удержанием в центре элемента |
| Actions | contextClick()                                             | Правый клик мышью в текущей позиции             |
| Actions | contextClick(WebElement target)                            | Правый клик мышью в центре элемента             |
| Actions | doubleClick()                                              | Двойной клик мышью в текущей позиции            |
| Actions | doubleClick(WebElement target)                             | Двойной клик мышью в центре элемента            |
| Actions | dragAndDrop(WebElement source, WebElement target)          | Перетаскивание объекта                          |
| Actions | dragAndDropBy(WebElement source, int xOffset, int yOffset) | Перетаскивание объекта со смещением             |
| Actions | keyDown(CharSequence key)                                  | Нажатие клавиши клавиатуры                      |
| Actions | keyDown(WebElement target, CharSequence key)               | Нажатие клавиши клавиатуры в элементе           |
| Actions | keyUp(CharSequence key)                                    | Отпускание клавиши клавиатуры                   |
| Actions | keyUp(WebElement target, CharSequence key)                 | Отпускание клавиши клавиатуры в элементе        |
| Actions | moveByOffset(int xOffset, int yOffset)                     | Смещение мыши                                   |
| Actions | moveToElement(WebElement target)                           | Перемещение мыши в центр элемента               |
| Actions | moveToElement(WebElement target, int xOffset, int yOffset) | Перемещение мыши в центр элемента со смещением  |
| Actions | release()                                                  | Отпускание левой кнопки мыши                    |
| Actions | release(WebElement target)                                 | Отпускание левой кнопки мыши в центре элемента  |
| Actions | sendKeys(CharSequence... keys)                             | Ввод текста в текущей позиции                   |
| Actions | sendKeys(WebElement target, CharSequence... keys)          | Ввод текста в элементе                          |
| Actions | pause(long pause)                                          | Пауза                                           |
| Actions | pause(Duration duration)                                   | Пауза                                           |
| Action  | build()                                                    | Построение цепочки действий                     |
| Actions | perform()                                                  | Выполнение построенной цепочки действий         |
| Actions | tick(Action action)                                        |                                                 |
| Actions | tick(Interaction... actions)                               |                                                 |

[selenium/docs/api : Actions](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/interactions/Actions.html)

***

## 5. Сложные действия

**Selenium WebDriver** позволяет имитировать действия пользователя, начиная от простых движений мыши до сложных, перетягивание объекта. 
Все это позволяет реализовать класс **Actions**. Так же разработчики позаботились о том, чтобы мы могли создавать цепочку действий, используя этот класс.

### 5.1. Левый клик мышью

Для выполнения клика левой кнопкой мыши применяются команды **click()** и **click(WebElement target)**.

**click()**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .click()
    .perform();
```

**click(WebElement target)**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .click(element)
    .perform();
```

### 5.2. Левый клик мышью c удержанием

Для выполнения клика левой кнопкой мыши c удержанием применяются команды **clickAndHold()** и **clickAndHold(WebElement target)**.

**clickAndHold()**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .clickAndHold()
    .perform();
```

**clickAndHold(WebElement target)**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .clickAndHold(element)
    .perform();
```

### 5.3. Правый клик мышью

Для выполнения клика правой кнопкой мыши применяются команды **contextClick()** и **contextClick(WebElement target)**.

**contextClick()**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .contextClick()
    .perform();
```

**contextClick(WebElement target)**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .contextClick(element)
    .perform();
```

Пример работы с контекстным меню

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .contextClick(element)
    .sendKeys(Keys.ARROW_DOWN)
    .sendKeys(Keys.ARROW_DOWN)
    .sendKeys(Keys.RETURN)
    .build()
    .perform();
```

### 5.4. Двойной клик мышью

Для выполнения двойного клика левой кнопкой мыши применяются команды **doubleClick()** и **doubleClick(WebElement target)**.

**doubleClick()**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .doubleClick()
    .perform();
```

**doubleClick(WebElement target)**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .doubleClick(element)
    .perform();
```

### 5.5. Перетаскивание объекта

Для выполнения перетаскивания применяются команды **dragAndDrop(WebElement source, WebElement target)** и **dragAndDropBy(WebElement source, int xOffset, int yOffset)**.

**dragAndDrop(WebElement source, WebElement target)**

```java
WebElement source = driver.findElement(By.id("draggable"));
WebElement target = driver.findElement(By.id("droppable"));
Actions actions = new Actions(driver);
actions
    .dragAndDrop(source, target)
    .perform();
```

**dragAndDropBy(WebElement source, int xOffset, int yOffset)**

```java
WebElement source = driver.findElement(By.id("draggable"));
WebElement target = driver.findElement(By.id("droppable"));
Actions actions = new Actions(driver);
actions
    .dragAndDropBy(source, 80, 80)
    .perform();
```

### 5.6. Нажатие и отпускание клавиши клавиатуры

Для выполнения нажатия клавиши клавиатуры применяются команды **keyDown(Keys key)** и **keyDown(WebElement target, Keys key)**.

Для выполнения отпускания клавиши клавиатуры применяются команды **keyUp(Keys key)** и **keyUp(WebElement target, Keys key)**.

**keyDown(Keys key) / keyUp(Keys key)**

```java
WebElement element = driver.findElement(By.id("input"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .keyDown(Keys.SHIFT)
    .sendKeys("kiwi")
    .keyUp(Keys.SHIFT)
    .perform();
```

**keyDown(WebElement target, Keys key) / keyUp(WebElement target, Keys key)**

```java
WebElement element = driver.findElement(By.id("input"));
Actions actions = new Actions(driver);
actions
    .keyDown(element, Keys.SHIFT)
    .sendKeys(element, "kiwi")
    .keyUp(element, Keys.SHIFT)
    .perform();
```

#### Перечисление Keys

***Keys*** - перечисление определяющее коды клавиш клавиатуры.

Константы перечисления *Platform*

**Основные клавиши**

| Константа  | Описание    | 
|------------|-------------|
| ENTER      | Enter       | 
| ESCAPE     | Esc         | 
| SPACE      | Пробел      | 
| TAB        | Табуляция   |
| BACK_SPACE | Удаление    | 
| COMMAND    | Cmd         | 
| SEMICOLON	 | ;           | 
| SEPARATOR  | Разедлитель |
| DELETE     | Delete      | 
| INSERT     | Insert      | 
| HOME       | Home        | 
| END        | End         | 
| PAGE_DOWN	 | Page Down   | 
| PAGE_UP	 | Page Up     | 
| PAUSE	     | Pause       | 
| RETURN     | Return      |

**Модификационные клавиши**

| Константа    | Описание     | 
|--------------|--------------|
| ALT          | Правый Аlt   |
| CONTROL      | Правый Ctrl  |
| SHIFT        | Правый Shift |
| LEFT_ALT	   | Левый  Аlt   |
| LEFT_CONTROL | Левый  Ctrl  | 	 
| LEFT_SHIFT   | Левый  Shift |

**Арифметические клавиши**

| Константа | Описание  | 
|-----------|-----------|
| NUMPAD0	| 0         |
| NUMPAD1	| 1         |	 
| NUMPAD2	| 2         |
| NUMPAD3	| 3         |
| NUMPAD4	| 4         |
| NUMPAD5	| 5         |
| NUMPAD6	| 6         |
| NUMPAD7	| 7         |
| NUMPAD8	| 8         |
| NUMPAD9	| 9         |
| ADD	    | +         |
| SUBTRACT	| -         |
| DIVIDE	| /         |
| MULTIPLY	| *         |
| EQUALS	| =         |

**Клавиши направления**

| Константа   | Описание       | 
|-------------|----------------|
| ARROW_DOWN  | Стрелка Вниз   | 
| ARROW_UP    | Стрелка Вверх  | 
| ARROW_LEFT  | Стрелка Влево  | 
| ARROW_RIGHT | Стрелка Вправо | 
| DOWN        | Вниз           | 
| UP          | Вверх          | 
| LEFT        | Влево          | 
| RIGHT       | Вправо         | 

**Функциональные клавиши**

| Константа | Описание  |
|-----------|-----------|
| F1        | F1        |
| F2        | F2        |
| F3        | F3        |
| F4        | F4        |
| F5        | F5        |
| F6        | F6        |
| F7        | F7        |
| F8        | F8        |
| F9        | F9        |
| F10       | F10       |
| F11       | F11       |
| F12       | F12       |

**Прочие клавиши**

| Константа       | Описание  |
|-----------------|-----------|
| DECIMAL	      |           |
| HELP	          |           |
| CANCEL	      |           |
| CLEAR           |           |
| META            |           |
| NULL            |           |
| ZENKAKU_HANKAKU |           |

### 5.7. Смещение мыши

Для смещения мыши применяется команда **moveByOffset(int xOffset, int yOffset)**

**moveByOffset(int xOffset, int yOffset)**

```java
WebElement element = driver.findElement(By.id("dropdownlist"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .moveByOffset(0, 30)
    .click()
    .perform();
```

### 5.8. Перемещение мыши на элемент

Для перемещения мыши на элемент применяется команда **moveByOffset(int xOffset, int yOffset)**

**moveToElement(WebElement toElement)**

```java
WebElement element = driver.findElement(By.id("dropdownlist"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .perform();
```

Для перемещения мыши на элемент со смещением применяется команда **moveByOffset(int xOffset, int yOffset)**

**moveToElement(WebElement toElement, int xOffset, int yOffset)**

```java
WebElement element = driver.findElement(By.id("dropdownlist"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element, 0, 10)
    .perform();
```

### 5.9. Отпускание левой кнопки мыши

Для выполнения отпускания левой кнопки мыши применяются команды **release()** и **release(WebElement onElement)**

**release()**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .clickAndHold(element)
    .pause(600)
    .release()
    .perform();
```

**release(WebElement onElement)**

```java
WebElement element = driver.findElement(By.id("button"));
Actions actions = new Actions(driver);
actions
    .moveToElement(element)
    .clickAndHold()
    .pause(600)
    .release(element)
    .perform();
```

***

## 6. Исключения

### 6.1. StaleElementReferenceException

***StaleElementReferenceException*** - исключение, которое возникает, когда ссылка на элемент больше не действительна.

Исключение StaleElementReferenceException возникает в одном из следующих случаев, первый из которых наиболее распространенный:

* элемент был полностью удален со страницы
* элемент больше не подключен к DOM модели
* элемент меняет свой тип, но сохраняет тот же локатор поиска (JQuery и др.)

[selenium/docs/api : StaleElementReferenceException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/StaleElementReferenceException.html)

### 6.2. ElementClickInterceptedException

***ElementClickInterceptedException*** - исключение, которое возникает, когда команда не может быть завершена, поскольку элемент, получающий событие, скрывает целевой элемент.

[selenium/docs/api : ElementClickInterceptedException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/ElementClickInterceptedException.html)

### 6.3. ElementNotInteractableException

***ElementNotInteractableException*** - исключение, которое возникает, когда элемент присутствует в DOM, но с таким элементом невозможно взаимодействовать.

[selenium/docs/api : ElementNotInteractableException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/ElementNotInteractableException.html)

### 6.4. ElementNotVisibleException

***ElementNotVisibleException*** - исключение, которое возникает, когда элемент присутствует в DOM, но он невидим и поэтому взаимодействовать с ним невозможно.

[selenium/docs/api : ElementNotVisibleException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/ElementNotVisibleException.html)

### 6.5. ElementNotSelectableException

***ElementNotSelectableException*** — исключение, которое возникает, когда элемент присутствует в DOM, но не может быть выбран.

[selenium/docs/api : ElementNotSelectableException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/ElementNotSelectableException.html)

### 6.6. InvalidElementStateException

***InvalidElementStateException*** исключение, которое возникает, если команда не может быть завершена из-за недопустимого элемента.

[selenium/docs/api : InvalidElementStateException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/InvalidElementStateException.html)

### 6.7. InvalidCoordinatesException

***InvalidCoordinatesException*** — исключение, которое возникает, когда координаты, передаваемые в команду, недействительны.

[selenium/docs/api : InvalidCoordinatesException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/interactions/InvalidCoordinatesException.html)

### 6.8. MoveTargetOutOfBoundsException

***MoveTargetOutOfBoundsException*** — исключение, которое возникает, если в метод **moveToElement(WebElement toElement)** передан элемент, находящийся за пределами экрана, 
а так же в некоторых случаях когда драйвер не может попасть по движущемуся элементу (например, когда страница находится в процессе скролинга (jquery) — 
стоит дождаться его завершения и только после этого обращаться к элементам).

[selenium/docs/api : MoveTargetOutOfBoundsException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/interactions/MoveTargetOutOfBoundsException.html)

### 6.9. TimeoutException

***TimeoutException*** — исключение, которое возникает, когда команда не завершается в достаточный промежуток времени.

[selenium/docs/api : TimeoutException](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/TimeoutException.html)

***

Практика [![Перейти](https://img.shields.io/badge/-%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8-blue)](2.%20Практика.md)