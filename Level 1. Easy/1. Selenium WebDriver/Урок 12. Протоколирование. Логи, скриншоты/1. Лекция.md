# Java_QA / Level 1. Easy - Основы / 1.1. Selenium WebDriver / Урок 12. Протоколирование. Логи, скриншоты

[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](2.%20Практика.md)

***



***

Практика [![Перейти](https://img.shields.io/badge/-%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8-blue)](2.%20Практика.md)

#### Логи (Log)

***Логирование*** важно как для разработчиков так и для пользователей Webdriver. 
Пользователи хотят иметь возможность быстро понять почему упал тест, в то время как разработчик хочет получить информацию, почему Webdriver упал. 
Хорошее логирование может сделать дебаггинг намного проще.

##### Интерфейс WebDriver.Options

Методы интерфейса *WebDriver.Options*

| Тип  | Метод  | Описание        | 
|------|--------|-----------------|
| Logs | logs() | получение логов |

[selenium/docs/api : WebDriver.Options](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/WebDriver.Options.html)

##### Типы логов

Webdriver может быть использован в различных конфигурациях. 
К примеру, клиент запускающий тест (Java) может напрямую взаимодействовать с драйвером (локальный запуск), 
который контролирует браузер, или опосредованно через сервер (удаленный запуск). 
В зависимости от конфигурации могут быть доступны различные типы логов. 
Поэтому webdriver предоставляет возможность узнать типы поддерживаемых логов.

| Типы        | Описание                                                                        | 
|-------------|---------------------------------------------------------------------------------|
| browser     | логи от javascript консоли браузера                                             |
| client      | логи от клиентской части протокола Webdriver (например, Java bindings)          |
| driver      | логи драйвера (например, логи FirefoxDriver)                                    |
| performance | логи относящиеся к производительности на странице (тайминги загрузки ресурсов)  |
| server      | логи от Selenium сервера                                                        |

##### Уровни логгирования

Логи состоят из записей, каждая из которых содержит время (timestamp), уровень (log level) и сообщение.

*Предназначение уровней логгирования* - это предоставить пользователю способ фильтрации сообщений лога в зависимости от уровня интереса пользователя. 
Например, если цель логгирования - дебаггинг, то практически все сообщения будут нужны, в то время как при общем мониторинге понадобится меньше информации.

Для Webdriver были разработаны следующие уровни логгирования (в порядке возрастания детализированности):

| Уровень | Описание                                                 | Пример                                   |
|---------|----------------------------------------------------------|------------------------------------------|
| OFF     | логгирование отключено                                   |                                          |
| SEVERE  | сообщения об ошибках                                     | при неизвестной команде                  |
| WARNING | предупреждения о том, что могло быть неверным            | перехваченное исключение                 |
| INFO    | сообщения информативного характера о полученных командах |                                          |
| DEBUG   | сообщения для дебаггинга                                 | информация о состоянии драйвера          |
| ALL     | все сообщения                                            | все сообщения независимо от его уровня   |

Языки программирования вроде Java или Python предоставляют свои API логгирования со своими уровнями. 
Интерфейс вебдрайвера Log может работать с Java LogType, как в примере ниже. 
Однако следует иметь в виду, что внутри webdriver API уровень логгирования языка программирования должен быть преобразован 
в уровень логгирования Webdriver, прежде чем отправится запрос.

##### Интерфейс Logs

**Logs** - интерфейс предоставляющий методы работы с логами.

Методы интерфейса *Logs*

| Тип         | Метод                          | Описание                        | 
|-------------|--------------------------------|---------------------------------|
| LogEntries  | get​(String logType)            | получение логов заданного типа  |
| Set<String> | getAvailableLogTypes()         | получение доступных типов логов |

[selenium/docs/api : Logs](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/logging/Logs.html)

##### Класс LogEntries

**LogEntries** - класс представляющий пул логов.

Методы класса *LogEntries*

| Тип                 | Метод      | Описание                        | 
|---------------------|------------|---------------------------------|
| List<LogEntry>      | getAll()   | получение логов заданного типа  |
| Iterator<LogEntry>  | iterator() | получение доступных типов логов |
| Map<String, Object> | toJson()   | преобразование в JSON объект    |

[selenium/docs/api : LogEntries](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/logging/LogEntries.html)

##### Класс LogEntry

**LogEntry** - класс представляющий запись лога.

Методы класса *LogEntry*
 
| Тип                 | Метод          | Описание                                      | 
|---------------------|----------------|-----------------------------------------------|
| Level               | getLevel()     | получение уровня логгирования                 |
| String              | getMessage()   | получение сообщения в логе                    |
| long                | getTimestamp() | получение таймштампа (количество миллисекунд) |
| Map<String, Object> | toJson()       | преобразование в JSON объект                  |

[selenium/docs/api : LogEntry](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/logging/LogEntry.html)

##### Пример

```java
Logs logs = driver.manage().logs();
LogEntries logEntries = logs.get(LogType.DRIVER);
for (LogEntry logEntry : logEntries) {
    System.out.println(logEntry.getMessage());
}

LoggingPreferences logs = new LoggingPreferences();
logs.enable(LogType.BROWSER, Level.OFF);
logs.enable(LogType.CLIENT, Level.SEVERE);
logs.enable(LogType.DRIVER, Level.WARNING);
logs.enable(LogType.PERFORMANCE, Level.INFO);
logs.enable(LogType.SERVER, Level.ALL);
```

#### Логи (Log)

***Логирование*** важно как для разработчиков так и для пользователей Webdriver. 
Пользователи хотят иметь возможность быстро понять почему упал тест, в то время как разработчик хочет получить информацию, почему Webdriver упал. 
Хорошее логирование может сделать дебаггинг намного проще.

##### Интерфейс WebDriver.Options

Методы интерфейса *WebDriver.Options*

| Тип  | Метод  | Описание        | 
|------|--------|-----------------|
| Logs | logs() | получение логов |

[selenium/docs/api : WebDriver.Options](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/WebDriver.Options.html)

##### Типы логов

Webdriver может быть использован в различных конфигурациях. 
К примеру, клиент запускающий тест (Java) может напрямую взаимодействовать с драйвером (локальный запуск), 
который контролирует браузер, или опосредованно через сервер (удаленный запуск). 
В зависимости от конфигурации могут быть доступны различные типы логов. 
Поэтому webdriver предоставляет возможность узнать типы поддерживаемых логов.

| Типы        | Описание                                                                        | 
|-------------|---------------------------------------------------------------------------------|
| browser     | логи от javascript консоли браузера                                             |
| client      | логи от клиентской части протокола Webdriver (например, Java bindings)          |
| driver      | логи драйвера (например, логи FirefoxDriver)                                    |
| performance | логи относящиеся к производительности на странице (тайминги загрузки ресурсов)  |
| server      | логи от Selenium сервера                                                        |

##### Уровни логгирования

Логи состоят из записей, каждая из которых содержит время (timestamp), уровень (log level) и сообщение.

*Предназначение уровней логгирования* - это предоставить пользователю способ фильтрации сообщений лога в зависимости от уровня интереса пользователя. 
Например, если цель логгирования - дебаггинг, то практически все сообщения будут нужны, в то время как при общем мониторинге понадобится меньше информации.

Для Webdriver были разработаны следующие уровни логгирования (в порядке возрастания детализированности):

| Уровень | Описание                                                 | Пример                                   |
|---------|----------------------------------------------------------|------------------------------------------|
| OFF     | логгирование отключено                                   |                                          |
| SEVERE  | сообщения об ошибках                                     | при неизвестной команде                  |
| WARNING | предупреждения о том, что могло быть неверным            | перехваченное исключение                 |
| INFO    | сообщения информативного характера о полученных командах |                                          |
| DEBUG   | сообщения для дебаггинга                                 | информация о состоянии драйвера          |
| ALL     | все сообщения                                            | все сообщения независимо от его уровня   |

Языки программирования вроде Java или Python предоставляют свои API логгирования со своими уровнями. 
Интерфейс вебдрайвера Log может работать с Java LogType, как в примере ниже. 
Однако следует иметь в виду, что внутри webdriver API уровень логгирования языка программирования должен быть преобразован 
в уровень логгирования Webdriver, прежде чем отправится запрос.

##### Интерфейс Logs

**Logs** - интерфейс предоставляющий методы работы с логами.

Методы интерфейса *Logs*

| Тип         | Метод                          | Описание                        | 
|-------------|--------------------------------|---------------------------------|
| LogEntries  | get​(String logType)            | получение логов заданного типа  |
| Set<String> | getAvailableLogTypes()         | получение доступных типов логов |

[selenium/docs/api : Logs](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/logging/Logs.html)

##### Класс LogEntries

**LogEntries** - класс представляющий пул логов.

Методы класса *LogEntries*

| Тип                 | Метод      | Описание                        | 
|---------------------|------------|---------------------------------|
| List<LogEntry>      | getAll()   | получение логов заданного типа  |
| Iterator<LogEntry>  | iterator() | получение доступных типов логов |
| Map<String, Object> | toJson()   | преобразование в JSON объект    |

[selenium/docs/api : LogEntries](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/logging/LogEntries.html)

##### Класс LogEntry

**LogEntry** - класс представляющий запись лога.

Методы класса *LogEntry*
 
| Тип                 | Метод          | Описание                                      | 
|---------------------|----------------|-----------------------------------------------|
| Level               | getLevel()     | получение уровня логгирования                 |
| String              | getMessage()   | получение сообщения в логе                    |
| long                | getTimestamp() | получение таймштампа (количество миллисекунд) |
| Map<String, Object> | toJson()       | преобразование в JSON объект                  |

[selenium/docs/api : LogEntry](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/logging/LogEntry.html)

##### Пример

```java
Logs logs = driver.manage().logs();
LogEntries logEntries = logs.get(LogType.DRIVER);
for (LogEntry logEntry : logEntries) {
    System.out.println(logEntry.getMessage());
}

LoggingPreferences logs = new LoggingPreferences();
logs.enable(LogType.BROWSER, Level.OFF);
logs.enable(LogType.CLIENT, Level.SEVERE);
logs.enable(LogType.DRIVER, Level.WARNING);
logs.enable(LogType.PERFORMANCE, Level.INFO);
logs.enable(LogType.SERVER, Level.ALL);
```