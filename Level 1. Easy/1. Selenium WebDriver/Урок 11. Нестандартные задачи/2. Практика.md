Java_QA / Level 1. Easy - Основы / 1.1. Selenium WebDriver / Урок 12. Нестандартные задачи

[![Назад](https://img.shields.io/badge/-%D0%9D%D0%B0%D0%B7%D0%B0%D0%B4-brightgreen)](1.%20Лекция.md)
[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](3.%20Задание.md)

***

# 1. Открытие предыдущего проекта

Шаги:

1. Запустить **IntelliJ IDEA**.

2. Открыть проект прошлого урока в **IntelliJ IDEA**.

![New Maven Project - Open...](./_Files/2.%20New%20Project/01.jpg "New Maven Project - Open...")

3. Удалить все файлы .java из папки **./src/test/java** кроме **WebDriverFactory.java**

# 2. Выполнение JS скрипта

## 2.1. Доступные типы логов

Шаги:

1. Создать файл **JavaScriptTest.java** в **./src/test/java**.

![New Maven Project - JavaScriptTest.java](./_Files/2.%20New%20Project/02.jpg "New Maven Project - JavaScriptTest.java")

2. Добавить в файл **JavaScriptTest.java** код.

* объявление драйвера и логгера

```java
protected static WebDriver driver;
private Logger logger = LogManager.getLogger(JavaScriptTest.class);
```

* метод **setUp**

```java
@BeforeEach
public void setUp() {
    driver = WebDriverFactory.getDriver("chrome");
    logger.info("Драйвер стартовал!");
}
```

* метод **setDown**

```java
@AfterEach
public void setDown() {
    if(driver != null) {
        driver.quit();
        logger.info("Драйвер остановлен!");
    }
}
```

* метод **availableLogTypesTest** - получение доступных типов логов

```java
@Test
public void availableLogTypesTest() {
    // Получение доступных типов логов
    Set<String> availableLogTypes = driver.manage().logs().getAvailableLogTypes();
    for (String s : availableLogTypes)
        logger.info("Log Type:  " + s);
}
```

3. Запустить тест командой **mvn clean test** с параметром **-Dtest=JavaScriptTest#availableLogTypesTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/03.jpg "New Maven Project - Запуск теста")

4. Готово!

В результате будет выведен список доступных типов логов.

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/04.jpg "New Maven Project - Лог запуска")

## 2.2. Получение логов заданного типа

Шаги:

1. Открыть файл **LogsTest.java** в **./src/test/java**.

2. Добавить в файл **LogsTest.java** код.

* метод **logsByTypeTest** - получение логов заданного типа (BROWSER)

```java
@Test
public void logsByTypeTest() {
    // Открыть страницу https://www.dns-shop.ru/
    driver.get("https://www.dns-shop.ru/");
    logger.info("Открыта страница dns-shop.ru - https://www.dns-shop.ru/");
    // Нажать на ссылку "Да"
    By linkYesXPath = By.xpath("//a[text()=\"Да\"]");
    WebElement linkYes = driver.findElement(linkYesXPath);
    linkYes.click();
    logger.info("Нажата ссылка \"Да\"");
    // Нажать на ссылку "Бытовая техника"
    By linkBTXPath = By.xpath("//div/a[text()=\"Бытовая техника\"]");
    WebElement linkBT = driver.findElement(linkBTXPath);
    linkBT.click();
    logger.info("Нажата ссылка \"Бытовая техника\"");
    // Получить логи
    Logs logs = driver.manage().logs();
    LogEntries logsEntries = logs.get(LogType.BROWSER);
    List<LogEntry> logsEntriesList = logsEntries.getAll();
    for (LogEntry logsEntry : logsEntriesList) {
        logger.info(Date.from(Instant.ofEpochSecond(logsEntry.getTimestamp())) + " " +
            logsEntry.getLevel() + " " + logsEntry.getMessage());
    }
}
```

3. Запустить тест командой **mvn clean test** с параметром **-Dtest=LogsTest#logsByTypeTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/05.jpg "New Maven Project - Запуск теста")

4. Готово!

В результате будут получены логи заданного типа (BROWSER).

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/06.jpg "New Maven Project - Лог запуска")


***



***

Задание [![Перейти](https://img.shields.io/badge/-%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8-blue)](3.%20Задание.md)