# Java_QA / Level 1. Easy - Основы / 1.1. Selenium WebDriver / Урок 01. Введение

[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](2.%20Практика.md)
***

Перед тем как начать автоматизировать тестовые сценарии необходимо установить компоненты и подключить либы.

Рецепт следующий. Нам понадобятся:
* язык программирования;
* ide;
* сборщик проекта;
* система контроля версий;
* тестовый фреймворк;
* веб драйвер 
* менеджер драйверов;
* логирование;

## 1. Настройка окружения

Установить:
* язык программирования - Java;
* ide - IntelliJ IDEA;
* сборщик проекта - Maven;
* система контроля версий - Git;

Создать учетку в Github

### Язык программирования - Java (JDK)

В качестве языка программирования будет использоваться Java. 

#### Почему Java?

***Java*** – строго типизированный объектно-ориентированный язык программирования общего назначения, разработанный компанией Sun Microsystems (в последующем приобретённой компанией Oracle). 
Программы на Java транслируются в байт-код Java, выполняемый виртуальной машиной Java (JVM) — программой, обрабатывающей байтовый код и передающей инструкции оборудованию как интерпретатор.
Достоинством подобного способа выполнения программ является полная независимость байт-кода от операционной системы и оборудования, что позволяет выполнять Java-приложения на любом устройстве, 
для которого существует соответствующая виртуальная машина.

Разрабатывать автотесты можно и на других языках программирования - Python, Ruby, C#.

Преимущества:

* Java широко распространен в разработке (бек/микросервисы на фреймворке Spring, приложения для ОС Android);

Разработчики на Java смогут помочь в решении многих вопросов.

* Java давно используеся в автотестах;

Широкий набор библиотек для автоматизации тестирования (в частности в C# нет аналога Selenide - 
библиотеки для более изящного написания кода для автотестов).

#### Где взять Java?

На сайте [Oracle](https://www.oracle.com/java/technologies/javase-downloads.html)

#### Какую версию Java устанавливать?

Релизы Java выходят раз в полгода (не считая мелких обновлений). 
Но не стоит гнаться за новизной. Если вы установите Java последней версии, приготовьтесь к тому, что не все приложения будут хорошо работать с ней. 
Новые недавно добавленные возможности иногда приводят к проблемам совместимости.

В сентябре 2019 вышла версия 13, в 2020 вышла версия 15, но при этом большинство продолжает использовать Java 8! 
Поэтому если вы хотите максимальной стабильности и совместимости — берите Java 8.

Второе место по популярности занимает Java 11, это так называемый релиз с долгосрочной поддержкой (Long Term Support, LTS), ориентированный на корпоративных пользователей, для которых стабильность важнее новых фич.
Поддержка Java 8 официально прекращается в декабре 2020 года, к этому времени все корпоративные пользователи будут вынуждены перейти на Java 11.
 
Выбирая из 32-битной и 64-битной версий, берите 64-битную, если ваша операционная система это позволяет.

#### Что устанавливать, JRE или JDK?
  
***Java Development Kit, или JDK*** — это набор инструментов для разработки программ на языке программирования Java 
(компилятор, архиватор, генератор документации и прочие), среду выполнения (Java Runtime Environment), стандартную библиотеку языка, 
примеры и документацию.
  
***Java Runtime Environment, или JRE*** — это виртуальная машина, позволяющая запускать приложения, написанные на языке программирования Java.
  
*Правило очень простое:* если вы собираетесь что-нибудь писать на языке программирования Java, значит вам потребуется JDK. 
А если только запускать готовые программы — тогда достаточно JRE.

#### Как установить Java?

##### Установка Java Development Kit

Шаги:

1. Перейти на сайт [Oracle](https://www.oracle.com/java/technologies/javase-downloads.html) и загрузите JDK для вашей платформы.

2. Запустить exe файл.

3. В процессе установки выбрать «Development Tool» и нажать «Next».

Спустя некоторое время установка завершится.
Итак, Java Development Kit установлен, но это еще не всё. Необходимо настроить его для системы.

##### Настройка переменных сред

Инсталлятор Java выполняет минимальную необходимую настройку окружения, в том числе он добавляет в переменную среды PATH путь к директории, 
которая содержит исполняемые файлы Java (в операционной системе Windows), либо создаёт в стандартной директории для исполняемых файлов символические ссылки 
на установленные исполняемые файлы Java (в других операционных системах).

Но некоторые программы вместо этого используют переменную среды JAVA_HOME, которая должна указывать на директорию, в которую установлена Java. 
Поэтому на всякий случай можно сразу установить эту переменную.

Шаги:

1. Выполнить команду **where java** в консоли

```bash
where java
```

Эта команда вернёт путь к директории установки Java

```bash
C:\Program Files\Java\jdk1.8.0_201\bin\java.exe
C:\ProgramData\Oracle\Java\javapath\java.exe
```

2. Скопировать пути к директории установки Java

3. Открыть **Панель управления -> Система**, выбрать **Дополнительные параметры системы**

![Панель управления -> Система, выбрать Дополнительные параметры системы](./_Files/01.jpg "Панель управления -> Система, выбрать Дополнительные параметры системы")

4. В появившемся окне нажать кнопку **Переменные среды**

![Свойства системы](./_Files/02.jpg "Свойства системы")

5. В открывшемся окне в блоке **Системные переменные** нужно проверить существует ли переменная **PATH**

![Переменные среды](./_Files/03.jpg "Переменные среды")

6. Если переменная **PATH** не существует, то ее нужно создать, нажав на кнопку **Создать**

![Новая системная переменная](./_Files/04.jpg "Новая системная переменная")

7. Если переменная **PATH** уже существует, то ее нужно изменить, нажав на кнопку **Изменить**

![Изменить переменную среды](./_Files/05.jpg "Изменить переменную среды")

8. Для переменной **PATH** нужно установить Значение переменной — скопированный ранее путь к каталогу (%JAVA_HOME%\bin), в который была установлена Java (из шага 1)

![Изменить переменную среды](./_Files/06.jpg "Изменить переменную среды")

9. Подобным образом создается/изменяется переменная **JAVA_HOME**.  Значение этой переменной — путь к каталогу, в который была установлена Java (как для PATH), но уже без поддиректории **bin**

![Изменение системной переменной](./_Files/07.jpg "Изменение системной переменной")

То есть будет примерно так

* Значение в **PATH**: C:\Program Files\Java\jdk1.7.0_25\bin

* Значение в **JAVA_HOME**: C:\Program Files\Java\jdk1.7.0_25

10. Готово! Установка Java завершена

#### Как проверить правильность установки?

Теперь самое важное – необходимо убедиться, что Java установлена и настроена корректно.

Шаги: 

1.	Открыть командную строку 

2.	Выполнить команду **javac**, чтобы убедиться, что JRE установлен и настроен

```bash
javac
```

Если выдаётся список аргументов к команде **javac**, то успешно установлено и настроено все, что необходимо для использования Java!

```bash
Usage: javac <options> <source files>
where possible options include:
  -g                         Generate all debugging info
  -g:none                    Generate no debugging info
  -g:{lines,vars,source}     Generate only some debugging info
  -nowarn                    Generate no warnings
  -verbose                   Output messages about what the compiler is doing
  -deprecation               Output source locations where deprecated APIs are used
  -classpath <path>          Specify where to find user class files and annotation processors
  -cp <path>                 Specify where to find user class files and annotation processors
  -sourcepath <path>         Specify where to find input source files
  -bootclasspath <path>      Override location of bootstrap class files
  -extdirs <dirs>            Override location of installed extensions
  -endorseddirs <dirs>       Override location of endorsed standards path
  -proc:{none,only}          Control whether annotation processing and/or compilation is done.
  -processor <class1>[,<class2>,<class3>...] Names of the annotation processors to run; bypasses default discovery process
  -processorpath <path>      Specify where to find annotation processors
  -parameters                Generate metadata for reflection on method parameters
  -d <directory>             Specify where to place generated class files
  -s <directory>             Specify where to place generated source files
  -h <directory>             Specify where to place generated native header files
  -implicit:{none,class}     Specify whether or not to generate class files for implicitly referenced files
  -encoding <encoding>       Specify character encoding used by source files
  -source <release>          Provide source compatibility with specified release
  -target <release>          Generate class files for specific VM version
  -profile <profile>         Check that API used is available in the specified profile
  -version                   Version information
  -help                      Print a synopsis of standard options
  -Akey[=value]              Options to pass to annotation processors
  -X                         Print a synopsis of nonstandard options
  -J<flag>                   Pass <flag> directly to the runtime system
  -Werror                    Terminate compilation if warnings occur
  \@<filename>                Read options and filenames from file
```

3. Выполнить команду **where java**, которая должна показать правильный путь до исполняемого файла java.exe

```bash
where java
```

Эта команда вернёт путь к директории установки Java

```bash
C:\Program Files\Java\jdk1.8.0_201\bin\java.exe
C:\ProgramData\Oracle\Java\javapath\java.exe
```

4. Выполнить команду **java -version** для проверки того, что это именно та версия, которую устанавливали

```bash
java -version
```

Эта команда вернет версию Java, которую устанавливали

```bash
java version "1.8.0_201"
Java(TM) SE Runtime Environment (build 1.8.0_201-b09)
Java HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)
```

### IDE - IntelliJ IDEA

#### Почему IntelliJ IDEA?

***IntelliJ IDEA*** — известная IDE для Java, написанная, как ни странно, на Java. 
Укомплектована уникальными инструментами и позволяет без проблем ориентироваться в программе. 
Нахождение ошибок и отладка кода никогда не были такими легкими, как с IntelliJ IDEA.

Преимущества:

* глубокий анализ кода
    * умное автодополнение
    * автодополнение цепочек вызовов
    * автодополнение статических членов
    * анализ потоков данных
    * языковые вставки
    * рефакторинги для разных языков
    * поиск дубликатов
    * инспекции и быстрые исправления
* эргономичная среда
    * все необходимое прямо в редакторе
    * сочетания клавиш для любого действия
    * эргономичный интерфейс
    * встроенный отладчик
* встроенные инструменты для разработчиков
    * интеграция с системами контроля версий
    * инструменты сборки
    * инструмент запуска тестов и анализ покрытия кода
    * декомпилятор
    * терминал
    * инструменты для работы с базами данных
    * интеграция с серверами приложений
    * Docker
* разработка на разных языках
    * поддержка лучших фреймворков
    * универсальная IDE для разных языков
    * богатая экосистема плагинов 

Существует две версии IntelliJ IDEA – **Community** и **Ultimate**. 
Первая – бесплатная, но ограниченная. В ней не поддерживаются фреймворки Spring, Vaadin, GWT, языки JavaScript и TypeScript, SQL и многое другое. 
Вторая включает в себя всевозможные фичи для коллективной разработки, но бесплатна будет только 30 дней пробного периода. 
Потом вам придётся заплатить минимум 500 долларов США

![Два варианта IntelliJ IDEA](./_Files/08.jpg "Два варианта IntelliJ IDEA")

#### Как установить IntelliJ IDEA?

##### Установка IntelliJ IDEA

Шаги:

1. Скачать исходник с расширением exe. с сайта [Jetbrains](https://www.jetbrains.com/idea/download/#section=windows)

2. Запустить его и следовать инструкциям установщика

![Стартовое окно установки IntelliJ IDEA](./_Files/09.jpg "Стартовое окно установки IntelliJ IDEA")

3. Готово! Установка IntelliJ IDEA завершена

#### Предварительная  настройка IntelliJ IDEA

После установки IntelliJ IDEA, необходимо выполнить предварительную настройку 

Шаги:

1. Указать путь до настроек

При первом запуске IntelliJ IDEA перед вами выскочит диалоговое окно с требованием указать путь до файла с настройками. 
Так как это первый опыт знакомства с IDE, то выбрать пункт «Do not import settings». 
Если данное окно вылезло после обновления или переустановки – выбрать исходную директорию.

![Путь до настроек](./_Files/09.jpg "Путь до настроек")

2. Выбрать тему

Следующим шагом настройки IntelliJ IDEA будет выбор темы. ПО умолчанию их две – стандартная (светлая) и Darcula (тёмная).

![Выбор темы](./_Files/10.jpg "Выбор темы")

3. Отключить вспомогательные инструменты

Как уже было написано выше, IDEA поддерживает огромное количество вспомогательных инструментов. Разумеется, новичку они все не нужны. 
Поэтому следующим шагом будет их отключение для увеличения производительности. Для этого в очередном диалоговом окне выбрать «Disable All». 
Не переживайте, их можно подключить позднее в меню настроек.

![Отключение вспомогательных инструментов](./_Files/11.jpg "Отключение вспомогательных инструментов")

4. Завершение установки и настройки

Теперь, когда с установкой и настройкой IntelliJ IDEA покончено, можно приступить к работе. Начинается она, разумеется, 
с создания IntelliJ IDEA проекта.

![Завершение установки и настройки](./_Files/12.jpg "Завершение установки и настройки")

### Сборщик - Maven

#### Почему Maven?

***Apache Maven*** — система управления жизненным циклом проекта, фреймворк для автоматизации сборки проектов на основе описания их структуры в файлах на языке POM 
(англ. Project Object Model), являющемся подмножеством XML. Проект Maven издаётся сообществом Apache Software Foundation, 
где формально является частью Jakarta Project.

Преимущества:

* декларативный язык описания проекта (POM)
* автоматическое управление зависимостями
* огромный, поддерживаемый в актуальном состоянии репозиторий артефактов
* модульная расширяемая за счет плагинов архитектура, огромное количество плагинов

#### Как установить Maven? 

Шаги:

1. Установить Java

2. Скачать архив с официального сайта [Maven](https://maven.apache.org/download.cgi)

![Скачивание архива с официального сайта](./_Files/13.jpg "Скачивание архива с официального сайта")

3. Распаковать скачанный архив в папку

4. Установить переменной окружения **M2_HOME** ссылку на местонахождение распакованного архива

5. Установить еще одну переменную **M2** со значением **%M2_HOME%\bin**

6. Установить или добавить в переменную **Path** значение **%M2%**, чтобы наша папочка с исполняемым файлом Maven была видна из командной строки

7. Готово! Установка Maven завершена

#### Как проверить правильность установки Maven?

Шаги:

1. Выполнить команду в командной строке **mvn –v**

```bash
mvn –v
```

2. Если отобразится информация о Maven, то значит, что процесс установки завершен успешно. Все готово к работе

### Система контроля версий - Git

#### Почему Git?

***Git*** – распределённая система контроля версий, позволяющая сохранять изменения, внесённые в файлы, которые хранятся в репозитории. 

Преимущества:

* бесплатный и open-source

Это значит, что его можно бесплатно скачать и вносить любые изменения в исходный код;
  
* небольшой и быстрый

Он выполняет все операции локально, что увеличивает его скорость. Кроме того, Git локально сохраняет весь репозиторий в небольшой файл без потери качества данных.
  
* резервное копирование

Git эффективен в хранении бэкапов, поэтому известно мало случаев, когда кто-то терял данные при использовании Git.

* простое ветвление. 

В других СКВ создание веток— утомительная и трудоёмкая задача, так как весь код копируется в новую ветку. 
В Git управление ветками реализовано гораздо проще и эффективнее.

#### Как установить Git?

##### Установка Git

Шаги:

1. Скачать последнюю версию программы с [сайта](https://git-scm.com/download/win)

![Скачивание последней версии программы](./_Files/14.jpg "Скачивание последней версии программы")

2. Запустить программу установки

![Запуск программы установки](./_Files/14.jpg "Запуск программы установки")

3. После успешного запуска программы установки отобразится экран мастера установки Git. 
Для завершения установки следуйте инструкциям, нажимая кнопки Далее и Готово. 
Параметры по умолчанию достаточно хорошо подходят для большинства пользователей.

![Экран мастера установки Git](./_Files/15.jpg "Экран мастера установки Git")

##### Настройка Git

Настройка системы Git предполагает, в первую очередь, указание имени пользователя и e-mail, 
которые используются для подписи коммитов и отправки изменений в удаленный репозиторий.

#### Как проверить правильность установки Git?

В командной строке набрать и выполнить команду **git –-version**

```bash
git –-version
```

Если все ок, то в консоли будет выведена версия установленного **Git**

```bash
git version 2.26.2.windows.1
```

### GitHub

#### Почему GitHub?

***GitHub*** — сервис онлайн-хостинга репозиториев, обладающий всеми функциями распределённого контроля версий и функциональностью управления исходным кодом — всё, что поддерживает Git и даже больше. 

Цель GitHub — содействовать взаимодействию разработчиков.

Преимущества:

* контроль доступа
* багтрекинг
* управление задачами
* вики для каждого проекта
* интеграция со множеством популярных сервисов
* графики
* вложенные списки задач

#### Как зарегистрироваться на GitHub?

Шаги:

1. Перейти на сайт [GutHub](https://github.com/)

![Главная страница сайта GitHub](./_Files/16.jpg "Главная страница сайта GitHub")

2. Нажать кнопку **Sign up** 

3. На странице регистрации ввести обязательные данные:
   
    * имя пользователя
    * адрес электронной почты
    * пароль

![Странице регистрации сайта GitHub](./_Files/17.jpg "Странице регистрации сайта GitHub")

4. На указанную ранее почту придёт письмо с просьбой подтвердить электронный адрес. 
Для завершения регистрации пройдите по полученной ссылке. 

5. Готово! Аккаунт для Гитхаба создан.

## 2. Добавление библиотек

Подключить следующие зависимости
* тестовый фреймворк - JUnit 5
* веб драйвер - Selenium WebDriver 
* менеджер драйверов - WebDriverManager
* логирование - Log4J2

### Тестовый фреймворк - JUnit 5

#### Почему JUnit 5?

***JUnit5** — это мощное и гибкое обновление фреймворка JUnit, которое предоставляет множество улучшений и новых функций для написания тестов. 

В Java есть несколько широко используемых тестовых фреймворков - JUnit4, JUnit5 и TestNG.
На текущий момент JUnit4 считается устаревшим, взамен ему вышла новая версия JUnit5. 
А вот и JUnit5 и TestNG являются современными инструментами для тестирования в экосистеме Java и предоставляют практически схожие возможности.

#### Как подключить JUnit?

В POM.xml добавить следующую зависимость

```xml
<dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter-engine</artifactId>
    <version>5.1.0</version>
    <scope>test</scope>
</dependency>
```

[Сравнение тестовых фреймворков JUnit5 и TestNG](JUnitVersusTestNG.md)

### Веб драйвер - Selenium WebDriver

**Selenium Webdriver** - инструмент для автоматизации реального браузера, как локально, так и удалённо, 
наиболее близко имитирующий действия пользователя.

#### Как подключить Selenium WebDriver?

В POM.xml добавить следующую зависимость

```xml
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>3.141.59</version>
</dependency>
```

### Веб драйвер менеджер - WebDriverManager

**WebDriverManager** - библиотека, которая позволяет автоматизировать управление драйверами. 

Без нее необходимо скачивать драйвер для каждого файла и в коде прописывать путь до исполняемого файла

```java
System.setProperty("webdriver.chrome.driver", "/path/to/chromedriver");
```

#### Как подключить WebDriverManager?

В POM.xml добавить следующую зависимость

```xml
<dependency>
    <groupId>io.github.bonigarcia</groupId>
    <artifactId>webdrivermanager</artifactId>
    <version>4.2.0</version>
</dependency>
```

### Логирование - Log4J2

**Log4j** — библиотека журналирования (логирования) Java-программ, часть общего проекта «Apache Logging Project».

#### Как подключить Log4J2?

В POM.xml добавить следующую зависимость

```xml
<dependencies>
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-api</artifactId>
        <version>2.14.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-core</artifactId>
        <version>2.14.0</version>
    </dependency>
</dependencies>
```

## 3. Написание и запуск первого автотеста

