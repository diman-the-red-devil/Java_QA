Java_QA / 11. Паттерны

[![Лекция](https://img.shields.io/badge/-Лекция-ee99ff)](1.%20Лекция.md)
[![Главная](https://img.shields.io/badge/-Главная-aaccee)](README.md)
[![Задание](https://img.shields.io/badge/-Задание-99ffee)](3.%20Задание.md)

***

# Содержание

* [1. Открытие предыдущего проекта](#1-открытие-предыдущего-проекта)
* [2. Модели данных](#2-модели-данных)
* [3. Простой Java Объект (Plain Old Java Object (POJO))](#3-простой-java-объект-plain-old-java-object-pojo)
  * [3.1. Класс SmartphonePOJO](#31-класс-smartphonepojo)
  * [3.2. Полный код SmartphonePOJO.java](#32-полный-код-smartphonepojojava)
  * [3.3. Класс Pattern6POJOTest](#33-класс-pattern6pojotest)
  * [3.4. Полный код Pattern6POJOTest.java](#34-полный-код-pattern6pojotestjava)
  * [3.5. Запуск автотеста](#35-запуск-автотеста)
  * [3.6. Что изменилось и какая польза?](#36-что-изменилось-и-какая-польза)
* [4. Паттерн Java Боб (JavaBean)](#4-паттерн-java-боб-javabean)
	* [4.1. Класс SmartphoneJB](#41-класс-smartphonejb)
	* [4.2. Полный код SmartphoneJB.java](#42-полный-код-smartphonejbjava)
	* [4.3. Класс Pattern7JBTest](#43-класс-pattern7jbtest)
	* [4.4. Полный код Pattern7JBTest.java](#44-полный-код-pattern7jbtestjava)
	* [4.5. Запуск автотеста](#45-запуск-автотеста)
	* [4.6. Что изменилось и какая польза?](#46-что-изменилось-и-какая-польза)
* [5. Значения](#5-значения)
* [6. Паттерн Объект Значение (Value Object (VO))](#6-паттерн-объект-значение-value-object-vo)
	* [6.1. Класс Ram](#61-класс-ram)
	* [6.2. Полный код Ram.java](#62-полный-код-ramjava)
	* [6.3. Класс Company](#63-класс-company)
	* [6.4. Полный код Company.java](#64-полный-код-companytjava)
	* [6.5. Класс SmartphoneVO](#65-класс-smartphonevo)
	* [6.6. Полный код SmartphoneVO.java](#66-полный-код-smartphonevojava)
    * [6.7. Класс Pattern8VOTest](#67-класс-pattern8votest)
    * [6.8. Полный код Pattern8VOTest.java](#68-полный-код-pattern8votestjava)
    * [6.9. Запуск автотеста](#69-запуск-автотеста)
    * [6.10. Что изменилось и какая польза?](#610-что-изменилось-и-какая-польза)
* [7. Паттерн Строитель (Builder)](#7-паттерн-строитель-builder)
    * [7.1. Класс SmartphoneBL](#71-класс-smartphonebl)
    * [7.2. Полный код SmartphoneBL.java](#72-полный-код-smartphonebljava)
    * [7.3. Класс SmartphoneBLBuilder](#73-класс-smartphoneblbuilder)
    * [7.4. Полный код SmartphoneBLBuilder.java](#74-полный-код-smartphoneblbuilderjava)
    * [7.5. Класс Pattern9BLTest](#75-класс-pattern9bltest)
    * [7.6. Полный код Pattern9BLTest.java](#76-полный-код-pattern9bltestjava)
    * [7.7. Запуск автотеста](#77-запуск-автотеста)
    * [7.8. Что изменилось и какая польза?](#78-что-изменилось-и-какая-польза)
* [8. Шаги](#8-шаги)
* [9. Паттерн Фасад (Facade)](#9-паттерн-фасад-facade)
    * [9.1. Класс StartPageSteps](#91-класс-startpagesteps)
    * [9.2. Полный код StartPageSteps.java](#92-полный-код-startpagestepsjava)
    * [9.3. Класс SmartphonesPageSteps](#93-класс-smartphonespagesteps)
    * [9.4. Полный код SmartphonesPageSteps.java](#94-полный-код-smartphonespagestepsjava)
    * [9.5. Класс SmartphoneProductPageSteps](#95-класс-smartphoneproductpagesteps)
    * [9.6. Полный код SmartphoneProductPageSteps.java](#96-полный-код-smartphoneproductpagestepsjava)
    * [9.7. Класс SmartphoneProductPageMatcherFC](#97-класс-smartphoneproductpagematcherfc)
    * [9.8. Полный код SmartphoneProductPageMatcherFC.java](#98-полный-код-smartphoneproductpagematcherfcjava)
    * [9.9. Класс Pattern10FCTest](#99-класс-pattern10fctest)
    * [9.10. Полный код Pattern10FCTest.java](#910-полный-код-pattern10fctestjava)
    * [9.11. Запуск автотеста](#911-запуск-автотеста)
    * [9.12. Что изменилось и какая польза?](#912-что-изменилось-и-какая-польза)
* [10. Фабрика драйверов](#10-фабрика-драйверов)
* [11. Паттерн Простая Фабрика (SimpleFactory)](#11-паттерн-простая-фабрика-simplefactory)
    * [11.1. Перечисление BrowserName](#111-перечисление-browsername)
    * [11.2. Полный код BrowserName.java](#112-полный-код-browsernamejava)
    * [11.3. Класс ChromeBrowser](#113-класс-chromebrowser)
    * [11.4. Полный код ChromeBrowser.java](#114-полный-код-chromebrowserjava)
    * [11.5. Класс FirefoxBrowser](#115-класс-firefoxbrowser)
    * [11.6. Полный код FirefoxBrowser.java](#116-полный-код-firefoxbrowserjava)
    * [11.7. Класс EdgeBrowser](#117-класс-edgebrowser)
    * [11.8. Полный код EdgeBrowser.java](#118-полный-код-edgebrowserjava)
    * [11.9. Класс WebDriverFactory](#119-класс-webdriverfactory)
    * [11.10. Полный код WebDriverFactory.java](#1110-полный-код-webdriverfactoryjava)
    * [11.11. Класс BaseTestWF](#1111-класс-basetestwf)
    * [11.12. Полный код BaseTestWF.java](#1112-полный-код-basetestwfjava)
    * [11.13. Класс Pattern11WFTest](#1113-класс-pattern11wftest)
    * [11.14. Полный код Pattern11WFTest.java](#1114-полный-код-pattern11wftestjava)
    * [11.15. Запуск автотеста](#1115-запуск-автотеста)
    * [11.16. Что изменилось и какая польза?](#1116-что-изменилось-и-какая-польза)
* [12. Что еще можно сделать?](#12-что-еще-можно-сделать)

***

# 1. Открытие предыдущего проекта

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

Шаги:

1. Запустить **IntelliJ IDEA**.

2. Открыть проект прошлого урока в **IntelliJ IDEA**.

![New Maven Project - Open...](./_Files/2.%20New%20Project/1.%20Open%20Project/01.jpg "New Maven Project - Open...")

***

# 2. Модели данных

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

Шаги:

1. Создать пакет Java **models** в папке **./src/test/java**.

![New Maven Project - models](./_Files/2.%20New%20Project/2.%20Models/01.jpg "New Project - models")

В данном пакете будут находиться **.java** файлы с классами описывающими тестовые данные.

***

# 3. Простой Java Объект (Plain Old Java Object (POJO))

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

## 3.1. Класс SmartphonePOJO

***SmartphonePOJO*** - класс, созданный с применением **POJO** и представляющий смартфон.

Шаги:

1. Создать файл **SmartphonePOJO.java** в **./src/test/java/models**.

![New Maven Project - SmartphonePOJO.java](./_Files/2.%20New%20Project/3.%20Plain%20Old%20Java%20Object/01.jpg "New Project - SmartphonePOJO.java")

2. Добавить в файл **SmartphonePOJO.java** код.

* объявление полей класса

```java
// Оперативная память
public int ram;
// Производитель
public String company;
```

* конструктор класса

```java
// Конструктор
public SmartphonePOJO(int ram, String company) {
    this.ram = ram;
    this.company = company;
}
```

## 3.2. Полный код SmartphonePOJO.java

[SmartphonePOJO.java](_Sample/src/test/java/models/SmartphonePOJO.java)

## 3.3. Класс Pattern6POJOTest

***Pattern6POJOTest*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**
с применением паттернов:

* **Page Object Model**
* **PageFactory**
* **Page Elements**
* **Arrange Act Assert**
* **Assert Objects / Matchers**
* **Plain Old Java Object**

Класс **Pattern6POJOTest** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **Pattern6POJOTest.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - Pattern6POJOTest.java](./_Files/2.%20New%20Project/3.%20Plain%20Old%20Java%20Object/02.jpg "New Project - Pattern6POJOTest.java")

2. Наследоваться от класса **BaseTest**

```java
public class Pattern6POJOTest extends BaseTest {
    
}
```

3. Добавить в файл **Pattern6POJOTest.java** код.

* метод **dnsTest** - тест

Код метода из файла **Pattern5PETest.java**.

```java
@Test
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(company, ram);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

Код метода из файла **Pattern5PETest.java**.

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(String company, String ram) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(company).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(ram).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

4. Изменить код применив **Plain Old Java Object**

* метод **dnsTest** - тест

```java
@Test
public void dnsTest() {
    // 1. Arrange
    SmartphonePOJO smartphonePOJO = new SmartphonePOJO(8, "Samsung");
    // String company = "Samsung"; // производитель
    // String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(smartphonePOJO);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphonePOJO smartphonePOJO) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphonePOJO.company).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphonePOJO.ram + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

## 3.4. Полный код Pattern6POJOTest.java

[Pattern6POJOTest.java](_Sample/src/test/java/tests/smartphones/Pattern6POJOTest.java)

## 3.5. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=Pattern6POJOTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/3.%20Plain%20Old%20Java%20Object/03.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/3.%20Plain%20Old%20Java%20Object/04.jpg "New Maven Project - Запуск теста")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/3.%20Plain%20Old%20Java%20Object/05.jpg "New Maven Project - Лог запуска")

## 3.6. Что изменилось и какая польза?

Теперь вместо двух переменных примитивных типов используется объект 
класса **SmartphonePOJO**, созданный с применением **POJO**.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/3.%20Plain%20Old%20Java%20Object/06.jpg "New Maven Project - Что изменилось и какая польза?")

Представьте, что в метод **getProductPage** нужно передать не 2 параметра, 
а 2 - 10 (заполнить от 2 до 10 разных фильтров).
Тогда нужно будет создавать новые методы и копировать логику по заполнению полей фильтров в них. 
В итоге у нас будет:

* куча дублированного кода по заполнению полей фильтров
* множество параметров с одинаковыми типами, в которых легко запутаться
* анти-паттерн **Телескопический метод** (когда в параметрах более двух аргументов)

Добавление класса **SmartphonePOJO** решает данные проблемы.

***

# 4. Паттерн Java Боб (JavaBean)

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

## 4.1. Класс SmartphoneJB

***SmartphoneJB*** - класс представляющий смартфон, созданный с применением **JavaBean**.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **SmartphoneJB.java** в **./src/test/java/models**.

![New Maven Project - SmartphoneJB.java](./_Files/2.%20New%20Project/4.%20Java%20Beans/01.jpg "New Project - SmartphoneJB.java")

2. Реализовать интерфейс ****java.io.Serializable****

```java
public class SmartphoneJB implements Serializable {

}
```

3. Добавить в файл **SmartphoneJB.java** код.

* объявление полей класса

```java
// Оперативная память
private int ram;
// Производитель
private String company;
```

* конструктор класса по умолчанию

```java
 // Конструктор по умолчанию
public SmartphoneJB() {

}
```

* конструктор класса

```java
// Конструктор
public SmartphoneJB(int ram, String company) {
    this.ram = ram;
    this.company = company;
}
```

* cеттеры и геттеры

```java
// Сеттеры и геттеры

// Оперативная память
public void setRam(int ram) {
    this.ram = ram;
}

public int getRam() {
    return this.ram;
}

// Производитель
public void setCompany(String company) {
    this.company = company;
}

public String getCompany() {
    return this.company;
}
```

## 4.2. Полный код SmartphoneJB.java

[SmartphoneJB.java](_Sample/src/test/java/models/SmartphoneJB.java)

## 4.3. Класс Pattern7JBTest

***Pattern7JBTest*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**.
с применением паттернов:

* **Page Object Model**
* **PageFactory**
* **Page Elements**
* **Arrange Act Assert**
* **Assert Objects / Matchers**
* **JavaBean**

Класс **Pattern7JBTest** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **Pattern7JBTest.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - Pattern7JBTest.java](./_Files/2.%20New%20Project/4.%20Java%20Beans/02.jpg "New Project - Pattern7JBTest.java")

2. Наследоваться от класса **BaseTest**

```java
public class Pattern7JBTest extends BaseTest {
    
}
```

3. Добавить в файл **Pattern7JBTest.java** код.

* метод **dnsTest** - тест

Код метода из файла **Pattern6POJOTest.java**.

```java
@Test
public void dnsTest() {
    // 1. Arrange
    SmartphonePOJO smartphonePOJO = new SmartphonePOJO(8, "Samsung");
    // String company = "Samsung"; // производитель
    // String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(smartphonePOJO);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

Код метода из файла **Pattern6POJOTest.java**.

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphonePOJO smartphonePOJO) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphonePOJO.company).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphonePOJO.ram + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

4. Изменить код применив **JavaBean**

* метод **dnsTest** - тест

```java
@Test
// Проверка
public void dnsTest() {
    // 1. Arrange
    SmartphoneJB smartphoneJB = new SmartphoneJB( 8, "Samsung");
    // String company = "Samsung"; // производитель
    // String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPage smartphoneProductPage = getProductPage(smartphoneJB);

    // 3. Assert
    String expected = "Купить 6.7\" Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый в интернет магазине DNS. Характеристики, цена Samsung Galaxy Z Flip3 | 4845670";
    SmartphoneProductPageAssert smartphoneProductAssert = new SmartphoneProductPageAssert(smartphoneProductPage);
    smartphoneProductAssert.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphoneJB smartphoneJB) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphoneJB.getCompany()).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphoneJB.getRam() + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

## 4.4. Полный код Pattern7JBTest.java

[Pattern7JBTest.java](_Sample/src/test/java/tests/smartphones/Pattern7JBTest.java)

## 4.5. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=Pattern7JBTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/4.%20Java%20Beans/03.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/4.%20Java%20Beans/04.jpg "New Maven Project - Запуск теста")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/4.%20Java%20Beans/05.jpg "New Maven Project - Лог запуска")

## 4.6. Что изменилось и какая польза?

Теперь вместо объекта класса **SmartphonePOJO** используется объект класса **SmartphoneJB** созданный с использованием **JavaBeans**.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/4.%20Java%20Beans/06.jpg "New Maven Project - Что изменилось и какая польза?")

Допустим в тестах нужно будет выполнить серию проверок с разными тестовыми данными.
К примеру, у вас есть параметризованный тест с 20 комбинациями входных данных.
Тогда придется хранить тестовые данные в коде в виде списка или массива объектов.
Можно написать метод, который будет отдавать список или массив с этими данными.
А что если будет множество проверок на множестве тестовых данных?
Вероятно, со временем вам захочется хранить тестовые данные отдельно от самих тестов (**DDT (Data Driven Testing)**)
в виде файлов **XLS**, **JSON**, **CSV**, **XML** либо в другом формате (база данных например).

Для работы библиотек преобразователей объектов в форматы **XLS**, **JSON**, **CSV**, **XML** и др, классы **Java** 
должны следовать определенным правилам и соглашениям - геттеры, сеттеры, пустой конструктор. 
Это как раз и прописано в **JavaBeans**.

Написание класса **SmartphoneJB** позволяет хранить тестовые данные вне кода тестов в виде **JSON**, **CSV** файлов.

Класс **SmartphoneJB** следует соглашениям **JavaBeans**, что дает множество преимуществ:

* использование инструментов для работы с объектами **Java**
* подключение к источникам данных
* внедрение зависимостей / инверсия управления

***

# 5. Значения

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

Шаги:

1. Создать пакет Java **valueobjects** в папке **./src/test/java/models**.

![New Maven Project - valueobjects](./_Files/2.%20New%20Project/5.%20Values/01.jpg "New Project - valueobjects")

В данном пакете будут находиться **.java** файлы с классами описывающими параметры тестовых данных.

***

# 6. Паттерн Объект Значение (Value Object (VO))

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

## 6.1. Класс Ram

***Ram*** - класс представляющий объект-значение ОП.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **Ram.java** в **./src/test/java/models/valueobjects**.

![New Maven Project - Ram.java](./_Files/2.%20New%20Project/6.%20Value%20Object/01.jpg "New Project - Ram.java")

2. Реализовать интерфейс ****java.io.Serializable****

```java
public class Ram implements Serializable {

}
```

3. Добавить в файл **Ram.java** код.

* объявление полей класса

```java
// ОП
private int ram;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public Ram() {

}
```

* конструктор класса с проверкой

```java
// Конструктор с проверкой
public Ram(int ram) {
    // Если задано значение меньше 0, то выбросить исключение
    if (ram > 0)
        this.ram = ram;
    else
        throw new IllegalArgumentException("ОП не может быть меньше 0");
}
```

* геттеры

```java
// Геттер
public int getRam() {
    return this.ram;
}
```

* переопределенный метод сравнения

```java
// Переопределенный метод сравнения
public boolean equals(Ram otherRam) {
    return this.ram == otherRam.ram;
}
```

## 6.2. Полный код Ram.java

[Ram.java](_Sample/src/test/java/models/valueobjects/Ram.java)

## 6.3. Класс Company

***Company*** - класс представляющий объект-значение Производитель.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **Company.java** в **./src/test/java/models/valueobjects**.

![New Maven Project - Company.java](./_Files/2.%20New%20Project/6.%20Value%20Object/02.jpg "New Project - Company.java")

2. Реализовать интерфейс ****java.io.Serializable****

```java
public class Company implements Serializable {

}
```

3. Добавить в файл **Company.java** код.

* объявление полей класса

```java
// Производитель
private String company;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public Company() {

}
```

* конструктор класса с проверкой

```java
// Конструктор с проверкой
public Company(String company) {
    if (!company.isBlank() || !company.isEmpty())
        this.company = company;
    else
        throw new IllegalArgumentException("Наименование производителя не может быть пустым!");
}
```

* геттеры

```java
// Геттер
public String getCompany() {
    return this.company;
}
```

* переопределенный метод сравнения

```java
// Переопределенный метод сравнения
public boolean equals(Company otherCompany) {
    return this.company.equals(otherCompany.company);
}
```

## 6.4. Полный код Company.java

[Product.java](_Sample/src/test/java/models/valueobjects/Company.java)

## 6.5. Класс SmartphoneVO

***SmartphoneVO*** - класс представляющий смартфон, созданный с применением **JavaBean** и **ValueObject**.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **SmartphoneVO.java** в **./src/test/java/models**.

![New Maven Project - SmartphoneVO.java](./_Files/2.%20New%20Project/6.%20Value%20Object/03.jpg "New Project - SmartphoneVO.java")

2. Реализовать интерфейс ****java.io.Serializable****

```java
public class SmartphoneVO implements Serializable {

}
```

3. Добавить в файл **SmartphoneVO.java** код.

* объявление полей класса

```java
// Оперативная память
private Ram ram;
// Производитель
private Company company;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public SmartphoneVO() {

}
```

* конструктор класса

```java
// Конструктор
public SmartphoneVO(Ram ram, Company company) {
    this.ram = ram;
    this.company = company;
}
```

* cеттеры и геттеры

```java
// Сеттеры и геттеры
// Оперативная память
public void setRam(Ram ram) {
    this.ram = ram;
}

public Ram getRam() {
    return this.ram;
}
// Производитель
public void setCompany(Company company) {
    this.company = company;
}

public Company getCompany() {
    return this.company;
}
```

## 6.6. Полный код SmartphoneVO.java

[SmartphoneVO.java](_Sample/src/test/java/models/SmartphoneVO.java)

## 6.7. Класс Pattern8VOTest

***Pattern8VOTest*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**
с применением паттернов:

* **Page Object Model**
* **PageFactory**
* **Page Elements**
* **Arrange Act Assert**
* **Assert Objects / Matchers**
* **JavaBean**
* **ValueObject**

Класс **Pattern8VOTest** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **Pattern8VOTest.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - Pattern8VOTest.java](./_Files/2.%20New%20Project/6.%20Value%20Object/04.jpg "New Project - Pattern8VOTest.java")

2. Наследоваться от класса **BaseTest**

```java
public class Pattern8VOTest extends BaseTest {
    
}
```

3. Добавить в файл **Pattern8VOTest.java** код.

* метод **dnsTest** - тест

Код метода из файла **Pattern7JBTest.java**.

```java
@Test
public void dnsTest() {
    // 1. Arrange
    SmartphoneJB smartphoneJB = new SmartphoneJB(8, "Samsung");
    // String company = "Samsung"; // производитель
    // String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(smartphoneJB);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

Код метода из файла **Pattern7JBTest.java**.

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphoneJB smartphoneJB) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphoneJB.getCompany()).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphoneJB.getRam() + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

4. Изменить код применив **JavaBean**

* метод **dnsTest** - тест

```java
@Test
// Проверка
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    int ram = 8; // объем ОП
    SmartphoneVO smartphoneVO = new SmartphoneVO(
	    new Ram(ram),
	    new Company(company)
    );

    // 2. Act
    SmartphoneProductPage smartphoneProductPage = getProductPage(smartphoneVO);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphoneVO smartphoneVO) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphoneVO.getCompany().getCompany()).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphoneVO.getRam().getRam() + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

## 6.8. Полный код Pattern8VOTest.java

[Pattern8VOTest.java](_Sample/src/test/java/tests/smartphones/Pattern8VOTest.java)

## 6.9. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=Pattern8VOTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/6.%20Value%20Object/05.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/6.%20Value%20Object/06.jpg "New Maven Project - Что изменилось и какая польза?")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/6.%20Value%20Object/07.jpg "New Maven Project - Лог запуска")

## 6.10. Что изменилось и какая польза?

Теперь вместо объекта класса **SmartphoneJB** используется объект класса **SmartphoneVO**.
В классе **SmartphoneVO** вместо примитивных типов используются объекты значения (**Value Object (VO)**) - 
классы **Ram** и **Company**.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/6.%20Value%20Object/08.jpg "New Maven Project - Что изменилось и какая польза?")

Использование примитивных типов имеет несколько минусов:

* отсутствие проверки входного значения

Например, в фильтре ОП есть конкретные значения - 1, 2, 3, 4, 6, 8 и т д.
То есть нет смысла пытаться задать фильтр 5 или 7 Гб, а уж тем более -10 Гб.
Автотест просто не выполниться - **Selenium WebDriver** не найдет такого фильтра на странице.
Аналогично и для наименования производителя - не может быть наименования без букв.
Такие проверки не относятся к тестовым сценариям поиска и выбора смартфона.

* смешивание параметров

Кроме фильтра ОП есть фильтр Встроенной памяти.
Если задать эти параметры примитивными типами данных, то есть вероятность их перепутать.
Когда два таких параметра то еще ничего страшного не случится.
А если их станет намного больше двух?

* дублирование кода проверок

А теперь допустим у нас много тест кейсов, где нужно задавать много фильтров.
С примитивными типами данных нам придется везде копипастить проверки входных данных.

Создав отдельные классы объекты значения **Ram** и **Company** можно решить выше указанные проблемы.

***

# 7. Паттерн Строитель (Builder)

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

## 7.1. Класс SmartphoneBL

***SmartphoneBL*** - класс представляющий смартфон, созданный с применением **JavaBeans** и **ValueObject**.

Данный класс реализует интерфейс **java.io.Serializable**.
Это такой же класс, что был раннее в практике, с тем лишь отличием,
что были добавлены два поля и соответствующие геттеры и сеттеры.

Шаги:

1. Создать файл **SmartphoneBL.java** в **./src/test/java/models**.

![New Maven Project - SmartphoneBL.java](./_Files/2.%20New%20Project/7.%20Builder/01.jpg "New Project - SmartphoneBL.java")

2. Реализовать интерфейс ****java.io.Serializable****

```java
public class SmartphoneBL implements Serializable {

}
```

3. Добавить в файл **SmartphoneBL.java** код.

* объявление полей класса

```java
// Оперативная память
private Ram ram;
// Внутренняя память
private int rom;
// Производитель
private Company сompany;
// Модель
private String model;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public SmartphoneBL() {

}
```

* конструктор класса

```java
// Конструктор
public SmartphoneBL(Ram ram, Company company) {
    this.ram = ram;
    this.company = company;
}
```

* cеттеры и геттеры

```java
// Сеттеры и геттеры

// Оперативная память
public void setRam(Ram ram) {
    this.ram = ram;
}
public Ram getRam() {
    return this.ram;
}

// Внутренняя память
public void setRom(int rom) {
    this.rom = rom;
}
public int getRom() {
    return this.rom;
}

// Производитель
public void setCompany(Company сompany) {
    this.сompany = сompany;
}
public Company getCompany() {
    return this.сompany;
}

// Модель
public void setModel(String model) {
    this.model = model;
}
public String getModel() {
    return this.model;
}
```

## 7.2. Полный код SmartphoneBL.java

[SmartphoneBL.java](_Sample/src/test/java/models/SmartphoneBL.java)

## 7.3. Класс SmartphoneBLBuilder

***SmartphoneBLBuilder*** - класс строитель объекта **SmartphoneBL**.

Шаги:

1. Создать файл **SmartphoneBLBuilder.java** в **./src/test/java/models**.

![New Maven Project - SmartphoneBLBuilder.java](./_Files/2.%20New%20Project/7.%20Builder/02.jpg "New Project - SmartphoneBLBuilder.java")

2. Добавить в файл **SmartphoneBLBuilder.java** код.

* объявление полей класса аналогично полям класса **Smartphone**

```java
// Оперативная память
private Ram ram;
// Внутренняя память
private int rom = 256; // значение заданное по умолчанию - 256
// Производитель
private Company сompany;
// Модель
private String model = "Galaxy S20"; // значение заданное по умолчанию - Galaxy S20
```

* конструктор с параметрами

```java
// Конструктор
public SmartphoneBLBuilder(Ram ram, Company сompany) {
    this.ram = ram;
    this.сompany = сompany;
}
```

* методы установки значений полей класса **Smartphone**

```java
// Установка значения поля "Внутренняя память"
public SmartphoneBLBuilder setRom(int rom) {
    this.rom = rom;
    return this;
}

// Установка значения поля "Модель"
public SmartphoneBLBuilder setModel(String model) {
    this.model = model;
    return this;
}
```

* метод создания объекта класса **Smartphone**

```java
// Создание объекта "Смартфон"
public SmartphoneBL build() {
    SmartphoneBL smartphone = new SmartphoneBL();
    smartphone.setRam(this.ram);
    smartphone.setRom(this.rom);
    smartphone.setCompany(this.сompany);
    smartphone.setModel(this.model);
    return smartphone;
}
```

## 7.4. Полный код SmartphoneBLBuilder.java

[SmartphoneBLBuilder.java](_Sample/src/test/java/models/SmartphoneBLBuilder.java)

## 7.5. Класс Pattern9BLTest

***Pattern9BLTest*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**
с применением паттернов:

* **Page Object Model**
* **PageFactory**
* **Page Elements**
* **Arrange Act Assert**
* **Assert Objects / Matchers**
* **JavaBean**
* **ValueObject**
* **Builder**

Класс **Pattern9BLTest** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **Pattern9BLTest.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - Pattern9BLTest.java](./_Files/2.%20New%20Project/7.%20Builder/03.jpg "New Project - Pattern9BLTest.java")

2. Наследоваться от класса **BaseTest**

```java
public class Pattern9BLTest extends BaseTest {
    
}
```

3. Добавить в файл **Pattern9BLTest.java** код.

* метод **dnsTest** - тест

Код метода из файла **Pattern8VOTest.java**.

```java
@Test
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    int ram = 8; // объем ОП
    SmartphoneVO smartphoneVO = new SmartphoneVO(
            new Ram(ram),
            new Company(company)
    );

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(smartphoneVO);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

Код метода из файла **Pattern8VOTest.java**.

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphoneVO smartphoneVO) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphoneVO.getCompany().getCompany()).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphoneVO.getRam().getRam() + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

4. Изменить код применив **Builder**

* метод **dnsTest** - тест

```java
@Test
// Проверка
public void dnsTest() {
    // 1. Arrange
    String сompany = "Samsung"; // производитель
    String model = "S22";       // модель
    int ram = 8;                // объем оперативной памяти
    int rom = 256;              // объем внутренней памяти

    SmartphoneBLBuilder builder = new SmartphoneBLBuilder(
	    new Ram(ram),
	    new Company(сompany))
	    .setRom(rom)
	    .setModel(model);
    SmartphoneBL smartphone = builder.build(); // Создание объекта

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(smartphoneBL);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение страницы с продуктом
public SmartphoneProductPage getProductPage(SmartphoneBL smartphoneBL) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphoneBL.getCompany().getCompany()).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphoneBL.getRam().getRam() + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

## 7.6. Полный код Pattern9BLTest.java

[Pattern9BLTest.java](_Sample/src/test/java/tests/smartphones/Pattern9BLTest.java)

## 7.7. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=Pattern9BLTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/7.%20Builder/04.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/7.%20Builder/05.jpg "New Maven Project - Лог запуска")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/7.%20Builder/06.jpg "New Maven Project - Лог запуска")

## 7.8. Что изменилось и какая польза?

Экземпляр класса **SmartphoneBL** создается через объект Строитель.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/7.%20Builder/06.jpg "New Maven Project - Лог запуска")

Некоторые классы могут содержать очень много полей (намного больше 2 или 3). И не все эти поля являются обязательными.
Например, нам необязательно во всех кейсах устанавливать все фильтры и потом проверять эти значения на странице продукта (смартфона).
А что тогда делать в этом случае? Создавать +100500 телескопических конструкторов на все случаи жизни?

Нет, для это есть паттерн Строитель (**Builder**), который позволяет нам собирать объект по частям.
Строго говоря в самом простом случае можно было бы обойтись и без него используя дефолтный конструктор и сеттеры.
Но паттерн Строитель - это не просто вызов сеттеров. Следует понимать, что иногда есть строгая последовательность шагов
по инициализации полей класса и есть поля которые нужно обязательно инициализировать, и вот тут уже видны преимущества паттерна Строитель.
Ответственность по инициализации полей возлагается на Строителя, а не на клиентский код.

***

# 8. Шаги

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

Шаги:

1. Создать пакет Java **steps** в папке **./src/test/java**.

![New Maven Project - steps](./_Files/2.%20New%20Project/8.%20Steps/01.jpg "New Project - steps")

В данном пакете будут находиться **.java** файлы с классами описывающими шаги.

***

# 9. Паттерн Фасад (Facade)

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

## 9.1. Класс StartPageSteps

***StartPageSteps*** - класс описывающий шаги по взаимодействию со страницей "Стартовая".

Шаги:

1. Создать файл **StartPageSteps.java** в **./src/test/java/steps**.

![New Maven Project - StartPageSteps.java](./_Files/2.%20New%20Project/9.%20Facade/01.jpg "New Project - StartPageSteps.java")

2. Добавить в файл **StartPageSteps.java** код.

* объявление логгера

```java
// Логгер
private static Logger logger = LogManager.getLogger(StartPageSteps.class);
```

* объявление ссылки на объект класса **StartPagePFPE** (Стартовая страница сайта DNS)

```java
// Ссылка на объект класса StartPagePFPE
// Стартовая страница сайта DNS
private StartPagePFPE startPage;
```

* конструктор

```java
// Конструктор
public StartPageSteps(WebDriver driver) {
    // ***** Стартовая страница сайта DNS *****
    startPage = new StartPagePFPE(driver);
    // Открыть сайт https://www.dns-shop.ru/
    startPage.openPage();
    logger.info("Открыта страница [Стартовая страница DNS]");
}
```

* метод **goToSmartphonesPage** - нажатие на ссылку "Смартфоны"

```java
// Переход на страницу "Смартфоны"
public void goToSmartphonesPage() {
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();
    logger.info("Страница [Стартовая страница DNS]: Переход на страницу \"Смартфоны\"");
}
```

## 9.2. Полный код StartPageSteps.java

[StartPageSteps.java](_Sample/src/test/java/steps/StartPageSteps.java)

## 9.3. Класс SmartphonesPageSteps

***SmartphonesPageSteps*** - класс описывающий шаги по взаимодействию со страницей "Смартфоны".

Шаги:

1. Создать файл **SmartphonesPageSteps.java** в **./src/test/java/steps**.

![New Maven Project - SmartphonesPageSteps.java](./_Files/2.%20New%20Project/9.%20Facade/02.jpg "New Project - SmartphonesPageSteps.java")

2. Добавить в файл **SmartphonesPageSteps.java** код.

* объявление логгера

```java
// Логгер
private static Logger logger = LogManager.getLogger(SmartphonesPageSteps.class);
```

* объявление ссылки на объект класса **SmartphonesPagePFPE**

```java
// Ссылка на объект класса SmartphonesPagePFPE
// Страница "Смартфоны"
private SmartphonesPagePFPE smartphonesPage;
```

* конструктор

```java
// Конструктор
public SmartphonesPageSteps(WebDriver driver) {
    // ***** Страница "Смартфоны" *****
    smartphonesPage = new SmartphonesPagePFPE(driver);
    logger.info("Открыта страница [Смартфоны]");
}
```

* метод **orderBy** - установка сортировки

```java
// Установка сортировки
public void orderBy(String type) {
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    logger.info("Страница [Смартфоны]: Установка сортировки <" + type + ">");
}
```

* метод **filterByCompany** - установка фильтра "Производитель"

```java
// Установка фильтра "Производитель"
public void filterByCompany(String company) {
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(company);
    logger.info("Страница [Смартфоны]: Установка фильтра \"Производитель\" - <" + company + ">");
}
```

* метод **filterByRAM** - установка фильтра "Объем оперативной памяти"

```java
// Установка фильтра "Объем оперативной памяти"
public void filterByRAM(String ram) {
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(ram + " Гб").setChecked(true);
    logger.info("Страница [Смартфоны]: Установка фильтра \"Объем оперативной памяти\" - <" + ram + ">");
}
```

* метод **applyFilters** - нажатие на кнопку "Применить"

```java
// Применение фильтров
public void applyFilters() {
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    logger.info("Страница [Смартфоны]: Применение фильтров");
}
```

* метод **clickLinkFirstProduct** - нажатие на ссылку первого продукта в списке

```java
// Переход на страницу первого продукта в списке
public void goToFirstProduct(String product) {
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();
    logger.info("Страница [Смартфоны]: Переход на страницу первого продукта в списке");
}
```

## 9.4. Полный код SmartphonesPageSteps.java

[SmartphonesPageSteps.java](_Sample/src/test/java/steps/SmartphonesPageSteps.java)

## 9.5. Класс SmartphoneProductPageSteps

***SmartphoneProductPageSteps*** - класс описывающий шаги по взаимодействию со страницей "Смартфоны".

Шаги:

1. Создать файл **SmartphoneProductPageSteps.java** в **./src/test/java/steps**.

![New Maven Project - SmartphoneProductPageSteps.java](./_Files/2.%20New%20Project/9.%20Facade/03.jpg "New Project - SmartphoneProductPageSteps.java")

2. Добавить в файл **SmartphoneProductPageSteps.java** код.

* объявление логгера

```java
// Логгер
private static Logger logger = LogManager.getLogger(SmartphoneProductPageSteps.class);
```

* объявление ссылки на объект класса **SmartphoneProductPage**

```java
// Ссылка на объект класса SmartphoneProductPage
// Страница "Продукт. Смартфон"
private SmartphoneProductPage smartphoneProductPage;
```

* конструктор

```java
// Конструктор
public SmartphoneProductPageSteps(SmartphoneProductPage smartphoneProductPage) {
    // ***** Страница "Продукт. Смартфон" *****
    this.smartphoneProductPage = smartphoneProductPage;
    logger.info("Открыта страница [Продукт. Смартфон]");
}
```

* метод **pageTitle** - получение заголовка текущей страницы

```java
// Получение заголовка текущей страницы
public String getPageTitle() {
    logger.info("Страница [Продукт. Смартфон]: Получение заголовка текущей страницы");
    return smartphoneProductPage.getPageTitle();
}
```

## 9.6. Полный код SmartphoneProductPageSteps.java

[SmartphoneProductPageSteps.java](_Sample/src/test/java/steps/SmartphoneProductPageSteps.java)

## 9.7. Класс SmartphoneProductPageMatcherFC

***SmartphoneProductPageMatcherFC*** - класс матчер.

Шаги:

1. Создать файл **SmartphoneProductPageMatcherFC.java** в **./src/test/java/tests/smartphones/matchers**.

![New Maven Project - SmartphoneProductPageMatcherFC.java](./_Files/2.%20New%20Project/9.%20Facade/04.jpg "New Project - SmartphoneProductPageMatcherFC.java")

2. Добавить в файл **SmartphoneProductPageMatcherFC.java** код.

* объявление ссылки на объект класса с описанием шагов на странице "Продукт. Смартфон"

```java
// Шаги на странице "Продукт. Смартфон"
SmartphoneProductPageSteps smartphoneProductPageSteps;
```

* конструктор

```java
// Конструктор
public SmartphoneProductPageMatcherFC(SmartphoneProductPageSteps smartphoneProductPageSteps) {
    this.smartphoneProductPageSteps = smartphoneProductPageSteps;
}
```

* метод **pageTitleEquals** - проверка (матчер) соответствия заголовка страницы

```java
// Проверка / Утверждение (Матчер)
public void pageTitleEquals(String expected) {
    String actual = smartphoneProductPageSteps.pageTitle();
    Assertions.assertEquals(expected, actual, "Ошибка! Заголовок страницы не соответствует ожидаемому!");
}
```

## 9.8. Полный код SmartphoneProductPageMatcherFC.java

[SmartphoneProductPageAssert.java](_Sample/src/test/java/tests/smartphones/matchers/SmartphoneProductPageMatcherFC.java)

## 9.9. Класс Pattern10FCTest

***Pattern10FCTest*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**.
с применением паттернов:

* **Page Object Model**
* **PageFactory**
* **Page Elements**
* **Arrange Act Assert**
* **Assert Objects / Matchers**
* **JavaBean**
* **ValueObject**
* **Builder**
* **Facade**

Класс **Pattern10FCTest** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **Pattern10FCTest.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - Pattern10FCTest.java](./_Files/2.%20New%20Project/9.%20Facade/05.jpg "New Project - Pattern10FCTest.java")

2. Наследоваться от класса **BaseTest**

```java
public class Pattern10FCTest extends BaseTest {
    
}
```

3. Добавить в файл **Pattern10FCTest.java** код.

* метод **dnsTest** - тест

Код метода из файла **Pattern9BLTest.java**.

```java
@Test
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    String model = "S22";          // модель
    int ram = 8;                // объем оперативной памяти
    int rom = 256;              // объем внутренней памяти

    SmartphoneBLBuilder builder = new SmartphoneBLBuilder(
        new Ram(ram),
        new Company(company))
        .setRom(rom)
        .setModel(model);
    SmartphoneBL smartphoneBL = builder.build(); // Создание объекта

    // 2. Act
    SmartphoneProductPagePFPE smartphoneProductPage = getProductPage(smartphoneBL);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherPFPE smartphoneProductPageMatcher = new SmartphoneProductPageMatcherPFPE(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

Код метода из файла **Pattern9BLTest.java**.

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPagePFPE getProductPage(SmartphoneBL smartphoneBL) {
    // ***** Стартовая страница сайта DNS *****
    StartPagePFPE startPage = new StartPagePFPE(driver);
    // Открыть страницу https://www.dns-shop.ru/
    startPage.openPage();
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgets().focusOnLink();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmarts().click();

    // ***** Страница "Смартфоны" *****
    SmartphonesPagePFPE smartphonesPage = new SmartphonesPagePFPE(driver);
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphoneBL.getCompany().getCompany()).setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphoneBL.getRam().getRam() + " Гб").setChecked(true);
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Нажатие на кнопку "Применить"
    smartphonesPage.buttonApply().click();
    // Прокрутка страницы вверх
    JavaScriptHelper.scrollBy(0, -2000);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProduct().openInNewWindow();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPagePFPE(driver);
}
```

4. Изменить код применив **Facade**

* метод **dnsTest** - тест

```java
@Test
// Проверка
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    String model = "S22";          // модель
    int ram = 8;                // объем оперативной памяти
    int rom = 256;              // объем внутренней памяти

    SmartphoneBLBuilder builder = new SmartphoneBLBuilder(
        new Ram(ram),
        new Company(company))
        .setRom(rom)
        .setModel(model);
    SmartphoneBL smartphoneBL = builder.build(); // Создание объекта

    // 2. Act
    SmartphoneProductPageSteps smartphoneProductPage = getProductPage(smartphoneBL);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherFC smartphoneProductPageMatcher = new SmartphoneProductPageMatcherFC(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPageSteps getProductPage(SmartphoneBL smartphoneBL) {
    // ***** Стартовая страница сайта DNS *****
    StartPageSteps startPage = new StartPageSteps(driver);
    // Переход на страницу "Смартфоны"
    startPage.goToSmartphonesPage();

    // ***** Страница "Смартфоны" *****
    SmartphonesPageSteps smartphonesPage = new SmartphonesPageSteps(driver);
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.orderBy(type);
    // Установка фильтра "Производитель"
    smartphonesPage.filterByCompany(smartphoneBL.getCompany().getCompany());
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.filterByRAM(smartphoneBL.getRam().getRam());
    // Применение фильтров
    smartphonesPage.applyFilters();
    // Переход на страницу первого продукта в списке
    smartphonesPage.goToFirstProduct();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPageSteps(driver);
}
```

## 9.10. Полный код Pattern10FCTest.java

[Pattern10FCTest.java](_Sample/src/test/java/tests/smartphones/Pattern10FCTest.java)

## 9.11. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=Pattern10FCTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/9.%20Facade/06.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/9.%20Facade/07.jpg "New Maven Project - Лог запуска")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/9.%20Facade/08.jpg "New Maven Project - Лог запуска")

## 9.12. Что изменилось и какая польза?

Шаги по выполнению тестовых кейсов вынесены в отдельные классы.
Данные классы реализуют паттерн Фасад (**Facade**).

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/9.%20Facade/09.jpg "New Maven Project - Лог запуска")

Какой профит получили?

1. Разделение бизнес логики и технических деталей

Классы-фасады скрывают технические подробности взаимодействия со страницей, оставляя бизнес логику.
В этот класс мы можем также перенести вывод логов из классов объектов-страниц.
Можно еще больше абстрагироваться создав метод по фильтрации внутри которого будут скрыты подробности выбора фильтров.

2. Переиспользование шагов

Все шаги можно повторно использовать в других кейсах не дублируя весь код с тех реализацией шагов.

***

# 10. Фабрика драйверов

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

С паттерном фабрика Вы уже знакомы. Давайте закрепим пройденный материал.

Шаги:

1. Создать пакет Java **drivers** в папке **./src/test/java**.

![New Maven Project - drivers](./_Files/2.%20New%20Project/10.%20Drivers/01.jpg "New Project - drivers")

В данном пакете будут находиться **.java** файлы с классами для создания инстансов **WebDriver**.

***

# 11. Паттерн Простая Фабрика (SimpleFactory)

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

## 11.1. Перечисление BrowserName

***BrowserName*** - перечисление для хранения имен браузеров,
которые будут передаваться в качестве параметров при запуске.

Шаги:

1. Создать файл **BrowserName.java** в **./src/test/java/drivers**.

При создании класса выбрать **Enum** (Перечисление).

![New Maven Project - BrowserName.java](./_Files/2.%20New%20Project/11.%20Factory/01.jpg "New Project - BrowserName.java")

2. Добавить в файл **BrowserName.java** код.

* константы, определяющие названия браузеров

```java
// Названия браузеров
CHROME("chrome"),   // Google Chrome
FIREFOX("firefox"), // Mozilla Firefox
EDGE("edge");       // Microsoft Edge
```

* переменная для хранения строкового значения константы

```java
private String browserName; // Имя браузера
```

* приватный конструктор

```java
// Приватный конструктор
private BrowserName(String browserName) {
    this.browserName = browserName;
}
```

* переопределенный метод **toString**

```java
// Переопределенный метод toString()
@Override
public String toString() {
    return String.valueOf(this.browserName);
}
```

* метод **fromString** - возврат константы по строковому значению константы

```java
// Возврат значения константы по строковому значению константы
public static BrowserName fromString(String browserName) {
    if (browserName != null) {
        for(BrowserName b : BrowserName.values()) {
            if (browserName.equalsIgnoreCase(b.browserName)) {
                return b;
            }
        }
    }
    return null;
}
```

* метод **getBrowserName** - получение имени браузера

```java
// Получение имени браузера
public String getBrowserName() {
    return this.browserName;
}
```

## 11.2. Полный код BrowserName.java

[BrowserName.java](_Sample/src/test/java/webdriverfactory/BrowserName.java)

## 11.3. Класс ChromeBrowser

***ChromeBrowser*** - класс для создания и настройки экземпляра веб драйвера **Goggle Chrome**.

Шаги:

1. Создать файл **ChromeBrowser.java** в **./src/test/java/drivers**.

![New Maven Project - ChromeBrowser.java](./_Files/2.%20New%20Project/11.%20Factory/02.jpg "New Project - ChromeBrowser.java")

2. Добавить в файл **ChromeBrowser.java** код.

* метод **getDriver** - получение экземпляра драйвера браузера **Google Chrome**

```java
// Получение экземпляра драйвера браузера "Google Chrome"
public static WebDriver getDriver() {
    // Настройка исполняемого файла драйвера
    WebDriverManager.chromedriver().setup();

    // Опции драйвера:
    ChromeOptions options = new ChromeOptions();
    // - прием небезопасных сертификатов = true
    options.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);
    // - стратегия загрузки страницы = NORMAL
    options.setCapability(CapabilityType.PAGE_LOAD_STRATEGY, PageLoadStrategy.NORMAL);
    // - режим "Инкогнито"
    options.addArguments("--incognito");
    // - режим "Полный экран"
    options.addArguments("--start-fullscreen");
    
    // Новый экземпляр драйвера
    return new ChromeDriver(options);
}
```

## 11.4. Полный код ChromeBrowser.java

[ChromeBrowser.java](_Sample/src/test/java/webdriverfactory/ChromeBrowser.java)

## 11.5. Класс FirefoxBrowser

***FirefoxBrowser*** - класс для создания и настройки экземпляра веб драйвера **Mozilla Firefox**.

Шаги:

1. Создать файл **FirefoxBrowser.java** в **./src/test/java/drivers**.

![New Maven Project - FirefoxBrowser.java](./_Files/2.%20New%20Project/11.%20Factory/03.jpg "New Project - FirefoxBrowser.java")

2. Добавить в файл **FirefoxBrowser.java** код.

* метод **getDriver** - получение экземпляра драйвера браузера **Mozilla Firefox**

```java
// Получение экземпляра драйвера браузера "Mozilla Firefox"
public static WebDriver getDriver() {
    // Настройка исполняемого файла драйвера
    WebDriverManager.firefoxdriver().setup();

    // Опции драйвера:
    FirefoxOptions options = new FirefoxOptions();
    // - прием небезопасных сертификатов = true
    options.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);
    // - стратегия загрузки страницы = NORMAL
    options.setCapability(CapabilityType.PAGE_LOAD_STRATEGY, PageLoadStrategy.NORMAL);
    // - режим "Инкогнито"
    options.addArguments("-private");
    // - режим "Полный экран"
    options.addArguments("-kiosk");

    // Новый экземпляр драйвера
    return new FirefoxDriver(options);
}
```

## 11.6. Полный код FirefoxBrowser.java

[FirefoxBrowser.java](_Sample/src/test/java/webdriverfactory/FirefoxBrowser.java)

## 11.7. Класс EdgeBrowser

***EdgeBrowser*** - класс для создания и настройки экземпляра веб драйвера **Microsoft Edge**.

Шаги:

1. Создать файл **EdgeBrowser.java** в **./src/test/java/drivers**.

![New Maven Project - EdgeBrowser.java](./_Files/2.%20New%20Project/11.%20Factory/04.jpg "New Project - EdgeBrowser.java")

2. Добавить в файл **EdgeBrowser.java** код.

* метод **getDriver** - получение экземпляра драйвера браузера **Microsoft Edge**

```java
// Получение экземпляра драйвера браузера "Microsoft Edge"
public static WebDriver getDriver() {
    // Настройка исполняемого файла драйвера
    WebDriverManager.edgedriver().setup();

    // Опции драйвера:
    EdgeOptions options = new EdgeOptions();
    // - прием небезопасных сертификатов = true
    options.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);
    // - стратегия загрузки страницы = NORMAL
    options.setCapability(CapabilityType.PAGE_LOAD_STRATEGY, PageLoadStrategy.NORMAL);
    // - режим "Инкогнито"
    options.addArguments("--incognito");
    // - режим "Полный экран"
    options.addArguments("--start-fullscreen");

    // Новый экземпляр драйвера
    return new EdgeDriver(options);
}
```

## 11.8. Полный код EdgeBrowser.java

[EdgeBrowser.java](_Sample/src/test/java/webdriverfactory/EdgeBrowser.java)

## 11.9. Класс WebDriverFactory

***WebDriverFactory*** - класс реализующий паттерн фабрика, фабрика по созданию экземпляров веб драйверов.

Шаги:

1. Создать файл **WebDriverFactory.java** в **./src/test/java/drivers**.

![New Maven Project - WebDriverFactory.java](./_Files/2.%20New%20Project/11.%20Factory/05.jpg "New Project - WebDriverFactory.java")

2. Добавить в файл **WebDriverFactory.java** код.

* объявление логгера

```java
// Логгер
private static Logger logger = LogManager.getLogger(WebDriverFactory.class);
```

* метод **getDriver** - получение экземпляра драйвера по имени

```java
// Получение экземпляра драйвера по имени
public static WebDriver getDriver(BrowserName name) {
    switch (name) {
        // Драйвер браузера Google Chrome
        case CHROME:
            logger.info("Драйвер браузера Google Chrome");
            return ChromeBrowser.getDriver();
        // Драйвер браузера Mozilla Firefox
        case FIREFOX:
            logger.info("Драйвер браузера Mozilla Firefox");
            return FirefoxBrowser.getDriver();
        // Драйвер браузера Microsoft Edge
        case EDGE:
            logger.info("Драйвер браузера Microsoft Edge");
            return EdgeBrowser.getDriver();
        // По умолчанию
        default:
            throw new RuntimeException("Некорректное наименование браузера");
    }
}
```

## 11.10. Полный код WebDriverFactory.java

[WebDriverFactory.java](_Sample/src/test/java/webdriverfactory/WebDriverFactory.java)

## 11.11. Класс BaseTestWF

***BaseTestWF*** - базовый класс с фабрикой драйверов для всех классов с тестами.
Содержит ссылку на экземпляр драйвера и общие для всех тестов методы, которые выполняются до и после каждого теста.

От данного класса наследуются все классы с тестами.

Шаги:

1. Создать файл **BaseTestWF.java** в **./src/test/java/tests**.

![New Maven Project - BaseTestWF.java](./_Files/2.%20New%20Project/11.%20Factory/06.jpg "New Project - BaseTestWF.java")

2. Добавить в файл **BaseTestWF.java** код.

* объявление драйвера

```java
// Драйвер браузера
protected static WebDriver driver;
```

* объявление логгера

```java
// Логгер
private Logger logger = LogManager.getLogger(BaseTestWF.class);
```

* **setUp** - действия перед каждым тестом (аннотация **@BeforeEach**)

```java
// Перед каждым тестом
@BeforeEach
public void setUp() {
    // Получаем параметр запуска тестов через Maven -Dbrowser
    String browser = System
        .getProperty("browser", "chrome")
        .toLowerCase();
    // Получаем экземпляр драйвера браузера
    driver = WebDriverFactory.getDriver(BrowserName.fromString(browser));
    logger.info("Драйвер стартовал!");
}
```

* **setDown** - действия после каждого теста (аннотация **@AfterEach**)

```java
// После каждого теста
@AfterEach
public void setDown() {
    // Если драйвер еще существует
    if(driver != null) {
        // Закрываем его
        driver.quit();
        logger.info("Драйвер остановлен!");
    }
}
```

## 11.12. Полный код BaseTestWF.java

[BaseTestWD.java](_Sample/src/test/java/tests/BaseTestWF.java)

## 11.13. Класс Pattern11WFTest

***Pattern11WFTest*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**.
с применением паттернов:

* **Page Object Model**
* **PageFactory**
* **Page Elements**
* **Arrange Act Assert**
* **Assert Objects / Matchers**
* **JavaBean**
* **ValueObject**
* **Builder**
* **Facade**
* **WebDriverFactory**

Класс **Pattern11WFTest** расширяет класс **BaseTestWF**.

Шаги:

1. Создать файл **Pattern11WFTest.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - Pattern11WFTest.java](./_Files/2.%20New%20Project/11.%20Factory/07.jpg "New Project - Pattern11WFTest.java")

2. Наследоваться от класса **BaseTestWF**

```java
public class Pattern11WFTest extends BaseTestWF {
    
}
```

3. Добавить в файл **Pattern11WFTest.java** код.

* метод **dnsTest** - тест

Код метода из файла **Pattern10FCTest.java**.

```java
@Test
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    String model = "S22";          // модель
    int ram = 8;                // объем оперативной памяти
    int rom = 256;              // объем внутренней памяти

    SmartphoneBLBuilder builder = new SmartphoneBLBuilder(
        new Ram(ram),
        new Company(company))
        .setRom(rom)
        .setModel(model);
    SmartphoneBL smartphoneBL = builder.build(); // Создание объекта

    // 2. Act
    SmartphoneProductPageSteps smartphoneProductPage = getProductPage(smartphoneBL);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherFC smartphoneProductPageMatcher = new SmartphoneProductPageMatcherFC(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

Код метода из файла **Pattern10FCTest.java**.

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPageSteps getProductPage(SmartphoneBL smartphoneBL) {
    // ***** Стартовая страница сайта DNS *****
    StartPageSteps startPage = new StartPageSteps(driver);
    // Переход на страницу "Смартфоны"
    startPage.goToSmartphonesPage();

    // ***** Страница "Смартфоны" *****
    SmartphonesPageSteps smartphonesPage = new SmartphonesPageSteps(driver);
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.orderBy(type);
    // Установка фильтра "Производитель"
    smartphonesPage.filterByCompany(smartphoneBL.getCompany().getCompany());
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.filterByRAM(smartphoneBL.getRam().getRam());
    // Применение фильтров
    smartphonesPage.applyFilters();
    // Переход на страницу первого продукта в списке
    smartphonesPage.goToFirstProduct();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPageSteps(driver);
}
```

4. Изменить код применив **WebDriverFactory**

* метод **dnsTest** - тест

```java
@Test
// Проверка
public void dnsTest() {
    // 1. Arrange
    String company = "Samsung"; // производитель
    String model = "S22";          // модель
    int ram = 8;                // объем оперативной памяти
    int rom = 256;              // объем внутренней памяти

    SmartphoneBLBuilder builder = new SmartphoneBLBuilder(
        new Ram(ram),
        new Company(company))
        .setRom(rom)
        .setModel(model);
    SmartphoneBL smartphoneBL = builder.build(); // Создание объекта

    // 2. Act
    SmartphoneProductPageSteps smartphoneProductPage = getProductPage(smartphoneBL);

    // 3. Assert
    // Проверка заголовка открытой страницы
    String expected = "Купить 6.8\" Смартфон Samsung Galaxy S22 Ultra 128 ГБ белый в интернет магазине DNS. Характеристики, цена Samsung Galaxy S22 Ultra | 4900422";
    SmartphoneProductPageMatcherFC smartphoneProductPageMatcher = new SmartphoneProductPageMatcherFC(smartphoneProductPage);
    smartphoneProductPageMatcher.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPageSteps getProductPage(SmartphoneBL smartphoneBL) {
    // ***** Стартовая страница сайта DNS *****
    StartPageSteps startPage = new StartPageSteps(driver);
    // Переход на страницу "Смартфоны"
    startPage.goToSmartphonesPage();

    // ***** Страница "Смартфоны" *****
    SmartphonesPageSteps smartphonesPage = new SmartphonesPageSteps(driver);
    // Установка сортировки "Сначала дорогие"
    String type = "Сначала дорогие";
    smartphonesPage.orderBy(type);
    // Установка фильтра "Производитель"
    smartphonesPage.filterByCompany(smartphoneBL.getCompany().getCompany());
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.filterByRAM(smartphoneBL.getRam().getRam());
    // Применение фильтров
    smartphonesPage.applyFilters();
    // Переход на страницу первого продукта в списке
    smartphonesPage.goToFirstProduct();

    // ***** Страница "Продукт. Смартфон" *****
    return new SmartphoneProductPageSteps(driver);
}
```

## 11.14. Полный код Pattern11WFTest.java

[Pattern11WFTest.java](_Sample/src/test/java/tests/smartphones/Pattern11WFTest.java)

## 11.15. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=Pattern11WFTest**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/11.%20Factory/08.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/11.%20Factory/09.jpg "New Maven Project - Запуск теста")

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/11.%20Factory/10.jpg "New Maven Project - Лог запуска")

## 11.16. Что изменилось и какая польза?

В класс фабрику **WebDriverFactory** была вынесена логика по инициализации и настройке драйверов браузера.
В классе **BaseTestWD** поменяв всего один параметр можно запустить тесты на другом драйвере браузера.

***

# 12. Что еще можно сделать?

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

Можно доработать фабрику драйверов применив паттерн **Flyweight**.
Аналогично можно создать фабрику страниц с использованием паттернов **Simple Factory**, **Flyweight**.
Можно переписать часть кода в **Fluent** стиле, чтобы можно было строить цепочку вызовов методов.

***

[![Лекция](https://img.shields.io/badge/-Лекция-ee99ff)](1.%20Лекция.md)
[![Главная](https://img.shields.io/badge/-Главная-aaccee)](README.md)
[![Задание](https://img.shields.io/badge/-Задание-99ffee)](3.%20Задание.md)