Java_QA / Level 2. Medium - Продвинутые темы / Урок 03. Подходы в разработке автотестов

[![Назад](https://img.shields.io/badge/-%D0%9D%D0%B0%D0%B7%D0%B0%D0%B4-brightgreen)](1.%20Лекция.md)
[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](3.%20Задание.md)

***

# 1. Создание и настройка нового проекта

## 1.1. Файл POM

### 1.1.1. Раздел \<properties\>

Шаги:

1. Создать новый проект **Maven** в **IntelliJ IDEA**.

2. Открыть файл **POM.xml**.

3. Добавить в раздел **\<properties\>**:

```xml
<!-- Параметры -->
<properties>
    Добавлять вот сюда
</properties>
```

* кодировку проекта - **UTF-8**

```xml
<!-- Кодировка проекта - UTF-8 -->
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
```

* версию Java - **15** или на ваше усмотрение

```xml
<!-- Версия Java - 15 -->
<source>15</source>
<target>15</target>
```

* версии библиотек (**dependencies**)

```xml
<!-- Версии зависимостей: -->
<!-- Cucumber -->
<cucumber>6.10.4</cucumber>
<!-- JUnit -->
<junit-jupiter-engine>5.1.0</junit-jupiter-engine>
<!-- Selenium WebDriver -->
<selenium-java>4.0.0-beta-4</selenium-java>
<!-- WebDriver Manager -->
<webdrivermanager>4.2.2</webdrivermanager>
<!-- Log4J -->
<log4j-api>2.14.0</log4j-api>
<log4j-core>2.14.0</log4j-core>
<!-- aShot -->
<ashot>1.5.4</ashot>
```

* версии плагинов (**plugins**)

```xml
<!-- Версии плагинов: -->
<!-- maven-surefire-plugin -->
<maven-surefire-plugin>2.22.2</maven-surefire-plugin>
<!-- maven-compiler-plugin -->
<maven-compiler-plugin>3.8.1</maven-compiler-plugin>
```

### 1.1.2. Раздел \<dependencies\>

Шаги:

1. Открыть файл **POM.xml**.

2. Добавить в раздел **\<dependencies\>**:

```xml
<!-- Зависимости -->
<dependencies>
    Добавлять вот сюда
</dependencies>
```  

* BDD фреймворк **Cucumber**

```xml
<!-- Cucumber -->
<dependency>
    <groupId>io.cucumber</groupId>
    <artifactId>cucumber-java</artifactId>
    <version>${cucumber}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>io.cucumber</groupId>
    <artifactId>cucumber-junit</artifactId>
    <version>${cucumber}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>io.cucumber</groupId>
    <artifactId>cucumber-junit-platform-engine</artifactId>
    <version>${cucumber}</version>
    <scope>test</scope>
</dependency>
```
* фреймворк тестирования **JUnit**

```xml
<!-- JUnit -->
<dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter-engine</artifactId>
    <version>${junit-jupiter-engine}</version>
    <scope>test</scope>
</dependency>
```    

* драйвер браузера **Selenium WebDriver**

```xml
<!-- Selenium WebDriver -->
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>${selenium-java}</version>
    <scope>test</scope>
</dependency>
```

* менеджер драйверов **WebDriver Manager**

```xml
    <!-- WebDriver Manager -->
    <dependency>
        <groupId>io.github.bonigarcia</groupId>
        <artifactId>webdrivermanager</artifactId>
        <version>${webdrivermanager}</version>
        <scope>test</scope>
    </dependency>
```

* логгер **Log4J**

```xml
    <!-- Log4J -->
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-api</artifactId>
        <version>${log4j-api}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-core</artifactId>
        <version>${log4j-core}</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

* скриншотер **aShot**

```xml
    <!-- aShot -->
    <dependency>
        <groupId>ru.yandex.qatools.ashot</groupId>
        <artifactId>ashot</artifactId>
        <version>${ashot}</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

### 1.1.3. Раздел \<build\>\<plugins\>

Шаги:

1. Открыть файл **POM.xml**.

2. Добавить в раздел **\<build\>\<plugins\>**:

```xml
<!-- Сборка -->
<build>
    <!-- Плагины -->
    <plugins>
        Добавлять сюда
    </plugins>
</build>
```

* плагин для запуска автотестов **maven-surefire-plugin**

```xml
<!-- maven-surefire-plugin -->
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-surefire-plugin</artifactId>
<version>${maven-surefire-plugin}</version>
</plugin>
```

* плагин для компиляции **Java** программ **maven-compiler-plugin**

```xml
<!-- maven-compiler-plugin -->
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<version>${maven-compiler-plugin}</version>
<configuration>
    <source>${source}</source>
    <target>${target}</target>
</configuration>
</plugin>
```

## 1.2. Полный код POM.xml

[POM.xml](_Sample_01/pom.xml)

## 1.3. Файл .gitignore

Шаги:

1. Создать файл **.gitignore** в корне проекта.

2. Настроить файл.

Использовать онлайн генератор [gitignore.io](https://docs.gitignore.io/).

В репозитории **GitHub** не должно быть:

* файлов *IntelliJ IDEA*
* файлов *VS Code*
* файлов компиляции *Java*

## 1.4. Файл log4j2.xml

Шаги:

1. Создать конфиг файл для логгирования **log4j2.xml** в **./src/main/resources**.

![New Maven Project - log4j2.xml](./_Files/2.%20New%20Project/01.jpg "New Project - log4j2.xml")

2. Настроить конфиг файл **log4j2.xml**.

```xml
<Configuration monitorInterval="30">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="%highlight{[%d{HH:mm:ss.SSS}] | %-5p | %-32.42t | %-32.42c{1} | %m%n}{FATAL=red blink, ERROR=red blink, WARN=yellow bold, INFO=black, DEBUG=green bold, TRACE=blue}"/>
        </Console>
        <File name="MyFile" fileName="logs.log">
            <PatternLayout>
                <Pattern>%d %p %c{1.} [%t] %m%n</Pattern>
            </PatternLayout>
        </File>
    </Appenders>
    <Loggers>
        <Root level="info">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="MyFile"/>
        </Root>
    </Loggers>
</Configuration>
```

## 1.5. Полный код log4j2.xml

[log4j2.xml](_Sample_01/src/main/resources/log4j2.xml))

## 1.6. Коммит и пуш проекта

Шаги:

1. Проверить, что шаги с **1.1.** по **1.3.** выполнены.

2. Закоммитить и запушить проект в удаленный репозиторий (**GitHub**).

***

***

Задание [![Перейти](https://img.shields.io/badge/-%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8-blue)](3.%20Задание.md)