Java_QA / Level 2. Medium - Продвинутые темы / Урок 02. Паттерны проектирования. PageFactory

[![Назад](https://img.shields.io/badge/-%D0%9D%D0%B0%D0%B7%D0%B0%D0%B4-brightgreen)](1.%20Лекция.md)
[![Содержание](https://img.shields.io/badge/-%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-purple)](README.md)
[![Вперед](https://img.shields.io/badge/-%D0%92%D0%BF%D0%B5%D1%80%D0%B5%D0%B4-brightgreen)](3.%20Задание.md)

***

# 1. Открытие предыдущего проекта

Шаги:

1. Запустить **IntelliJ IDEA**.

2. Открыть проект прошлого урока в **IntelliJ IDEA**.

![New Maven Project - Open...](./_Files/2.%20New%20Project/01.jpg "New Maven Project - Open...")

***

# 2. Простые классы 

## 2.1. Простой Java Объект (Plain Old Java Object (POJO))

### 2.1.1. Класс SmartphonePOJO

***SmartphonePOJO*** - класс представляющий смартфон, созданный с применением **POJO**.

Шаги:

1. Создать пакет Java **models** в папке **./src/test/java**.

![New Maven Project - models](./_Files/2.%20New%20Project/02.jpg "New Project - models")

2. Создать файл **SmartphonePOJO.java** в **./src/test/java/models**.

![New Maven Project - SmartphonePOJO.java](./_Files/2.%20New%20Project/03.jpg "New Project - SmartphonePOJO.java")

3. Добавить в файл **SmartphonePOJO.java** код.

* объявление полей класса

```java
// Оперативная память
public int ram;
// Компания
public String company;
```

* конструктор класса

```java
// Конструктор
public SmartphonePOJO(int ram, String company) {
    this.ram = ram;
    this.company = company;
}
```

### 2.1.2. Класс SmartphonesProductPage5_Test

***SmartphonesProductPage5_Test*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**.

Класс **SmartphonesProductPage5_Test** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **SmartphonesProductPage5_Test.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - SmartphonesProductPage5_Test.java](./_Files/2.%20New%20Project/04.jpg "New Project - SmartphonesProductPage5_Test.java")

2. Добавить в файл **SmartphonesProductPage5_Test.java** код.

* метод **selectedProduct_Is_SamsungGalaxyNote20Ultra256GBWhite** - тест

```java
@Test
// Проверка
public void selectedProduct_Is_SamsungGalaxyNote20Ultra256GBWhite() {
    // 1. Arrange
    SmartphonePOJO smartphonePOJO = new SmartphonePOJO( 8, "Samsung");
    // String product = "Samsung"; // производитель
    // String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPage smartphoneProductPage = getProductPage(smartphonePOJO);

    // 3. Assert
    String expected = "Купить 6.7\" Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый в интернет магазине DNS. Характеристики, цена Samsung Galaxy Z Flip3 | 4845670";
    SmartphoneProductPageAssert smartphoneProductAssert = new SmartphoneProductPageAssert(smartphoneProductPage);
    smartphoneProductAssert.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPage getProductPage(SmartphonePOJO smartphonePOJO) {
    // Открыть страницу https://www.dns-shop.ru/
    driver.get("https://www.dns-shop.ru/");
    // ***** Стартовая страница сайта DNS *****
    StartPageWithElements startPage = new StartPageWithElements(driver);
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgetsMove();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmartsClick();

    // ***** Страница "Смартфоны" *****
    SmartphonesPageWithElements smartphonesPage = new SmartphonesPageWithElements(driver);
    // Нажатие на выпадашку "Сортировка"
    smartphonesPage.accordeonSortClick();
    // Установка сортировки "Сначала дорогие"
    smartphonesPage.rbtnExpensiveClick();
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Установка фильтра "Производитель"
    smartphonesPage.chbxCompanyClick(smartphonePOJO.company);
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Нажатие на гармошку "Объем оперативной памяти"
    smartphonesPage.accordeonRAMClick();
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.chbxRAMClick(smartphonePOJO.ram + " Гб");
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Нажатие на кнопку "Применить"
    smartphonesPage.btnApplyClick();
    // Прокрутка страницы вверх
    JSExec.scrollBy(0, -500);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProductClick("Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый");
    //smartphonesPage.linkFirstProductClick("Смартфон Samsung Galaxy S20 FE 128 ГБ белый");
    return new SmartphoneProductPage(driver);
}
```

### 2.1.3. Полный код SmartphonesProductPage5_Test.java

[SmartphonesProductPage5_Test.java](_Sample_02/src/test/java/tests/smartphones/SmartphonesProductPage5_Test.java)

### 2.1.4. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=SmartphonesProductPage5_Test**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/05.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/06.jpg "New Maven Project - Лог запуска")

### 2.1.5. Что изменилось и какая польза?

Теперь вместо двух переменных примитивных типов используется объект класса **SmartphonePOJO** созданный с применением **POJO**.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/07.jpg "New Maven Project - Что изменилось и какая польза?")

Представьте, что в метод **getProductPage** нужно передать не 2 параметра, а 2 - 10 (заполнить от 2 до 10 разных фильтров).
Тогда нужно будет создавать новые методы и копировать логику по заполнению полей фильтров в них. 
В итоге у нас будет:

* куча дублированного кода по заполнению полей фильтров
* множество параметров с одинаковыми типами, в которых легко запутаться
* анти-паттерн **Телескопический метод** (когда в параметрах более двух аргументов)

Добавление класса **SmartphonePOJO** решает данные проблемы.

## 2.2. Паттерн Java Боб (JavaBean)

### 2.2.1. Класс SmartphoneJB

***SmartphoneJB*** - класс представляющий смартфон, созданный с применением **JavaBeans**.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **SmartphoneJB.java** в **./src/test/java/models**.

![New Maven Project - SmartphoneJB.java](./_Files/2.%20New%20Project/08.jpg "New Project - SmartphoneJB.java")

2. Добавить в файл **SmartphoneJB.java** код.

* объявление полей класса

```java
// Оперативная память
private int ram;
// Компания
private String company;
```

* конструктор класса по умолчанию

```java
 // Конструктор по умолчанию
public SmartphoneJB() {

}
```

* конструктор класса

```java
// Конструктор
public SmartphonePOJO(int ram, String company) {
    this.ram = ram;
    this.company = company;
}
```

* cеттеры и геттеры

```java
// Сеттеры и геттеры
// Оперативная память
public void setRam(int ram) {
    this.ram = ram;
}

public int getRam() {
    return this.ram;
}
// Компания
public void setCompany(String company) {
    this.company = company;
}

public String getCompany() {
    return this.company;
}
```

### 2.2.2. Класс SmartphonesProductPage6_Test

***SmartphonesProductPage6_Test*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**.

Класс **SmartphonesProductPage6_Test** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **SmartphonesProductPage6_Test.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - SmartphonesProductPage6_Test.java](./_Files/2.%20New%20Project/09.jpg "New Project - SmartphonesProductPage6_Test.java")

2. Добавить в файл **SmartphonesProductPage6_Test.java** код.

* метод **selectedProduct_Is_SamsungGalaxyNote20Ultra256GBWhite** - тест

```java
@Test
// Проверка
public void selectedProduct_Is_SamsungGalaxyNote20Ultra256GBWhite() {
    // 1. Arrange
    SmartphoneJB smartphoneJB = new SmartphoneJB( 8, "Samsung");
    // String product = "Samsung"; // производитель
    // String ram = "8 Гб"; // объем ОП

    // 2. Act
    SmartphoneProductPage smartphoneProductPage = getProductPage(smartphonePOJO);

    // 3. Assert
    String expected = "Купить 6.7\" Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый в интернет магазине DNS. Характеристики, цена Samsung Galaxy Z Flip3 | 4845670";
    SmartphoneProductPageAssert smartphoneProductAssert = new SmartphoneProductPageAssert(smartphoneProductPage);
    smartphoneProductAssert.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPage getProductPage(SmartphoneJB smartphoneJB) {
    // Открыть страницу https://www.dns-shop.ru/
    driver.get("https://www.dns-shop.ru/");
    // ***** Стартовая страница сайта DNS *****
    StartPageWithElements startPage = new StartPageWithElements(driver);
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgetsMove();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmartsClick();

    // ***** Страница "Смартфоны" *****
    SmartphonesPageWithElements smartphonesPage = new SmartphonesPageWithElements(driver);
    // Нажатие на выпадашку "Сортировка"
    smartphonesPage.accordeonSortClick();
    // Установка сортировки "Сначала дорогие"
    smartphonesPage.rbtnExpensiveClick();
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Установка фильтра "Производитель"
    smartphonesPage.chbxCompanyClick(smartphoneJB.getCompany());
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Нажатие на гармошку "Объем оперативной памяти"
    smartphonesPage.accordeonRAMClick();
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.chbxRAMClick(smartphoneJB.getRam() + " Гб");
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Нажатие на кнопку "Применить"
    smartphonesPage.btnApplyClick();
    // Прокрутка страницы вверх
    JSExec.scrollBy(0, -500);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProductClick("Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый");
    //smartphonesPage.linkFirstProductClick("Смартфон Samsung Galaxy S20 FE 128 ГБ белый");
    return new SmartphoneProductPage(driver);
}
```

### 2.2.3. Полный код SmartphonesProductPage6_Test.java

[SmartphonesProductPage6_Test.java](_Sample_02/src/test/java/tests/smartphones/SmartphonesProductPage6_Test.java)

### 2.2.4. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=SmartphonesProductPage6_Test**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/10.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/11.jpg "New Maven Project - Лог запуска")

### 2.2.5. Что изменилось и какая польза?

Теперь вместо объекта класса **SmartphonePOJO** используется объект класса **SmartphoneJB** созданный с использованием **JavaBeans**.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/12.jpg "New Maven Project - Что изменилось и какая польза?")

Допустим в тестах нужно будет выполнить серию проверок с разными тестовыми данными.
К примеру, у вас есть параметризованный тест с 20 комбинациями входных данных.
Тогда придется хранить тестовые данные в коде в виде списка или массива объектов.
Можно написать метод, который будет отдавать список или массив с этими данными.
А что если будет множество проверок на множестве тестовых данных?
Вероятно, со временем вам захочется хранить тестовые данные отдельно от самих тестов (**DDT (Data Driven Testing)**)
в виде файлов **XLS**, **JSON**, **CSV**, **XML** либо в другом формате (база данных например).

Для работы библиотек преобразователей объектов в форматы **XLS**, **JSON**, **CSV**, **XML** и др, классы **Java** 
должны следовать определенным правилам и соглашениям - геттеры, сеттеры, пустой конструктор. 
Это как раз и прописано в **JavaBeans**.

Написание класса **SmartphoneJB** позволяет хранить тестовые данные вне кода тестов в виде **JSON**, **CSV** файлов.

Класс **SmartphoneJB** следует соглашениям **JavaBeans**, что дает множество преимуществ:

* использование инструментов для работы с объектами **Java**
* подключение к источникам данных
* внедрение зависимостей / инверсия управления

## 2.3. Паттерн Объект Значение (Value Object (VO))

### 2.3.1. Класс Ram

***Ram*** - класс представляющий объект-значение ОП.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать пакет Java **valueobjects** в папке **./src/test/java/models**.

![New Maven Project - valueobjects](./_Files/2.%20New%20Project/13.jpg "New Project - valueobjects")

2. Создать файл **Ram.java** в **./src/test/java/models/valueobjects**.

![New Maven Project - Ram.java](./_Files/2.%20New%20Project/14.jpg "New Project - Ram.java")

3. Добавить в файл **Ram.java** код.

* объявление полей класса

```java
// ОП
private int ram;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public Ram() {

}
```

* конструктор класса с проверкой

```java
// Конструктор с проверкой
public Ram(int ram) {
    // Если задано значение меньше 0, то выбросить исключение
    if (ram > 0)
        this.ram = ram;
    else
        throw new IllegalArgumentException("ОП не может быть меньше 0");
}
```

* геттеры

```java
// Геттер
public int getRam() {
    return this.ram;
}
```

* переопределенный метод сравнения

```java
// Переопределенный метод сравнения
public boolean equals(Ram otherRam) {
    return this.ram == otherRam.ram;
}
```


### 2.3.2. Класс Company

***Company*** - класс представляющий объект-значение Производитель.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **Company.java** в **./src/test/java/models/valueobjects**.

![New Maven Project - Company.java](./_Files/2.%20New%20Project/15.jpg "New Project - Company.java")

2. Добавить в файл **Company.java** код.

* объявление полей класса

```java
// Производитель
private String company;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public Company() {

}
```

* конструктор класса с проверкой

```java
// Конструктор с проверкой
public Company(String company) {
    if (!company.isBlank() || !company.isEmpty())
        this.company = company;
    else
        throw new IllegalArgumentException("Наименование производителя не может быть пустым!");
}
```

* геттеры

```java
// Геттер
public String getCompany() {
    return this.company;
}
```

* переопределенный метод сравнения

```java
// Переопределенный метод сравнения
public boolean equals(Company otherCompany) {
    return this.company.equals(otherCompany.company);
}
```

### 2.3.3. Класс SmartphoneVO

***SmartphoneVO*** - класс представляющий смартфон, созданный с применением **JavaBeans** и **ValueObject**.

Данный класс реализует интерфейс **java.io.Serializable**.

Шаги:

1. Создать файл **SmartphoneVO.java** в **./src/test/java/models**.

![New Maven Project - SmartphoneVO.java](./_Files/2.%20New%20Project/16.jpg "New Project - SmartphoneVO.java")

2. Добавить в файл **SmartphoneVO.java** код.

* объявление полей класса

```java
// Оперативная память
private Ram ram;
// Компания
private Company company;
```

* конструктор класса по умолчанию

```java
// Конструктор по умолчанию
public SmartphoneVO() {

}
```

* конструктор класса

```java
// Конструктор
public SmartphoneVO(Ram ram, Company company) {
    this.ram = ram;
    this.company = company;
}
```

* cеттеры и геттеры

```java
// Сеттеры и геттеры
// Оперативная память
public void setRam(Ram ram) {
    this.ram = ram;
}

public Ram getRam() {
    return this.ram;
}
// Компания
public void setCompany(Company company) {
    this.company = company;
}

public Company getCompany() {
    return this.company;
}
```


### 2.3.4. Класс SmartphonesProductPage7_Test

***SmartphonesProductPage7_Test*** - класс содержащий тесты с проверками страницы **Продукт. Смартфон**.

Класс **SmartphonesProductPage7_Test** расширяет класс **BaseTest**.

Шаги:

1. Создать файл **SmartphonesProductPage7_Test.java** в **./src/test/java/tests/smartphones**.

![New Maven Project - SmartphonesProductPage7_Test.java](./_Files/2.%20New%20Project/17.jpg "New Project - SmartphonesProductPage7_Test.java")

2. Добавить в файл **SmartphonesProductPage7_Test.java** код.

* метод **selectedProduct_Is_SamsungGalaxyNote20Ultra256GBWhite** - тест

```java
@Test
// Проверка
public void selectedProduct_Is_SamsungGalaxyNote20Ultra256GBWhite() {
    // 1. Arrange
    String product = "Samsung"; // производитель
    int ram = 8; // объем ОП
    SmartphoneVO smartphoneVO = new SmartphoneVO(
        new Ram(ram),
        new Company(product)
    );

    // 2. Act
    SmartphoneProductPage smartphoneProductPage = getProductPage(smartphoneVO);

    // 3. Assert
    String expected = "Купить 6.7\" Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый в интернет магазине DNS. Характеристики, цена Samsung Galaxy Z Flip3 | 4845670";
    SmartphoneProductPageAssert smartphoneProductAssert = new SmartphoneProductPageAssert(smartphoneProductPage);
    smartphoneProductAssert.pageTitleEquals(expected);
}
```

* метод **getProductPage** - получение страницы с продуктом

```java
// Получение заголовка страницы с продуктом
public SmartphoneProductPage getProductPage(SmartphoneVO smartphoneVO) {
    // Открыть страницу https://www.dns-shop.ru/
    driver.get("https://www.dns-shop.ru/");
    // ***** Стартовая страница сайта DNS *****
    StartPageWithElements startPage = new StartPageWithElements(driver);
    // Наведение курсора мыши на ссылку "Смартфоны и гаджеты"
    startPage.linkSmartsAndGadgetsMove();
    // Нажатие на ссылку "Смартфоны"
    startPage.linkSmartsClick();

    // ***** Страница "Смартфоны" *****
    SmartphonesPageWithElements smartphonesPage = new SmartphonesPageWithElements(driver);
    // Нажатие на выпадашку "Сортировка"
    smartphonesPage.accordeonSortClick();
    // Установка сортировки "Сначала дорогие"
    smartphonesPage.rbtnExpensiveClick();
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Установка фильтра "Производитель"
    smartphonesPage.chbxCompanyClick(smartphoneVO.getCompany().getCompany());
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Нажатие на гармошку "Объем оперативной памяти"
    smartphonesPage.accordeonRAMClick();
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.chbxRAMClick(smartphoneVO.getRam().getRam() + " Гб");
    // Прокрутка страницы вниз
    JSExec.scrollBy(0, 300);
    // Нажатие на кнопку "Применить"
    smartphonesPage.btnApplyClick();
    // Прокрутка страницы вверх
    JSExec.scrollBy(0, -500);
    // Нажатие на ссылку первого продукта в списке
    smartphonesPage.linkFirstProductClick("Смартфон Samsung Galaxy Z Flip3 256 ГБ бежевый");
    //smartphonesPage.linkFirstProductClick("Смартфон Samsung Galaxy S20 FE 128 ГБ белый");
    return new SmartphoneProductPage(driver);
}
```

### 2.3.5. Полный код SmartphonesProductPage7_Test.java

[SmartphonesProductPage7_Test.java](_Sample_02/src/test/java/tests/smartphones/SmartphonesProductPage7_Test.java)

### 2.3.6. Запуск автотеста

Шаги:

1. Запустить тест командой **mvn clean test** с параметром **-Dtest=SmartphonesProductPage7_Test**.

![New Maven Project - Запуск теста](./_Files/2.%20New%20Project/18.jpg "New Maven Project - Запуск теста")

2. Готово!

В результате будет выполнен тест.

В консоли будет выведен лог запуска.

![New Maven Project - Лог запуска](./_Files/2.%20New%20Project/19.jpg "New Maven Project - Лог запуска")

### 2.3.7. Что изменилось и какая польза?

Теперь вместо объекта класса **SmartphoneJB** используется объект класса **SmartphoneVO**.
В классе **SmartphoneVO** вместо примитивных типов используются объекты значения (**Value Object (VO)**) - 
классы **Ram** и **Company**.

![New Maven Project - Что изменилось и какая польза?](./_Files/2.%20New%20Project/20.jpg "New Maven Project - Что изменилось и какая польза?")

Использование примитивных типов имеет несколько минусов:

* отсутствие проверки входного значения

Например, в фильтре ОП есть конкретные значения - 1, 2, 3, 4, 6, 8 и т д.
То есть нет смысла пытаться задать фильтр 5 или 7 Гб, а уж тем более -10 Гб.
Автотест просто не выполниться - **Selenium WebDriver** не найдет такого фильтра на странице.
Аналогично и для наименования производителя - не может быть наименования без букв.
Такие проверки не относятся к тестовым сценариям поиска и выбора смартфона.

* смешивание параметров

Кроме фильтра ОП есть фильтр Встроенной памяти.
Если задать эти параметры примитивными типами данных, то есть вероятность их перепутать.
Когда два таких параметра то еще ничего страшного не случится.
А если их станет намного больше двух?

* дублирование кода проверок

А теперь допустим у нас много тест кейсов, где нужно задавать много фильтров.
С примитивными типами данных нам придется везде копипастить проверки входных данных.

Создав отдельные классы объекты значения **Ram** и **Company** можно решить выше указанные проблемы.

***

# 3. Порождающие паттерны

## 3.1. Паттерн Простая Фабрика (SimpleFactory)

### 3.1.1. Фабрика веб драйверов (WebDriverFactory)

С паттерном фабрика Вы уже знакомы. Давайте закрепим пройденный материал.

#### 3.1.1.1. Перечисление BrowserName

***BrowserName*** - перечисление для хранения имен браузеров,
которые будут передаваться в качестве параметров при запуске.

Шаги:

1. Создать пакет Java **webdriverfactory** в папке **./src/test/java**.

![New Maven Project - webdriverfactory](./_Files/2.%20New%20Project/02.jpg "New Project - webdriverfactory")

2. Создать файл **BrowserName.java** в **./src/test/java/webdriverfactory**.

При создании класса выбрать **Enum** (Перечисление).

![New Maven Project - BrowserName.java](./_Files/2.%20New%20Project/03.jpg "New Project - BrowserName.java")

3. Добавить в файл **BrowserName.java** код.

* константы, определяющие названия браузеров

```java
// Имена браузеров
CHROME("chrome"),   // Google Chrome
FIREFOX("firefox"), // Mozilla Firefox
EDGE("edge");       // Microsoft Edge
```

* переменная для хранения строкового значения константы

```java
private String browserName; // Имя браузера
```

* приватный конструктор

```java
// Приватный конструктор
private BrowserName(String browserName) {
    this.browserName = browserName;
}
```

* переопределенный метод **toString**

```java
// Переопределенный метод toString()
@Override
public String toString() {
    return String.valueOf(this.browserName);
}
```

* метод **fromString** - возврат значения константы по строковому значению константы

```java
// Возврат значения константы по строковому значению константы
public static BrowserName fromString(String browserName) {
    if (browserName != null) {
        for(Browser b : Browser.values()) {
            if (browserName.equalsIgnoreCase(b.browserName)) {
                return b;
            }
        }
    }
    return null;
}
```

* метод **getBrowserName** - получение имени браузера

```java
// Получение имени браузера
public String getBrowserName() {
    return this.browserName;
}
```

#### 3.1.1.2. Полный код BrowserName.java

[BrowserName.java]()

#### 3.1.1.3. Класс ChromeBrowser

***ChromeBrowser*** - класс для создания и настройки экземпляра веб драйвера **Goggle Chrome**.

Шаги:

1. Создать файл **ChromeBrowser.java** в **./src/test/java/webdriverfactory**.

![New Maven Project - ChromeBrowser.java](./_Files/2.%20New%20Project/04.jpg "New Project - ChromeBrowser.java")

2. Добавить в файл **ChromeBrowser.java** код.

* метод **getDriver** - получение экземпляра драйвера браузера **Google Chrome**

```java
// Получение экземпляра драйвера браузера "Google Chrome"
public WebDriver getDriver() {
    // Настройка исполняемого файла драйвера
    WebDriverManager.chromedriver().setup();
    
    // Опции драйвера:
    ChromeOptions options = new ChromeOptions();
    // - поведение при появлении алертов "Игнорирование"
    options.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, UnexpectedAlertBehaviour.IGNORE);
    // - стратегия загрузки страницы "NORMAL"
    options.setCapability(CapabilityType.PAGE_LOAD_STRATEGY, PageLoadStrategy.NORMAL);
    // - режим "Инкогнито"
    options.addArguments("--incognito");
    // - режим "Полный экран"
    options.addArguments("--start-fullscreen");
    
    // Новый экземпляр драйвера
    return new ChromeDriver(options);
}
```

#### 3.1.1.4. Полный код ChromeBrowser.java

[ChromeBrowser.java]()

#### 3.1.1.5. Класс FirefoxBrowser

***FirefoxBrowser*** - класс для создания и настройки экземпляра веб драйвера **Mozilla Firefox**.

Шаги:

1. Создать файл **FirefoxBrowser.java** в **./src/test/java/webdriverfactory**.

![New Maven Project - FirefoxBrowser.java](./_Files/2.%20New%20Project/05.jpg "New Project - FirefoxBrowser.java")

2. Добавить в файл **FirefoxBrowser.java** код.

* метод **getDriver** - получение экземпляра драйвера браузера **Mozilla Firefox**

```java
// Получение экземпляра драйвера браузера "Mozilla Firefox"
public static WebDriver getDriver() {
    // Настройка исполняемого файла драйвера
    WebDriverManager.firefoxdriver().setup();
    
    // Опции драйвера:
    FirefoxOptions options = new FirefoxOptions();
    // - поведение при появлении алертов "Игнорирование"
    options.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, UnexpectedAlertBehaviour.IGNORE);
    // - стратегия загрузки страницы "NORMAL"
    options.setCapability(CapabilityType.PAGE_LOAD_STRATEGY, PageLoadStrategy.NORMAL);
    // - режим "Инкогнито"
    options.addArguments("-private");
    // - режим "Полный экран"
    options.addArguments("-kiosk");
    
    // Новый экземпляр драйвера
    return new FirefoxDriver(options);
}
```

#### 3.1.1.6. Полный код FirefoxBrowser.java

[FirefoxBrowser.java]()

#### 3.1.1.7. Класс EdgeBrowser

***EdgeBrowser*** - класс для создания и настройки экземпляра веб драйвера **Microsoft Edge**.

Шаги:

1. Создать файл **EdgeBrowser.java** в **./src/test/java/webdriverfactory**.

![New Maven Project - EdgeBrowser.java](./_Files/2.%20New%20Project/06.jpg "New Project - EdgeBrowser.java")

2. Добавить в файл **EdgeBrowser.java** код.

* метод **getDriver** - получение экземпляра драйвера браузера **Microsoft Edge**

```java
// Получение экземпляра драйвера браузера "Microsoft Edge"
public static WebDriver getDriver() {
    // Настройка исполняемого файла драйвера
    WebDriverManager.edgedriver().setup();
    
    // Опции драйвера:
    EdgeOptions options = new EdgeOptions();
    // - поведение при появлении алертов "Игнорирование"
    options.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, UnexpectedAlertBehaviour.IGNORE);
    // - стратегия загрузки страницы "NORMAL"
    options.setCapability(CapabilityType.PAGE_LOAD_STRATEGY, PageLoadStrategy.NORMAL);
    // - режим "Инкогнито"
    options.addArguments("--incognito");
    // - режим "Полный экран"
    options.addArguments("--start-fullscreen");
    
    // Новый экземпляр драйвера
    return new EdgeDriver(options);
}
```

#### 3.1.1.8. Полный код EdgeBrowser.java

[EdgeBrowser.java]()

#### 3.1.1.9. Класс WebDriverFactory

***WebDriverFactory*** - класс реализующий паттерн фабрика, фабрика по созданию экземпляров веб драйверов.

Шаги:

1. Создать файл **WebDriverFactory.java** в **./src/test/java/webdriverfactory**.

![New Maven Project - WebDriverFactory.java](./_Files/2.%20New%20Project/07.jpg "New Project - WebDriverFactory.java")

2. Добавить в файл **WebDriverFactory.java** код.

* объявление логгера

```java
// Логгер
private static Logger logger = LogManager.getLogger(WebDriverFactory.class);
```

* метод **getDriver** - получение экземпляра драйвера по имени

```java
// Получение экземпляра драйвера по имени
public static WebDriver getDriver(String name) {
    switch (BrowserName.fromString(name)) {
        // Драйвер браузера Google Chrome
        case CHROME:
            logger.info("Драйвер браузера Google Chrome");
            ChromeBrowser.getDriver();
        // Драйвер браузера Mozilla Firefox
        case FIREFOX:
            logger.info("Драйвер браузера Mozilla Firefox");
            FirefoxBrowser.getDriver();
        // Драйвер браузера Microsoft Edge
        case EDGE:
            logger.info("Драйвер браузера Microsoft Edge");
            EdgeBrowser.getDriver();
        // По умолчанию
        default:
            throw new RuntimeException("Некорректное наименование браузера");
    }
}
```

#### 3.1.1.10. Полный код WebDriverFactory.java

[WebDriverFactory.java]()

### 3.1.2. Фабрика страниц (PageFactory)

#### 3.1.2.1. Перечисление PageNames

#### 3.1.2.2. Полный код PageNames.java

#### 3.1.2.3. Класс PageFactory

#### 3.1.2.4. Полный код PageFactory.java

### 3.1.3. Фабрика элементов (ElementFactory)

#### 3.1.3.1. Перечисление ElementNames

#### 3.1.2.2. Полный код ElementNames.java

#### 3.1.2.3. Класс ElementFactory

#### 3.1.2.4. Полный код ElementFactory.java



## 3.3. Паттерн Строитель (Builder)

### 3.3.1. Билдер тестовых данных

WebDriverBuilder
SmartphoneBuilder

##

# 4. Структурные паттерны

## 4.1. Паттерн Декоратор (Decorator)

### 4.1.1. Декоратор драйвера

### 4.1.2. Декоратор тестовых данных

## 4.2. Паттерн Заместитель (Proxy)

### 4.2.3. Заместителя для WebDriver

## 4.3. Паттерн Фасад (Facade)

### Фасад страниц

## 4.3. Паттерн Легковес (Flyweight / Object Pool)

### Пул страниц

***

Задание [![Перейти](https://img.shields.io/badge/-%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8-blue)](3.%20Задание.md)