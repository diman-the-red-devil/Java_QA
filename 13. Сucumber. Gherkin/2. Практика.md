Java_QA / 13. Сucumber. Gherkin

[![Лекция](https://img.shields.io/badge/-Лекция-ee99ff)](1.%20Лекция.md)
[![Главная](https://img.shields.io/badge/-Главная-aaccee)](README.md)
[![Задание](https://img.shields.io/badge/-Задание-99ffee)](3.%20Задание.md)

***

# Содержание

* [1. Открытие предыдущего проекта](#1-открытие-предыдущего-проекта)
* [2. Предыстория](#2-предыстория)
  * [2.1. Фича smartphone](#21-фича-smartphone)
    * [2.1.1. Сценарий Проверка заголовка страницы Смартфоны](#211-сценарий-проверка-заголовка-страницы-смартфоны)
    * [2.1.2. Добавление Предыстории](#212-добавление-предыстории)
  * [2.2. Полный код smartphone.feature](#22-полный-код-smartphonefeature)
  * [2.3. Запуск всех тестовых сценариев](#23-запуск-всех-тестовых-сценариев)
* [3. Параметры в шагах](#3-параметры-в-шагах)
  * [3.1. Класс SmartphonesPageSteps](#31-класс-smartphonespagesteps)
  * [3.2. Полный код SmartphonesPageSteps.java](#32-полный-код-smartphonespagestepsjava)
  * [3.3. Класс SmartphoneProductPageSteps](#33-класс-smartphoneproductpagesteps)
  * [3.4. Полный код SmartphoneProductPageSteps.java](#34-полный-код-smartphoneproductpagestepsjava)
  * [3.5. Запуск всех тестовых сценариев](#35-запуск-всех-тестовых-сценариев)
* [4. Структура сценария](#4-структура-сценария)
  * [4.1. Фича smartphone](#41-фича-smartphone)
    * [4.1.1. Сценарий Фильтрация и сортировка смартфонов на странице Смартфоны](#411-сценарий-фильтрация-и-сортировка-смартфонов-на-странице-смартфоны)
    * [4.1.2. Добавление Структуры сценария](#412-добавление-структуры-сценария)
  * [4.2. Полный код smartphone.feature](#42-полный-код-smartphonefeature)
  * [4.3. Запуск тестовых сценариев](#43-запуск-тестовых-сценариев)
* [5. Таблицы](#5-таблицы)
* [6. Таблица с одной колонкой List](#6-таблица-с-одной-колонкой-list)
  * [6.1. Фича smartphone](#61-фича-smartphone)
    * [6.1.1. Сценарий Таблица с одной колонкой](#611-сценарий-таблица-с-одной-колонкой)
  * [6.2. Полный код smartphone.feature](#62-полный-код-smartphonefeature)
  * [6.3. Класс SmartphonesPageSteps](#63-класс-smartphonespagesteps)
  * [6.4. Полный код SmartphonesPageSteps.java](#64-полный-код-smartphonespagestepsjava)
  * [6.5. Запуск тестовых сценариев](#65-запуск-тестовых-сценариев)
* [7. Таблица с двумя колонками Map<String, String>](#7-таблица-с-двумя-колонками-mapstring-string)
  * [7.1. Фича smartphone](#71-фича-smartphone)
    * [7.1.1. Сценарий Таблица с двумя колонками](#711-сценарий-таблица-с-двумя-колонками)
  * [7.2. Полный код smartphone.feature](#72-полный-код-smartphonefeature)
  * [7.3. Класс SmartphonesPageSteps](#73-класс-smartphonespagesteps)
  * [7.4. Полный код SmartphonesPageSteps.java](#74-полный-код-smartphonespagestepsjava)
  * [7.5. Запуск тестовых сценариев](#75-запуск-тестовых-сценариев)
* [8. Таблица со множеством колонок DataTable](#8-таблица-со-множеством-колонок-datatable)
  * [8.1. Фича Smartphone](#81-фича-smartphone)
    * [8.1.1. Сценарий Таблица с тремя колонками](#811-сценарий-таблица-с-тремя-колонками)
  * [8.2. Полный код smartphone.feature](#82-полный-код-smartphonefeature)
  * [8.3. Класс SmartphonesPageSteps](#83-класс-smartphonespagesteps)
  * [8.4. Полный код SmartphonesPageSteps.java](#84-полный-код-smartphonespagestepsjava)
  * [8.5. Запуск тестовых сценариев](#85-запуск-тестовых-сценариев)
* [9. Теги](#9-теги)
  * [9.1. Фича smartphone](#91-фича-smartphone)
    * [9.1.1. Сценарий Таблица с одной колонкой](#911-сценарий-таблица-с-одной-колонкой)
    * [9.1.2. Сценарий Таблица с двумя колонками](#912-сценарий-таблица-с-двумя-колонками)
    * [9.1.3. Сценарий Таблица с тремя колонками](#913-сценарий-таблица-с-тремя-колонками)
  * [9.2. Полный код smartphone.feature](#92-полный-код-smartphonefeature)
  * [9.3. Запуск тестовых сценариев](#93-запуск-тестовых-сценариев)
    * [9.3.1. Все сценарии](#931-все-сценарии)
    * [9.3.2. С тегом @table1](#932-с-тегом-table1)
    * [9.3.3. С тегом @table2](#933-с-тегом-table2)
    * [9.3.4. С тегом @table3](#934-с-тегом-table3)
    * [9.3.5. С тегами @table1 ИЛИ @table2](#935-с-тегами-table1-или-table2)
    * [9.3.6. С тегами @table1 И @table2](#936-с-тегами-table1-и-table2)
    * [9.3.7. Без тегов @table1 ИЛИ @table2 ИЛИ @table3](#937-без-тегов-table1-или-table2-или-table3)
* [10. Опции запуска](#10-опции-запуска)
* [11. Опции запуска через аннотацию @CucumberOptions для JUnit 4](#11-опции-запуска-через-аннотацию-cucumberoptions-для-junit-4)
  * [11.1. Класс RunCucumberTest](#111-класс-runcucumbertest)
  * [11.2. Полный код RunCucumberTest.java](#112-полный-код-runcucumbertestjava)
  * [11.3. Запуск тестовых сценариев](#113-запуск-тестовых-сценариев)
* [12. Опции запуска через cucumber.properties](#12-опции-запуска-через-cucumberproperties)
  * [12.1. Файл cucumber.properties](#121-файл-cucumberproperties)
  * [12.2. Полный код cucumber.properties](#122-полный-код-cucumberproperties)
  * [12.3. Класс RunCucumberTest](#123-класс-runcucumbertest)
  * [12.4. Полный код RunCucumberTest.java](#124-полный-код-runcucumbertestjava)
  * [12.5. Запуск тестовых сценариев](#125-запуск-тестовых-сценариев)
* [13. Проект Cucumber (cucumber-junit-platform-engine) + JUnit5](#13-проект-cucumber-cucumber-junit-platform-engine--junit5)
* [14. Файл POM](#14-файл-pom)
  * [14.1. Раздел <dependencies>](#141-раздел-dependencies)
  * [14.2. Раздел <build><plugins>](#142-раздел-buildplugins)
  * [14.3. Полный код POM.xml](#143-полный-код-pomxml)
* [15. Раннер](#15-раннер)
  * [15.1. Класс RunCucumberTest](#151-класс-runcucumbertest)
  * [15.2. Полный код RunCucumberTest.java](#152-полный-код-runcucumbertestjava)
* [16. Опции запуска через junit-platform.properties для JUnit 5](#16-опции-запуска-через-junit-platformproperties-для-junit-5)
  * [16.1. Файл junit-platform.properties](#161-файл-junit-platformproperties)
  * [16.2. Полный код junit-platform.properties](#162-полный-код-junit-platformproperties)
  * [16.3. Файл cucumber.properties](#163-файл-cucumberproperties)
  * [16.4. Полный код cucumber.properties](#164-полный-код-cucumberproperties)
  * [16.5 Класс RunCucumberTest](#165-класс-runcucumbertest)
  * [16.6. Полный код RunCucumberTest.java](#166-полный-код-runcucumbertestjava)
  * [16.7. Файл POM](#167-файл-pom)
  * [16.8. Запуск тестовых сценариев](#168-запуск-тестовых-сценариев)
* [17. Отчеты](#17-отчеты)
* [18. Плагин html](#18-плагин-html)
  * [18.1. Файл cucumber.properties / junit-platform.properties](#181-файл-cucumberproperties--junit-platformproperties)
  * [18.2. Полный код cucumber.properties](#182-полный-код-cucumberproperties)
  * [18.3. Запуск тестовых сценариев](#183-запуск-тестовых-сценариев)
  * [18.4. Просмотр отчета](#184-просмотр-отчета)
* [19. Плагин json](#19-плагин-json)
  * [19.1. Файл cucumber.properties / junit-platform.properties](#191-файл-cucumberproperties--junit-platformproperties)
  * [19.2. Полный код cucumber.properties](#192-полный-код-cucumberproperties)
  * [19.3. Запуск тестовых сценариев](#193-запуск-тестовых-сценариев)
  * [19.4. Просмотр отчета](#194-просмотр-отчета)

***

# 1. Открытие предыдущего проекта

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

Шаги:

1. Запустить **IntelliJ IDEA**.

2. Открыть проект прошлого урока в **IntelliJ IDEA**.

![New Maven Project - Open...](./_Files/2.%20New%20Project/1.%20Open%20Project/01.jpg "New Maven Project - Open...")

***

# 2. Предыстория

**Предыстория** это способ вынести общие шаги.
Предыстория выполняется перед каждым сценарием, но после каждого хука идущего перед сценарием.

## 2.1. Фича smartphone

### 2.1.1. Сценарий Проверка заголовка страницы Смартфоны

Добавим новый сценарий.

***Проверка заголовка страницы Смартфоны*** - сценарий проверки заголовка страницы "Смартфоны".

Шаги:

1. Открыть файл **smartphone.feature** в **./src/test/resources/features**.

2. Добавить сценарий:

* заголовок сценария - **Проверка заголовка страницы Смартфоны**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущий сценарий
  Сценарий: Проверка заголовка страницы Смартфоны
```

* шаги сценария

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущий сценарий
  Сценарий: Проверка заголовка страницы Смартфоны
    Дано Открыта страница "Стартовая страница сайта DNS"
    Когда Выполнен переход на страницу "Смартфоны"
    И Открыта страница "Смартфоны"
    Тогда Проверка: Заголовок страницы содержит текст ""
```

### 2.1.2. Добавление Предыстории

Как видим у двух сценариев есть общие шаги - это контекст, который можно вынести за сценарии.

```gherkin
# language: ru
# encoding: utf-8
...
    Дано Открыта страница "Стартовая страница сайта DNS"
    Когда Выполнен переход на страницу "Смартфоны"
    И Открыта страница "Смартфоны"
...
```

Шаги:

1. Открыть файл **smartphone.feature** в **./src/test/resources/features**.

2. Изменить сценарий:

* предыстория

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны

  Я как посетитель сайта ДНС хочу иметь возможность
  - видеть список смартфонов
  - сортировать и фильтровать список смартфонов
  - переходить на страницу продукта

  Это позволит мне выбрать понравившийся смартфон и просмотреть его характеристики.

  Предыстория:
    Дано Открыта страница "Стартовая страница сайта DNS"
    Когда Выполнен переход на страницу "Смартфоны"
    И Открыта страница "Смартфоны"
```

* сценарии

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны

  Я как посетитель сайта ДНС хочу иметь возможность
  - видеть список смартфонов
  - сортировать и фильтровать список смартфонов
  - переходить на страницу продукта

  Это позволит мне выбрать понравившийся смартфон и просмотреть его характеристики.

  Предыстория:
    Дано Открыта страница "Стартовая страница сайта DNS"
    Когда Выполнен переход на страницу "Смартфоны"
    И Открыта страница "Смартфоны"

  Сценарий: Просмотр страницы Смартфоны
    И Установлена сортировка "Сначала дорогие"
    И В фильтре "Производитель" выбрано значение "Samsung"
    И В фильтре "Объем оперативной памяти" выбрано значение "8 Гб"
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"

  Сценарий: Проверка заголовка страницы Смартфоны
    Тогда Проверка: Заголовок страницы "Смартфоны" содержит текст "Смартфоны"
```

## 2.2. Полный код smartphone.feature

[smartphone.feature](_Sample%20JUnit4/src/test/resources/features/smartphone.feature)

## 2.3. Запуск всех тестовых сценариев

Шаги:

1. Открыть **.feature** файл **Smartphone.feature**
2. Запустить все сценарии
3. Получить результаты запуска в консоли

***

# 3. Параметры в шагах

Давайте перепишем реализации шагов так, чтобы в них можно было передавать параметры.

## 3.1. Класс SmartphonesPageSteps

Перепишем код класса **SmartphonesPageSteps**.

Шаги:

1. Открыть файл **SmartphonesPageSteps** в **./src/test/java/steps**.

2. Изменить в файле **SmartphonesPageSteps.java** код

* метод **orderBy** - шаг **Установлена сортировка "<Тип сортировки>"**

```java
// Шаг: Установлена сортировка "<Тип сортировки>"
@Когда("Установлена сортировка {string}")
public void orderBy(String type) {
    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки
    smartphonesPage.radiobuttonSort(type).setSelected(true);
    logger.info("Страница [Смартфоны]: Установлена сортировка \"" + type + "\"");
}
```

* метод **filterByCompany** - шаг **В фильтре "Производитель" выбрано значение "<Название компании>"**

```java
// Шаг: В фильтре "Производитель" выбрано значение "<Название компании>"
@Когда("В фильтре \"Производитель\" выбрано значение {string}")
public void filterByCompany(String company) {
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 600);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(company).setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Производитель\" выбрано значение \"" + company + "\"");
}
```

* метод **filterByRAM** - шаг **В фильтре "Объем оперативной памяти" выбрано значение "<Количество> Гб"**

```java
// Шаг: В фильтре "Объем оперативной памяти" выбрано значение "<Количество> Гб"
@Когда("В фильтре \"Объем оперативной памяти\" выбрано значение \"{int} Гб\"")
public void filterByRAM(int ram) {
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0, 400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(ram + " Гб").setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Объем оперативной памяти\" выбрано значение \"" + ram + " Гб\"");
}
```

* метод **assertPageTitle** - шаг **Проверка: Заголовок страницы "Смартфоны" содержит текст "<Текст>"**

```java
// Проверка: Заголовок страницы "Смартфоны" содержит текст "<Текст>"
@Тогда("Проверка: Заголовок страницы \"Смартфоны\" содержит текст {string}")
public void assertPageTitle(String text) {
    Assertions.assertTrue(smartphonesPage.getPageTitle().contains(text),
    "Страница [Смартфоны]: Ошибка! Заголовок страницы \"Смартфоны\" не содержит текст \"" + text + "\"!");
    logger.info("Страница [Смартфоны]: Заголовок страницы \"Смартфоны\" содержит текст \"" + text + "\"");
}
```

## 3.2. Полный код SmartphonesPageSteps.java

[SmartphonesPageSteps.java](_Sample%20JUnit4/src/test/java/steps/SmartphonesPageSteps.java)

## 3.3. Класс SmartphoneProductPageSteps

Перепишем код класса **SmartphoneProductPageSteps**.

Шаги:

1. Открыть файл **SmartphoneProductPageSteps** в **./src/test/java/steps**.

2. Изменить в файле **SmartphoneProductPageSteps.java** код

* метод **assertPageTitle** - проверка **Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "<Текст>""**

```java
// Проверка: Заголовок страницы \"Продукт. Смартфон\" содержит текст "<Текст>"
@Тогда("Проверка: Заголовок страницы \"Продукт. Смартфон\" содержит текст {string}")
public void assertPageTitle(String text) {
    Assertions.assertTrue(smartphoneProductPage.getPageTitle().contains(text),
        "Страница [Продукт. Смартфон]: Ошибка! Заголовок страницы \"Продукт. Смартфон\" не содержит текст \"" + text + "\"!");
    logger.info("Страница [Продукт. Смартфон]: Заголовок страницы \"Продукт. Смартфон\" содержит текст \"" + text + "\"");
}
```

## 3.4. Полный код SmartphoneProductPageSteps.java

[SmartphoneProductPageSteps.java](_Sample%20JUnit4/src/test/java/steps/SmartphoneProductPageSteps.java)

## 3.5. Запуск всех тестовых сценариев

Шаги:

1. Открыть **.feature** файл **Smartphone.feature**
2. Запустить все сценарии
3. Получить результаты запуска в консоли

***

# 4. Структура сценария

А что если мы захотим для первого сценария прогнать кейсы с другими параметрами сортировки и фильтрации.
Для этого есть **Структура сценария**.

**Структура сценария** - конструкция, которая позволяет запускать параметризованные тесты (Data Driven Testing).

## 4.1. Фича smartphone

### 4.1.1. Сценарий Фильтрация и сортировка смартфонов на странице Смартфоны

Добавим новый сценарий.

***Фильтрация и сортировка смартфонов на странице Смартфоны*** - сценарий проверки фильтрации и сортировки смартфонов на странице Смартфоны 

Шаги:

1. Открыть файл **smartphone.feature** в **./src/test/resources/features**.

2. Добавить сценарий:

* заголовок сценария - **Проверка заголовка страницы Смартфоны**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Фильтрация и сортировка смартфонов на странице Смартфоны
```

* шаги сценария

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Фильтрация и сортировка смартфонов на странице Смартфоны
    И Установлена сортировка "Сначала дорогие"
    И В фильтре "Производитель" выбрано значение "Apple"
    И В фильтре "Объем оперативной памяти" выбрано значение "6 Гб"
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Apple"
```

### 4.1.2. Добавление Структуры сценария

Шаги:

1. Открыть файл **Smartphone.feature** в **./src/test/resources/features**.

2. Изменить сценарий:

* структура сценария

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Структура сценария: Фильтрация и сортировка смартфонов на странице Смартфоны
```

* шаги сценария

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Структура сценария: Фильтрация и сортировка смартфонов на странице Смартфоны
    И Установлена сортировка "<type>"
    И В фильтре "Производитель" выбрано значение "<company>"
    И В фильтре "Объем оперативной памяти" выбрано значение "<ram> Гб"
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "<text>"
```

* таблица с примерами

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Структура сценария: Фильтрация и сортировка смартфонов на странице Смартфоны
    И Установлена сортировка "<type>"
    И В фильтре "Производитель" выбрано значение "<company>"
    И В фильтре "Объем оперативной памяти" выбрано значение "<ram> Гб"
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "<text>"

    Примеры:
      | type               | company | ram | text  |
      | Сначала популярные | Apple   | 6   | Apple |
      | Сначала популярные | Apple   | 4   | Apple |
      | Сначала дорогие    | Apple   | 6   | Apple |
      | Сначала дорогие    | Apple   | 4   | Apple |
```

## 4.2. Полный код smartphone.feature

[smartphone.feature](_Sample%20JUnit4/src/test/resources/features/smartphone.feature)

## 4.3. Запуск тестовых сценариев

Шаги:

1. Открыть **.feature** файл **Smartphone.feature**
2. Запустить сценарии **Фильтрация и сортировка смартфонов на странице Смартфоны**
3. Получить результаты запуска в консоли.

***

# 5. Таблицы
   
На практике часто намного читабельнее выглядят табличные данные, чем просто передаваемые параметры. 
В **Cucumber** встроена возможность по работе с таблицами - программно они представляют собой разные объекты. 
В одном случае это **List** в другом это **Map**.

***

# 6. Таблица с одной колонкой List<String>

## 6.1. Фича smartphone

### 6.1.1. Сценарий Таблица с одной колонкой
 
Шаги:

1. Открыть файл **Smartphone.feature** в **./src/test/resources/features**.

2. Добавить сценарий:

* заголовок сценария - **Таблица с одной колонкой**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с одной колонкой
```

* шаг с использованием таблицы с одной колонкой

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с одной колонкой
    И Установлена сортировка "Сначала дорогие"
    И Установлены фильтры из таблицы с одной колонкой
      | Samsung |
      | 8 Гб    |
```

* остальные шаги

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с одной колонкой
    И Установлена сортировка "Сначала дорогие"
    И Установлены фильтры из таблицы с одной колонкой
      | Samsung |
      | 8 Гб    |
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"
```

## 6.2. Полный код smartphone.feature

[smartphone.feature](_Sample%20JUnit4/src/test/resources/features/smartphone.feature)

## 6.3. Класс SmartphonesPageSteps

Шаги:

1. Открыть файл **SmartphonesPageSteps.java** в **./src/test/java/steps**.

2. Добавить в файл **SmartphonesPageSteps.java** код.

* метод **setFiltersFromTable1** - шаг **И** *Установлены фильтры из таблицы с одной колонкой*

```java
// Шаг: Установлены фильтры из таблицы с одной колонкой
@И("Установлены фильтры из таблицы с одной колонкой")
public void setFiltersFromTable1(List<String> filters) {
    Smartphone smartphone = new Smartphone(
        new Ram(Integer.parseInt(filters.get(1).split(" ")[0])),
        new Company(filters.get(0)));
    
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphone.getCompany().getCompany()).setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Производитель\" выбрано значение \"" + smartphone.getCompany().getCompany() + "\"");

    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphone.getRam().getRam() + " Гб").setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Объем оперативной памяти\" выбрано значение \"" + smartphone.getRam().getRam() + " Гб\"");

    logger.info("***** Установлены фильтры из таблицы с одной колонкой");
}
```

## 6.4. Полный код SmartphonesPageSteps.java

[SmartphonesPageSteps.java](_Sample%20JUnit4/src/test/java/steps/SmartphonesPageSteps.java)

## 6.5. Запуск тестовых сценариев

Шаги:

1. Открыть **.feature** файл **Smartphone.feature**
2. Запустить сценарии **Таблица с одной колонкой**
3. Получить результаты запуска в консоли.

***

# 7. Таблица с двумя колонками Map<String, String>

## 7.1. Фича smartphone

### 7.1.1. Сценарий Таблица с двумя колонками

Шаги:

1. Открыть файл **Smartphone.feature** в **./src/test/resources/features**.

2. Добавить сценарий:

* заголовок сценария - **Таблица с двумя колонками**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с двумя колонками
```

* шаг с использованием таблицы с двумя колонками

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с двумя колонками
    И Установлена сортировка "Сначала дорогие"
    И Установлены фильтры из таблицы с двумя колонками
      | Производитель            | Samsung |
      | Объем оперативной памяти | 8 Гб    |
```

* остальные шаги

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с двумя колонками
    И Установлена сортировка "Сначала дорогие"
    И Установлены фильтры из таблицы с двумя колонками
      | Производитель            | Samsung |
      | Объем оперативной памяти | 8 Гб    |
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"
```

## 7.2. Полный код smartphone.feature

[smartphone.feature](_Sample%20JUnit4/src/test/resources/features/smartphone.feature)

## 7.3. Класс SmartphonesPageSteps

Шаги:

1. Открыть файл **SmartphonesPageSteps.java** в **./src/test/java/steps**.

2. Добавить в файл **SmartphonesPageSteps.java** код.

* метод **setFiltersFromTable2** - шаг **И** *Установлены фильтры из таблицы с двумя колонками*

```java
// Шаг: Установлены фильтры из таблицы с двумя колонками
@И("Установлены фильтры из таблицы с двумя колонками")
public void setFiltersFromTable2(Map<String, String> filters) {
    Smartphone smartphone = new Smartphone(
        new Ram(Integer.parseInt(filters.get("Объем оперативной памяти").split(" ")[0])),
        new Company(filters.get("Производитель")));
    
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphone.getCompany().getCompany()).setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Производитель\" выбрано значение \"" + smartphone.getCompany().getCompany() + "\"");


    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphone.getRam().getRam() + " Гб").setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Объем оперативной памяти\" выбрано значение \"" + smartphone.getRam().getRam() + " Гб\"");
}
```

## 7.4. Полный код SmartphonesPageSteps.java

[SmartphonesPageSteps.java](_Sample%20JUnit4/src/test/java/steps/SmartphonesPageSteps.java)

## 7.5. Запуск тестовых сценариев

Шаги:

1. Открыть **.feature** файл **Smartphone.feature**
2. Запустить сценарии **Таблица с двумя колонками**
3. Получить результаты запуска в консоли.

***

# 8. Таблица со множеством колонок DataTable

## 8.1. Фича Smartphone

### 8.1.1. Сценарий Таблица с тремя колонками

Шаги:

1. Открыть файл **Smartphone.feature** в **./src/test/resources/features**.

2. Добавить сценарий:

* заголовок сценария - **Таблица с тремя колонками**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с тремя колонками
```

* шаг с использованием таблицы с тремя колонками

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с тремя колонками
    И Установлена сортировка и фильтры из таблицы с тремя колонками
      | Сортировка      | Производитель | Объем оперативной памяти |
      | Сначала дорогие | Samsung       | 8 Гб                     |
```

* остальные шаги

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  Сценарий: Таблица с тремя колонками
    И Установлена сортировка и фильтры из таблицы с тремя колонками
      | Сортировка      | Производитель | Объем оперативной памяти |
      | Сначала дорогие | Samsung       | 8 Гб                     |
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"
```

## 8.2. Полный код smartphone.feature

[smartphone.feature](_Sample%20JUnit4/src/test/resources/features/smartphone.feature)

## 8.3. Класс SmartphonesPageSteps

Шаги:

1. Открыть файл **SmartphonesPageSteps.java** в **./src/test/java/steps**.

2. Добавить в файл **SmartphonesPageSteps.java** код.

* метод **setFiltersAndSortFromTanle3** - шаг **И** *Установлена сортировка и фильтры из таблицы с тремя колонками*

```java
// Шаг: Установлена сортировка и фильтры из таблицы с тремя колонками
@И("Установлена сортировка и фильтры из таблицы с тремя колонками")
public void setFiltersAndSortFromTable3(DataTable dataTable) {
    List<Map<String, String>> table = dataTable.asMaps(String.class, String.class);
    String sortBy = table.get(0).get("Сортировка");
    String filterByCompany = table.get(0).get("Производитель");
    String filterByRam = table.get(0).get("Объем оперативной памяти");

    Smartphone smartphone = new Smartphone(
    new Ram(Integer.parseInt(filterByRam.split(" ")[0])),
    new Company(filterByCompany));

    // Отображение сортировки
    smartphonesPage.accordeonSort().show();
    // Установка сортировки
    smartphonesPage.radiobuttonSort(sortBy).setSelected(true);
    logger.info("Страница [Смартфоны]: Установлена сортировка \"" + sortBy + "\"");

    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Установка фильтра "Производитель"
    smartphonesPage.checkboxCompany(smartphone.getCompany().getCompany()).setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Производитель\" выбрано значение \"" + smartphone.getCompany().getCompany() + "\"");

    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Отображение фильтра "Объем оперативной памяти"
    smartphonesPage.accordeonRAM().show();
    // Прокрутка страницы вниз
    JavaScriptHelper.scrollBy(0,400);
    // Установка фильтра "Объем оперативной памяти"
    smartphonesPage.checkboxRAM(smartphone.getRam().getRam() + " Гб").setChecked(true);
    logger.info("Страница [Смартфоны]: В фильтре \"Объем оперативной памяти\" выбрано значение \"" + smartphone.getRam().getRam() + " Гб\"");

    logger.info("***** Установлена сортировка и фильтры из таблицы с тремя колонками");
}
```

## 8.4. Полный код SmartphonesPageSteps.java

[SmartphonesPageSteps.java](_Sample%20JUnit4/src/test/java/steps/SmartphonesPageSteps.java)

## 8.5. Запуск тестовых сценариев

Шаги:

1. Открыть **.feature** файл **Smartphone.feature**
2. Запустить сценарии **Таблица с тремя колонками**
3. Получить результаты запуска в консоли.

***

# 9. Теги

Пометим сценарии тегами. Тегирование во многих отношениях мощная штука.
С помощью тегов можно:

* настроить разные наборы тестов для запуска
* выполнять поиск в отчете по запуску
* классифицировать тесты по функциям и т д

## 9.1. Фича smartphone

### 9.1.1. Сценарий Таблица с одной колонкой

Шаги:

1. Открыть файл **smartphone.feature** в **./src/test/resources/features**.

2. Добавить тег  **@table1**в сценарий **Таблица с одной колонкой**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  @table1
  Сценарий: Таблица с одной колонкой
    И Установлена сортировка "Сначала дорогие"
    И Установлены фильтры из таблицы с одной колонкой
      | Samsung |
      | 8 Гб    |
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"
```

### 9.1.2. Сценарий Таблица с двумя колонками

Шаги:

1. Открыть файл **smartphone.feature** в **./src/test/resources/features**.

2. Добавить тег **@table2** в сценарий **Таблица с двумя колонками**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  @table2
  Сценарий: Таблица с двумя колонками
    И Установлена сортировка "Сначала дорогие"
    И Установлены фильтры из таблицы с двумя колонками
      | Производитель            | Samsung |
      | Объем оперативной памяти | 8 Гб    |
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"
```

### 9.1.3. Сценарий Таблица с тремя колонками

Шаги:

1. Открыть файл **smartphone.feature** в **./src/test/resources/features**.

2. Добавить тег **@table3** в сценарий **Таблица с тремя колонками**

```gherkin
# language: ru
# encoding: utf-8
Функция: Смартфоны
  # предыдущие сценарии
  @table3
  Сценарий: Таблица с тремя колонками
    И Установлена сортировка и фильтры из таблицы с тремя колонками
      | Сортировка      | Производитель | Объем оперативной памяти |
      | Сначала дорогие | Samsung       | 8 Гб                     |
    И Применены фильтры
    И Выполнен переход на страницу первого продукта в списке
    И Открыта страница "Продукт. Смартфон"
    Тогда Проверка: Заголовок страницы "Продукт. Смартфон" содержит текст "Samsung"
```

## 9.2. Полный код smartphone.feature

[smartphone.feature](_Sample%20JUnit4/src/test/resources/features/smartphone.feature)

## 9.3. Запуск тестовых сценариев

### 9.3.1. Все сценарии

Шаги:

1. Запустить все сценарии

```shell
mvn clean test
```

2. Получить результаты запуска в консоли

Запустятся все сценарии, независимо от тегов.

### 9.3.2. С тегом @table1

Шаги:

1. Запустить сценарии с тегом **@table1**

```shell
mvn clean test -Dcucumber.filter.tags=@table1
```

2. Получить результаты запуска в консоли

Запустятся сценарии помеченный тегом **@table1** - один сценарий.

### 9.3.3. С тегом @table2

Шаги:

1. Запустить сценарии с тегом **@table2**

```shell
mvn clean test -Dcucumber.filter.tags=@table2
```

2. Получить результаты запуска в консоли 

Запустятся сценарии помеченный тегом **@table2** - один сценарий.

### 9.3.4. С тегом @table3

Шаги:

1. Запустить сценарии с тегом **@table3**

```shell
mvn clean test -Dcucumber.filter.tags=@table3
```

2. Получить результаты запуска в консоли - запустится только сценарий помеченный тегом **@table3**.

### 9.3.5. С тегами @table1 ИЛИ @table2

Шаги:

1. Запустить сценарии с тегами **@table1** ИЛИ **@table2** 

```shell
mvn clean test -D"cucumber.filter.tags=@table1 or @table2"
```

2. Получить результаты запуска в консоли

Запустятся сценарии помеченные тегами **@table1** ИЛИ **@table2** - два сценария.

### 9.3.6. С тегами @table1 И @table2

Шаги:

1. Запустить сценарии с тегами **@table1** И **@table2**

```shell
mvn clean test -D"cucumber.filter.tags=@table1 and @table2"
```

2. Получить результаты запуска в консоли

Запустятся сценарии помеченные тегами **@table1** И **@table2**.
Так как двумя тегами не помечен ни один сценарий, то ни один сценарий не запустится.

### 9.3.7. Без тегов @table1 ИЛИ @table2 ИЛИ @table3

Шаги:

1. Запустить сценарии без тегов **@table1** ИЛИ **@table2** ИЛИ **@table3**

```shell
mvn clean test -D"cucumber.filter.tags=not(@table1 or @table2 or @table3)"
```

2. Получить результаты запуска в консоли

Запустятся сценарии **НЕ** помеченные тегами **@table1** ИЛИ **@table2** ИЛИ **@table3**.

***

# 10. Опции запуска 

С помощью опций можно прописать много разных настроек для запуска сценариев **Cucumber**, 
не передавая их каждый раз при запуске тестов.

***

# 11. Опции запуска через аннотацию @CucumberOptions для JUnit 4

## 11.1. Класс RunCucumberTest

Данная аннотация используется совместно с раннер классом, чтобы соощить **Cucumber** как запускать сценарии

Шаги:

1. Открыть файл **RunCucumberTest.java** в **./src/test/java**

2. Добавить опции:

* *features* - список папок с feature файлами - фичи/сценарии

```java
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
        // Список папок с feature файлами - фичи/сценарии
        features = {"src/test/resources/features"},
)
```

* *glue* - список пакетов с файлами **.java**, в которых реализации шагов и хуков

```java
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
        // Список папок с feature файлами - фичи/сценарии
        features = {"src/test/resources/features"},
        // Спиcок пакетов с steps файлами - шаги
        glue = {"steps", "hooks"},
)
```

* *tags* - список тегов запускаемых сценариев

```java
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
        // Список папок с feature файлами - фичи/сценарии
        features = {"src/test/resources/features"},
        // Спиcок пакетов с steps файлами - шаги
        glue = {"steps", "hooks"},
        // Спиcок тегов запускаемых сценариев
        tags = "@table1",
)
```

* *stepNotifications* - вывод шагов в окне запуска

```java
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
        // Список папок с feature файлами - фичи/сценарии
        features = {"src/test/resources/features"},
        // Спиcок пакетов с steps файлами - шаги
        glue = {"steps", "hooks"},
        // Спиcок тегов запускаемых сценариев
        tags = "@table1",
        // Вывод шагов в окне запуска
        stepNotifications = false
)
```

## 11.2. Полный код RunCucumberTest.java

[RunCucumberTest.java](_Sample%20JUnit4/src/test/java/steps/RunCucumberTest.java)

## 11.3. Запуск тестовых сценариев

Шаги:

1. Запустить сценарии

```shell
mvn clean test
```

2. Получить результаты запуска в консоли

Запустится сценарий помеченный тегом **@table1** (из **@CucumberOptions**).

3. Запустить сценарии с тегом **@table2**

```shell
mvn clean test -Dcucumber.filter.tags=@table2
```

4. Получить результаты запуска в консоли 

Запустится сценарий помеченный тегом **@table2** (из **@CucumberOptions** значение не будет подтягиваться).

***

# 12. Опции запуска через cucumber.properties

## 12.1. Файл cucumber.properties

Шаги:

1. Создать файл **cucumber.properties** в **src/test/resources**

2. Добавить в файл опции

```properties
cucumber.features=src/test/resources/features
cucumber.glue=steps, hooks
cucumber.filter.tags=@table3
```

## 12.2. Полный код cucumber.properties

[cucumber.properties](_Sample%20JUnit4/src/test/java/cucumber.properties)

## 12.3. Класс RunCucumberTest

Шаги:

1. Открыть файл **RunCucumberTest.java** в **./src/test/java**

2. Закомментить все опции (на время запуска тестов):

```java
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
    // Список папок с feature файлами - фичи/сценарии
    //features = {"src/test/resources/features"},
    // Спиcок пакетов с steps файлами - шаги
    //glue = {"steps", "hooks"},
    // Спиcок тегов запускаемых сценариев
    //tags = "@table1",
    // Вывод шагов в окне запуска
    //stepNotifications = false
)
```

## 12.4. Полный код RunCucumberTest.java

[RunCucumberTest.java](_Sample%20JUnit4/src/test/java/steps/RunCucumberTest.java)

## 12.5. Запуск тестовых сценариев

Шаги:

1. Запустить сценарии

```shell
mvn clean test
```

2. Получить результаты запуска в консоли

Запустится сценарий помеченный тегом **@table3** (из **cucumber.properties**).

3. Запустить сценарии с тегом **@table2**

```shell
mvn clean test -Dcucumber.filter.tags=@table2
```

4. Получить результаты запуска в консоли

Запустится сценарий помеченный тегом **@table2** (из **cucumber.properties** значение не будет подтягиваться).

***

# 13. Проект Cucumber (cucumber-junit-platform-engine) + JUnit5

[![Содержание](https://img.shields.io/badge/-Содержание-1177ff)](#содержание)

В существующий проект нужно внести изменения:

* **cucumber-java**
* **cucumber-junit-platform-engine**
* **junit-jupiter-api** (**JUnit5**)

***

# 14. Файл POM

[![Содержание](https://img.shields.io/badge/-Содержание-1177ff)](#содержание)

Внести изменения в **POM.xml**.

## 14.1. Раздел \<dependencies\>

Раздел **<dependencies>**

```xml
<!-- Зависимости -->
<dependencies>
    Добавлять вот сюда
</dependencies>
```  

Шаги:

1. Открыть файл **POM.xml**.

2. Добавить в раздел **\<dependencies\>** зависимости / библиотеки:

* фреймворк **BDD** **Cucumber**

```xml
<!-- Cucumber -->
<dependency>
    <groupId>io.cucumber</groupId>
    <artifactId>cucumber-java</artifactId>
    <version>${cucumber}</version>
    <scope>test</scope>
</dependency>
<!--dependency>
    <groupId>io.cucumber</groupId>
    <artifactId>cucumber-junit</artifactId>
    <version>${cucumber}</version>
    <scope>test</scope>
</dependency-->
<dependency>
    <groupId>io.cucumber</groupId>
    <artifactId>cucumber-junit-platform-engine</artifactId>
    <version>${cucumber}</version>
    <scope>test</scope>
</dependency>
```

* фреймворк тестирования **JUnit**

```xml
<!-- JUnit -->
<dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter-api</artifactId>
    <version>${junit}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.junit.platform</groupId>
    <artifactId>junit-platform-suite</artifactId>
    <version>${junit-platform}</version>
    <scope>test</scope>
</dependency>
```    

## 14.2. Раздел \<build\>\<plugins\>

Шаги:

1. Открыть файл **POM.xml**.

2. Добавить в раздел **\<build\>\<plugins\>**:

* в **maven-surefire-plugin** конфигурацию

```xml
<!-- maven-surefire-plugin -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>${maven-surefire-plugin}</version>
    <!-- Конфигурация -->
    <configuration>
        <properties>
            <configurationParameters>
                cucumber.junit-platform.naming-strategy=long
            </configurationParameters>
        </properties>
    </configuration>
</plugin>
```

## 14.3. Полный код POM.xml

[POM.xml](_Sample%20JUnit5/pom.xml)

***

# 15. Раннер

[![Содержание](https://img.shields.io/badge/-Содержание-1177ff)](#содержание)

***RunCucumberTest*** - класс для запуска сценариев.

## 15.1. Класс RunCucumberTest

Шаги:

1. Открыть файл **RunCucumberTest.java** в **./src/test/java**.

2. Изменить в файле **RunCucumberTest.java** код.

* закомментить блок кода

```java
/*
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
    // Список папок с feature файлами - фичи/сценарии
    features = {"src/test/resources/features"},
    // Спиcок пакетов с steps файлами - шаги
    glue = {"steps"}
)
*/
```

* добавить настройку запуска

```java
// @Suite
// Набор тестов
@Suite
// @IncludeEngines
// Тестовый движок
@IncludeEngines("cucumber")
// @SelectClasspathResource
// Папка с BDD сценариями на Gherkin
@SelectClasspathResource("features")
// @ConfigurationParameter
// Опции для запуска сценариев
@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = "steps, hooks")
@ConfigurationParameter(key = PLUGIN_PUBLISH_QUIET_PROPERTY_NAME, value = "true")
public class RunCucumberTest {
}
```

## 15.2. Полный код RunCucumberTest.java

[RunCucumberTest.java](_Sample%20JUnit5/src/test/java/RunCucumberTest.java)

***

# 16. Опции запуска через junit-platform.properties для JUnit 5

## 16.1. Файл junit-platform.properties

Шаги:

1. Создать файл **junit-platform.properties** в **src/test/resources**

2. Добавить в файл опции

```properties
cucumber.features=src/test/resources/features
cucumber.glue=steps, hooks
cucumber.filter.tags=@table3
cucumber.junit-platform.naming-strategy=long
```

## 16.2. Полный код junit-platform.properties

[junit-platform.properties](_Sample%20JUnit4/src/junit-platform.properties)

## 16.3. Файл cucumber.properties

Шаги:

1. Открыть файл **cucumber.properties** в **src/test/resources**

2.Изменить в файле **RunCucumberTest.java** код

* закомментить все опции:

```properties
#cucumber.features=src/test/resources/features
#cucumber.glue=steps, hooks
#cucumber.filter.tags=@table3
```

## 16.4. Полный код cucumber.properties

[cucumber.properties](_Sample%20JUnit4/src/cucumber.properties)

## 16.5 Класс RunCucumberTest

Шаги:

1. Открыть файл **RunCucumberTest.java** в **./src/test/java**.

2. Изменить в файле **RunCucumberTest.java** код.

* закомментить блоки кода

```java
/*
// @RunWith
// Указание класса для запуска тестов
@RunWith(Cucumber.class)
// @CucumberOptions
// Указание опции для запуска сценариев
@CucumberOptions(
    // Список папок с feature файлами - фичи/сценарии
    features = {"src/test/resources/features"},
    // Спиcок пакетов с steps файлами - шаги
    glue = {"steps"}
)
*/
/*
// @Suite
// Набор тестов
@Suite
// @IncludeEngines
// Тестовый движок
@IncludeEngines("cucumber")
// @SelectClasspathResource
// Папка с BDD сценариями на Gherkin
@SelectClasspathResource("features")
// @ConfigurationParameter
// Опции для запуска сценариев
@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = "steps, hooks")
@ConfigurationParameter(key = PLUGIN_PUBLISH_QUIET_PROPERTY_NAME, value = "true")
*/
public class RunCucumberTest {
}
```

## 16.6. Полный код RunCucumberTest.java

[RunCucumberTest.java](_Sample%20JUnit4/src/test/java/RunCucumberTest.java)

## 16.7. Файл POM

Шаги:

1. Открыть файл **POM.xml**.

2. Закомментить в разделе **\<build\>\<plugins\>** код:
   
* в **maven-surefire-plugin** конфигурацию

```xml
<!-- maven-surefire-plugin -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>${maven-surefire-plugin}</version>
    <!-- Конфигурация -->
    <!--configuration>
        <properties>
            <configurationParameters>
                cucumber.junit-platform.naming-strategy=long
            </configurationParameters>
        </properties>
    </configuration-->
</plugin>
```

## 16.8. Запуск тестовых сценариев

Шаги:

1. Запустить сценарии

```shell
mvn clean test
```

2. Получить результаты запуска в консоли

Запустится сценарий помеченный тегом **@table3** (из **junit-platform.properties**).

3. Запустить сценарии с тегом **@table2**

```shell
mvn clean test -Dcucumber.filter.tags=@table2
```

4. Получить результаты запуска в консоли

Запустится сценарий помеченный тегом **@table2** (из **cucumber.properties** значение не будет подтягиваться).

***

# 17. Отчеты

После прогона автотестов должен быть какой то отчет для анализа результатов.
В **Cucumber** встроена такая возможность из коробки.
Для этого всего лишь нужно подключить нужный плагин в настройках.

***

# 18. Плагин html

## 18.1. Файл cucumber.properties / junit-platform.properties

Шаги:

1. Открыть файл **cucumber.properties / junit-platform.properties** в **src/test/resources**

2. Раскомментить все опции:

```properties
cucumber.features=src/test/resources/features
cucumber.glue=steps, hooks
cucumber.filter.tags=@table3
```

3. Добавить подключения плагина **html**

```properties
cucumber.plugin=html:target/cucumber-reports/report.html
```

## 18.2. Полный код cucumber.properties

[cucumber.properties](_Sample%20JUnit4/src/cucumber.properties)

## 18.3. Запуск тестовых сценариев

Шаги:

1. Запустить сценарии

```shell
mvn clean test
```

2. Получить результаты запуска в консоли - запустится только сценарий помеченный тегом **@table3** (из **cucumber.properties**).

## 18.4. Просмотр отчета

Шаги:

1. Перейти в папку сборки **target/cucumber-reports**
2. Открыть файл **report.html**
3. Ознакомиться с отчетом по запуску сценариев
4. Попробуйте зафейлить сценарий с помощью некорректных тестовых данных и снова посмотрите результат

***

# 19. Плагин json

## 19.1. Файл cucumber.properties / junit-platform.properties

Шаги:

1. Открыть файл **cucumber.properties / junit-platform.properties** в **src/test/resources**

2. Изменить плагин на **json**

```properties
cucumber.plugin=json:target/cucumber-reports/report.json
```

## 19.2. Полный код cucumber.properties

[cucumber.properties](_Sample%20JUnit4/src/cucumber.properties)

## 19.3. Запуск тестовых сценариев

Шаги:

1. Запустить сценарии

```shell
mvn clean test
```

2. Получить результаты запуска в консоли - запуститься только сценарий помеченный тегом **@table3** (из **cucumber.properties**).

## 19.4. Просмотр отчета

Шаги:

1. Перейти в папку сборки **target/cucumber-reports**
2. Открыть файл **report.json**
3. Ознакомиться с отчетом по запуску сценариев
4. Попробуйте зафейлить сценарий с помощью некорректных тестовых данных и снова посмотрите результат

***

[![Лекция](https://img.shields.io/badge/-Лекция-ee99ff)](1.%20Лекция.md)
[![Главная](https://img.shields.io/badge/-Главная-aaccee)](README.md)
[![Задание](https://img.shields.io/badge/-Задание-99ffee)](3.%20Задание.md)