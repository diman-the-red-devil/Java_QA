Java_QA / 14. API. REST Assured

[![Главная](https://img.shields.io/badge/-Главная-aaccee)](README.md)
[![Практика](https://img.shields.io/badge/-Практика-aaffaa)](2.%20Практика.md)

***

# Содержание

* [1. REST Assured](#1-rest-assured)
* [2. Класс RestAssured](#2-класс-restassured)
  * [2.1. Given, With, Expect, When](#21-given-with-expect-when)
    * [2.1.1. Given](#211-given)
    * [2.1.2. With](#212-with)
    * [2.1.3. Expect](#213-expect)
    * [2.1.4. When](#214-when)
  * [2.2. Get, Post, Put, Patch, Delete, Request](#22-get-post-put-patch-delete-request)
    * [2.2.1. Get](#221-get)
    * [2.2.2. Post](#222-post)
    * [2.2.3. Put](#223-put)
    * [2.2.4. Patch](#224-patch)
    * [2.2.5. Delete](#225-delete)
    * [2.2.6. Request](#226-request)
* [3. Интерфейс RequestSender](#3-интерфейс-requestsender)
* [4. Интерфейс Response](#4-интерфейс-response)
* [5. Интерфейс ResponseBody<Response>](#5-интерфейс-responsebodyresponse)
  * [5.1. Вывод в консоль](#51-вывод-в-консоль)
    * [5.1.1. Peek](#511-peek)
    * [5.1.2. Print](#512-print)
* [6. Интерфейс ResponseBodyExtractionOptions](#6-интерфейс-responsebodyextractionoptions)
  * [6.1. Преобразование данных из тела запроса](#61-преобразование-данных-из-тела-запроса)
    * [6.1.1. As Class](#611-as-class)
    * [6.1.2. As Type](#612-as-type)
    * [6.1.3. As TypeRef](#613-as-typeref)
  * [6.2. Извлечение данных из тела запроса](#62-извлечение-данных-из-тела-запроса)
    * [6.2.1. Path](#621-path)
    * [6.2.2. JsonPath](#622-jsonpath)
    * [6.2.3. XmlPath](#623-xmlpath)
    * [6.2.4. HtmlPath](#624-htmlpath)
* [7. Интерфейс ResponseBodyData](#7-интерфейс-responsebodydata)
  * [7.1. Получение данных из тела запроса](#71-получение-данных-из-тела-запроса)
    * [7.1.1.](#711)
* [8. Интерфейс ResponseOptions](#8-интерфейс-responseoptions)
  * [8.1. Получение тела запроса](#81-получение-тела-запроса)
    * [8.1.1. Body](#811-body)
    * [8.1.2. ContentType](#812-contenttype)
  * [8.2. Куки](#82-куки)
    * [8.2.1. Cookie](#821-cookie)
    * [8.2.2. Cookies](#822-cookies)
    * [8.2.3. DetailedCookie](#823-detailedcookie)
    * [8.2.4. DetailedCookies](#824-detailedcookies)
  * [8.3. Заголовки](#83-заголовки)
    * [8.3.1. Header](#831-header)
    * [8.3.2. Headers](#832-headers)
  * [8.4. Статус](#84-статус)
    * [8.4.1. StatusCode](#841-statuscode)
    * [8.4.2. StatusLine](#842-statusline)
  * [8.5. Время](#85-время)
    * [8.5.1. Time](#851-time)
    * [8.5.2. TimeIn]()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
* []()
*
***

# 1. REST Assured

[![Содержание](https://img.shields.io/badge/-Содержание-66eeff)](#содержание)

***REST Assured*** — **Java** библиотека для тестирования **REST** сервисов, предоставляющая **DSL** в **BDD** стиле. 

Библиотека **REST Assured** интегрируется с любым фреймворком автоматизации, основанным на **Java**.

Это решение появилось более девяти лет назад и стало популярным из-за своей простоты и удобного функционала.

Ссылки:

* [REST Assured](https://rest-assured.io/)
* [REST Assured. Github](https://github.com/rest-assured/rest-assured)
* [REST Assured. Github. GettingStarted](https://github.com/rest-assured/rest-assured/wiki/GettingStarted)
* [REST Assured. Github. Usage Guide](https://github.com/rest-assured/rest-assured/wiki/Usage)
* [REST Assured. Javadoc](https://www.javadoc.io/doc/io.rest-assured/rest-assured/latest/index.html)

Ключевые слова **given**, **when** и **then** формируют запрос:

* **given** - условия (заголовки, параметры, тело запроса и т д)
* **when** – действие (отправка запроса с заданными условиями, методом и ендпоинтом запроса)
* **then** – проверка (проверка ответа)

Кроме этого, можно извлечь тело ответа в виде объекта типа **JsonPath** или **XmlPath**.

***

# 2. Класс RestAssured 

**RestAssured** - класс предоставляющий DSL.

Методы класса **RestAssured**:

[io/restassured : RestAssured](https://www.javadoc.io/doc/io.rest-assured/rest-assured/latest/io/restassured/RestAssured.html)

Далее рассмотрим основные методы.

## 2.1. Параметры запроса и ответа

| Тип                          | Метод                                                                | Описание                                                                                                                   | 
|------------------------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| static RequestSpecification  | given()                                                              | Параметры отправляемого запроса                                                                                            |
| static RequestSpecification  | given(RequestSpecification rqstSpec)                                 | Параметры отправляемого запроса на основе спецификации запроса                                                             |
| static RequestSender         | given(RequestSpecification rqstSpec, ResponseSpecification rspsSpec) | Параметры <br/>отправляемого запроса на основе спецификации запроса, <br/>получаемого ответа на основе спецификации ответа |
| static RequestSpecification  | with()                                                               | Параметры отправляемого запроса                                                                                            |
| static ResponseSpecification | expect()                                                             | Параметры получаемого ответа                                                                                               |
| static RequestSender         | when()                                                               | Отправка запроса                                                                                                           |

### 2.1.1. Метод given

*Пример*

```java
RestAssured
    // В given задаем спецификацию отправляемого запроса
    // URL, параметры, заголовки, тело запроса и т д
    .given().queryParam("name","Rick Sanchez")
    // В when отправляем запрос и получаем ответ
    .when().get("https://rickandmortyapi.com/api/character")
    // В then задаем спецификацию получаемого ответа (проверка)
    // Статус, заголовки, тело ответа и т д
    .then().statusCode(200);
```

### 2.1.2. Метод with

*Пример*

```java
RestAssured
    // В with задаем спецификацию отправляемого запроса
    // URL, параметры, заголовки, тело запроса и т д
    .with().queryParam("name","Rick Sanchez")
    // В when отправляем запрос и получаем ответ
    .when().get("https://rickandmortyapi.com/api/character")
    // В then задаем спецификацию получаемого ответа (проверка)
    // Статус, заголовки, тело ответа и т д
    .then().statusCode(200);
```

### 2.1.3. Метод expect

*Пример*

```java
RestAssured
    // В given задаем спецификацию отправляемого запроса
    // URL, параметры, заголовки, тело запроса и т д
    .given().queryParam("name","Rick Sanchez")
    // В expect задаем спецификацию получаемого ответа (проверка)
    // Статус, заголовки, тело ответа и т д
    .expect().statusCode(200)
    // В when отправляем запрос и получаем ответ
    .when().get("https://rickandmortyapi.com/api/character");
```

### 2.1.4. Метод when

*Пример*

```java
RestAssured
    // В given задаем спецификацию отправляемого запроса
    // URL, параметры, заголовки, тело запроса и т д
    .given().queryParam("name","Rick Sanchez")
    // В when отправляем запрос и получаем ответ
    .when().get("https://rickandmortyapi.com/api/character")
    // В then задаем спецификацию получаемого ответа (проверка)
    // Статус, заголовки, тело ответа и т д
    .then().statusCode(200);
```


## 2.2. Отправка HTTP запроса

| Тип             | Метод                                                     | Описание                                                                                     | 
|-----------------|-----------------------------------------------------------|----------------------------------------------------------------------------------------------|
| static Response | request(Method method)                                    | Отправка **HTTP** запроса по **path** (по умолчанию на **http://localhost:8080**)            |
| static Response | request(Method method, String path, Object... pathParams) | Отправка **HTTP** запроса по **path**                                                        |
| static Response | request(Method method, URI uri)                           | Отправка **HTTP** запроса по **uri**                                                         |
| static Response | request(Method method, URL url)                           | Отправка **HTTP** запроса по **url**                                                         |
| static Response | request(String method)                                    | Отправка **HTTP** запроса по **path** (по умолчанию на **http://localhost:8080**)            |
| static Response | request(String method, String path, Object... pathParams) | Отправка **HTTP** запроса по **path**                                                        |
| static Response | request(String method, URI uri)                           | Отправка **HTTP** запроса по **uri**                                                         |
| static Response | request(String method, URL url)                           | Отправка **HTTP** запроса по **url**                                                         |

*Пример*

```java
// RestAssured.requestSpecification - статическое поле, хранящее спецификацию запроса
// RequestSpecBuilder - класс билдер, для создания спецификации запроса
RestAssured.requestSpecification = new RequestSpecBuilder()
    .setBaseUri("https://restful-booker.herokuapp.com/booking")
    .build();
// Response - класс, хранящий ответ запроса
Response response = RestAssured.request("GET");
// Вывод ответа
response.prettyPrint();
// Проверка кода статуса ответа
response.then().statusCode(400);
```

## 2.3. Отправка HTTP запроса GET

| Тип             | Метод                                      | Описание                                                                  | 
|-----------------|--------------------------------------------|---------------------------------------------------------------------------|
| static Response | get()                                      | Отправка **HTTP** запроса **GET** по **path** (**http://localhost:8080**) |
| static Response | get(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **GET** по **path**                             |
| static Response | get(String path, Object... pathParams)     | Отправка **HTTP** запроса **GET** по **path**                             |
| static Response | get(URI uri)                               | Отправка **HTTP** запроса **GET** по **uri**                              |
| static Response | get(URL url)                               | Отправка **HTTP** запроса **GET** по **url**                              |

*Пример*

```java
// RestAssured.requestSpecification - статическое поле, хранящее спецификацию запроса
// RequestSpecBuilder - класс билдер, для создания спецификации запроса
RestAssured.requestSpecification = new RequestSpecBuilder()
    .setBaseUri("https://restful-booker.herokuapp.com")
    .build();
// Response - класс, хранящий ответ запроса
// Отправка HTTP запроса GET
Response response = RestAssured.get("/booking");
// Вывод ответа
response.prettyPrint();
// Проверка кода статуса ответа
response.then().statusCode(200);
```

## 2.4. Отправка HTTP запроса POST

| Тип             | Метод                                       | Описание                                                                   | 
|-----------------|---------------------------------------------|----------------------------------------------------------------------------|
| static Response | post()                                      | Отправка **HTTP** запроса **POST** по **path** (**http://localhost:8080**) |
| static Response | post(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **POST** по **path**                             |
| static Response | post(String path, Object... pathParams)     | Отправка **HTTP** запроса **POST** по **path**                             |
| static Response | post(URI uri)                               | Отправка **HTTP** запроса **POST** по **uri**                              |
| static Response | post(URL url)                               | Отправка **HTTP** запроса **POST** по **url**                              |

*Пример*

```java
// Тело запроса
String jsonString = "{\r\n" +
    "   \"username\" : \"admin\",\r\n" +
    "   \"password\" : \"password123\"\r\n" +
    "}";
// RestAssured.requestSpecification - статическое поле, хранящее спецификацию запроса
// RequestSpecBuilder - класс билдер, для создания спецификации запроса
RestAssured.requestSpecification = new RequestSpecBuilder()
    .setBaseUri("https://restful-booker.herokuapp.com")
    .setContentType(ContentType.JSON)
    .setBody(jsonString)
    .build();
// Response - класс, хранящий ответ запроса
// Отправка HTTP запроса POST
Response response = RestAssured.post("/auth");
// Вывод ответа
response.prettyPrint();
// Проверка кода статуса ответа
response.then().statusCode(200);
```

## 2.5. Отправка HTTP запроса PUT

| Тип             | Метод                                  | Описание                                                                                  | 
|-----------------|----------------------------------------|-------------------------------------------------------------------------------------------|
| static Response | put()                                  | Отправка **HTTP** запроса **PUT** по **path** (по умолчанию на **http://localhost:8080**) |
| static Response | put(String path, Object... pathParams) | Отправка **HTTP** запроса **PUT** по **path**                                             |
| static Response | put(URI uri)                           | Отправка **HTTP** запроса **PUT** по **uri**                                              |
| static Response | put(URL url)                           | Отправка **HTTP** запроса **PUT** по **url**                                              |

*Пример*

```java
// Тело запроса
String jsonString = "{\r\n" +
    "   \"firstname\" : \"John\",\r\n" +
    "   \"lastname\" : \"Johnes\",\r\n" +
    "   \"totalprice\" : 99999,\r\n" +
    "   \"depositpaid\" : true,\r\n" +
    "   \"bookingdates\" : {\r\n" +
    "       \"checkin\" : \"2022-01-01\",\r\n" +
    "       \"checkout\" : \"2024-01-01\"\r\n" +
    "   },\r\n" +
    "   \"additionalneeds\" : \"Breakfast\"\r\n" +
    "}";
// RestAssured.requestSpecification - статическое поле, хранящее спецификацию запроса
// RequestSpecBuilder - класс билдер, для создания спецификации запроса
// В addCookie нужно вставить токен из предыдущего запроса
RestAssured.requestSpecification = new RequestSpecBuilder()
    .setBaseUri("https://restful-booker.herokuapp.com")
    .addCookie("token", "9d2a2f311c14b1d")
    .setContentType(ContentType.JSON)
    .setBody(jsonString)
    .build();
// Response - класс, хранящий ответ запроса
// Отправка HTTP запроса PUT
Response response = RestAssured.put("/booking/1234");
// Вывод ответа
response.prettyPrint();
// Проверка кода статуса ответа
response.then().statusCode(200);
```

## 2.6. Отправка HTTP запроса PATCH

| Тип             | Метод                                        | Описание                                                                                    | 
|-----------------|----------------------------------------------|---------------------------------------------------------------------------------------------|
| static Response | patch()                                      | Отправка **HTTP** запроса **PATCH** по **path** (по умолчанию на **http://localhost:8080**) |
| static Response | patch(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **PATCH** по **path**                                             |
| static Response | patch(String path, Object... pathParams)     | Отправка **HTTP** запроса **PATCH** по **path**                                             |
| static Response | patch(URI uri)                               | Отправка **HTTP** запроса **PATCH** по **uri**                                              |
| static Response | patch(URL url)                               | Отправка **HTTP** запроса **PATCH** по **url**                                              |

*Пример*

```java
// Тело запроса
String jsonString = "{\r\n" +
    "    \"firstname\" : \"Jack\",\r\n" +
    "    \"lastname\" : \"Jackson\"\r\n" +
    "}";
// RestAssured.requestSpecification - статическое поле, хранящее спецификацию запроса
// RequestSpecBuilder - класс билдер, для создания спецификации запроса
// В addCookie нужно вставить токен из предыдущего запроса
RestAssured.requestSpecification = new RequestSpecBuilder()
    .setBaseUri("https://restful-booker.herokuapp.com")
    .addCookie("token", "9d2a2f311c14b1d")
    .setContentType(ContentType.JSON)
    .setBody(jsonString)
    .build();
// Response - класс, хранящий ответ запроса
// Отправка HTTP запроса PATCH
Response response = RestAssured.patch("/booking/1234");
// Вывод ответа
response.prettyPrint();
// Проверка кода статуса ответа
response.then().statusCode(200);
```

## 2.7. Отправка HTTP запроса DELETE

| Тип             | Метод                                         | Описание                                                                                     | 
|-----------------|-----------------------------------------------|----------------------------------------------------------------------------------------------|
| static Response | delete()                                      | Отправка **HTTP** запроса **DELETE** по **path** (по умолчанию на **http://localhost:8080**) |
| static Response | delete(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **DELETE** по **path**                                             |
| static Response | delete(String path, Object... pathParams)     | Отправка **HTTP** запроса **DELETE** по **path**                                             |
| static Response | delete(URI uri)                               | Отправка **HTTP** запроса **DELETE** по **uri**                                              |
| static Response | delete(URL url)                               | Отправка **HTTP** запроса **DELETE** по **url**                                              |

*Пример*

```java
// RestAssured.requestSpecification - статическое поле, хранящее спецификацию запроса
// RequestSpecBuilder - класс билдер, для создания спецификации запроса
// В addCookie нужно вставить токен из предыдущего запроса
RestAssured.requestSpecification = new RequestSpecBuilder()
    .setBaseUri("https://restful-booker.herokuapp.com")
    .addCookie("token", "9d2a2f311c14b1d")
    .build();
// Response - класс, хранящий ответ запроса
// Отправка HTTP запроса DELETE
Response response = RestAssured.delete("/booking/1234");
// Вывод ответа
response.prettyPrint();
// Проверка кода статуса ответа
response.then().statusCode(201);
```

***

# 3. Интерфейс RequestSender

**RequestSender** - интерфейс, содержащий методы для отправки **HTTP** запросов.

Методы класса **RequestSender**:

[io/restassured : RequestSender](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/specification/RequestSender.html)

Далее рассмотрим основные методы.

## 3.1. Отправка HTTP запроса

| Тип | Метод                                                     | Описание                                                                                     | 
|-----|-----------------------------------------------------------|----------------------------------------------------------------------------------------------|
| R   | request(Method method)                                    | Отправка **HTTP** запроса по **path** (по умолчанию на **http://localhost:8080**)            |
| R   | request(Method method, String path, Object... pathParams) | Отправка **HTTP** запроса по **path**                                                        |
| R   | request(Method method, URI uri)                           | Отправка **HTTP** запроса по **uri**                                                         |
| R   | request(Method method, URL url)                           | Отправка **HTTP** запроса по **url**                                                         |
| R   | request(String method)                                    | Отправка **HTTP** запроса по **path** (по умолчанию на **http://localhost:8080**)            |
| R   | request(String method, String path, Object... pathParams) | Отправка **HTTP** запроса по **path**                                                        |
| R   | request(String method, URI uri)                           | Отправка **HTTP** запроса по **uri**                                                         |
| R   | request(String method, URL url)                           | Отправка **HTTP** запроса по **url**                                                         |

*Пример*

Не **BDD** стиль.

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://restful-booker.herokuapp.com");

Response response = request.request("GET", "/booking");
ValidatableResponse valRes = response.then();
valRes.statusCode(200);
```

*Пример*

**BDD** стиль.

```java
RestAssured
    .given()
        .baseUri("https://restful-booker.herokuapp.com")
    .when()
        // Отправка HTTP запроса
        .request("GET", "/booking")
    .then()
        // Проверка кода статуса ответа
        .statusCode(200);
```

## 3.2. Отправка HTTP запроса GET

| Тип | Метод                                      | Описание                                                                  | 
|-----|--------------------------------------------|---------------------------------------------------------------------------|
| R   | get()                                      | Отправка **HTTP** запроса **GET** по **path** (**http://localhost:8080**) |
| R   | get(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **GET** по **path**                             |
| R   | get(String path, Object... pathParams)     | Отправка **HTTP** запроса **GET** по **path**                             |
| R   | get(URI uri)                               | Отправка **HTTP** запроса **GET** по **uri**                              |
| R   | get(URL url)                               | Отправка **HTTP** запроса **GET** по **url**                              |

*Пример*

Не **BDD** стиль.

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://restful-booker.herokuapp.com");

Response response = request.get("/booking");
ValidatableResponse valRes = response.then();
valRes.statusCode(200);
```

*Пример*

**BDD** стиль.

```java
RestAssured
    .given()
        .baseUri("https://restful-booker.herokuapp.com")
    .when()
        // Отправка HTTP запроса GET
        .get("/booking")
    .then()
        // Проверка кода статуса ответа
        .statusCode(200);
```

## 3.3. Отправка запроса POST

| Тип | Метод                                       | Описание                                                                   | 
|-----|---------------------------------------------|----------------------------------------------------------------------------|
| R   | post()                                      | Отправка **HTTP** запроса **POST** по **path** (**http://localhost:8080**) |
| R   | post(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **POST** по **path**                             |
| R   | post(String path, Object... pathParams)     | Отправка **HTTP** запроса **POST** по **path**                             |
| R   | post(URI uri)                               | Отправка **HTTP** запроса **POST** по **uri**                              |
| R   | post(URL url)                               | Отправка **HTTP** запроса **POST** по **url**                              |

*Пример*

Не **BDD** стиль.

```java
String jsonString = "{\r\n" +
    "   \"username\" : \"admin\",\r\n" +
    "   \"password\" : \"password123\"\r\n" +
    "}";

RequestSpecification request = RestAssured.given();
request.baseUri("https://restful-booker.herokuapp.com");
request.contentType(ContentType.JSON);
request.body(jsonString);

Response response = request.post("/auth");
ValidatableResponse validatableResponse = response.then();
validatableResponse.statusCode(200);
```

*Пример*

**BDD** стиль.

```java
String jsonString = "{\r\n" +
    "   \"username\" : \"admin\",\r\n" +
    "   \"password\" : \"password123\"\r\n" +
    "}";

RestAssured
	.given()
	    .baseUri("https://restful-booker.herokuapp.com")
	    .contentType(ContentType.JSON)
	    .body(jsonString)
	.when()
        // Отправка HTTP запроса POST
	    .post("/auth")
	.then()
        // Проверка кода статуса ответа
	    .statusCode(200);
```

## 3.4. Отправка запроса PUT

| Тип | Метод                                  | Описание                                                                                  | 
|-----|----------------------------------------|-------------------------------------------------------------------------------------------|
| R   | put()                                  | Отправка **HTTP** запроса **PUT** по **path** (по умолчанию на **http://localhost:8080**) |
| R   | put(String path, Object... pathParams) | Отправка **HTTP** запроса **PUT** по **path**                                             |
| R   | put(URI uri)                           | Отправка **HTTP** запроса **PUT** по **uri**                                              |
| R   | put(URL url)                           | Отправка **HTTP** запроса **PUT** по **url**                                              |

*Пример*

Не **BDD** стиль.

```java
String jsonString = "{\r\n" +
    "    \"firstname\" : \"John\",\r\n" +
    "    \"lastname\" : \"Johnes\",\r\n" +
    "    \"totalprice\" : 99999,\r\n" +
    "    \"depositpaid\" : true,\r\n" +
    "    \"bookingdates\" : {\r\n" +
    "        \"checkin\" : \"2022-01-01\",\r\n" +
    "        \"checkout\" : \"2024-01-01\"\r\n" +
    "    },\r\n" +
    "    \"additionalneeds\" : \"Breakfast\"\r\n"
    + "}";

RequestSpecification request = RestAssured.given();
request.contentType(ContentType.JSON);
// В cookie нужно вставить токен из предыдущего запроса
request.cookie("token", "9d2a2f311c14b1d");
request.baseUri("https://restful-booker.herokuapp.com");
request.body(jsonString);

Response response = request.put("/booking/1234");
ValidatableResponse validatableResponse = response.then();
validatableResponse.statusCode(200);
```

*Пример*

**BDD** стиль.

```java
String jsonString = "{\r\n" +
    "    \"firstname\" : \"John\",\r\n" +
    "    \"lastname\" : \"Johnes\",\r\n" +
    "    \"totalprice\" : 99999,\r\n" +
    "    \"depositpaid\" : true,\r\n" +
    "    \"bookingdates\" : {\r\n" +
    "        \"checkin\" : \"2022-01-01\",\r\n" +
    "        \"checkout\" : \"2024-01-01\"\r\n" +
    "    },\r\n" +
    "    \"additionalneeds\" : \"Breakfast\"\r\n"
    + "}";

RestAssured
	.given()
	    .baseUri("https://restful-booker.herokuapp.com")
        // В cookie нужно вставить токен из предыдущего запроса
	    .cookie("token", "9d2a2f311c14b1d")
	    .contentType(ContentType.JSON)
	    .body(jsonString)
	.when()
        // Отправка HTTP запроса PUT
	    .put("/booking/1234")
	.then()
        // Проверка кода статуса ответа
	    .statusCode(200);
```

## 3.5. Отправка запроса PATCH

| Тип | Метод                                        | Описание                                                                                    | 
|-----|----------------------------------------------|---------------------------------------------------------------------------------------------|
| R   | patch()                                      | Отправка **HTTP** запроса **PATCH** по **path** (по умолчанию на **http://localhost:8080**) |
| R   | patch(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **PATCH** по **path**                                             |
| R   | patch(String path, Object... pathParams)     | Отправка **HTTP** запроса **PATCH** по **path**                                             |
| R   | patch(URI uri)                               | Отправка **HTTP** запроса **PATCH** по **uri**                                              |
| R   | patch(URL url)                               | Отправка **HTTP** запроса **PATCH** по **url**                                              |

*Пример*

Не **BDD** стиль.

```java
String jsonString = "{\r\n" + 
        "    \"firstname\" : \"John\",\r\n" + 
        "    \"lastname\" : \"Johnes\"\r\n" +
        "}";

RequestSpecification request = RestAssured.given();
request.baseUri("https://restful-booker.herokuapp.com");
// В cookie нужно вставить токен из предыдущего запроса
request.cookie("token", "974c253452ba510");
request.contentType(ContentType.JSON);
request.body(jsonString);

Response response = request.patch("/booking/1234");
ValidatableResponse validatableResponse = response.then();
validatableResponse.statusCode(200);

```

*Пример*

**BDD** стиль.

```java
String jsonString = "{\r\n" + 
        "    \"firstname\" : \"John\",\r\n" + 
        "    \"lastname\" : \"Johnes\"\r\n" +
        "}";

RestAssured
	.given()
	    .baseUri("https://restful-booker.herokuapp.com")
        // В cookie нужно вставить токен из предыдущего запроса
	    .cookie("token", "e88375c0fde687a")
	    .contentType(ContentType.JSON)
	    .body(jsonString)
	.when()
        // Отправка HTTP запроса PATCH
	    .patch("/booking/1234")
	.then()
        // Проверка кода статуса ответа
	    .statusCode(200)
```

## 3.6. Отправка запроса DELETE

| Тип | Метод                                         | Описание                                                                                     | 
|-----|-----------------------------------------------|----------------------------------------------------------------------------------------------|
| R   | delete()                                      | Отправка **HTTP** запроса **DELETE** по **path** (по умолчанию на **http://localhost:8080**) |
| R   | delete(String path, Map<String,?> pathParams) | Отправка **HTTP** запроса **DELETE** по **path**                                             |
| R   | delete(String path, Object... pathParams)     | Отправка **HTTP** запроса **DELETE** по **path**                                             |
| R   | delete(URI uri)                               | Отправка **HTTP** запроса **DELETE** по **uri**                                              |
| R   | delete(URL url)                               | Отправка **HTTP** запроса **DELETE** по **url**                                              |

*Пример*

Не **BDD** стиль.

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://restful-booker.herokuapp.com");
// В cookie нужно вставить токен из предыдущего запроса
request.cookie("token", "f4e70e7b9bbcd05");
        
Response response = request.delete("/booking/1234");
ValidatableResponse validatableResponse = response.then();
validatableResponse.statusCode(201);

RequestSpecification getRequestSpec = RestAssured.given();
getRequestSpec.baseUri("https://restful-booker.herokuapp.com");

Response res = getRequestSpec.get("/booking/1234");
ValidatableResponse valRes = res.then();
valRes.statusCode(404);
```

*Пример*

**BDD** стиль.

```java
RestAssured
	.given()
	    .baseUri("https://restful-booker.herokuapp.com")
        // В cookie нужно вставить токен из предыдущего запроса
	    .cookie("token", "f7dddb1093eab19")
	.when()
        // Отправка HTTP запроса DELETE
	    .delete("/booking/1234")
	.then()
        // Проверка кода статуса ответа
	    .statusCode(201);

RestAssured
	.given()
	    .baseUri("https://restful-booker.herokuapp.com")
	.when()
        // Отправка HTTP запроса GET
	    .get("/booking/1234")
	.then()
        // Проверка кода статуса ответа
	    .statusCode(404);
```

***

# 4. Интерфейс Response

***Response*** - интерфейс, содержащий методы для обработки **HTTP** ответа.

Методы интерфейса **Response**: [io/restassured : Response](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/Response.html)

Интерфейс **Response** наследует следующие интерфейсы:

* **ResponseBody<Response>**

Методы интерфейса **ResponseBody<Response>**: [io/restassured : ResponseBody](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseBody.html)

* **ResponseBodyData**

Методы интерфейса **ResponseBodyData**: [io/restassured : ResponseBodyData](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseBodyData.html)

* **ResponseBodyExtractionOptions**

Методы интерфейса **ResponseBodyExtractionOptions**: [io/restassured : ResponseBodyExtractionOptions](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseBodyExtractionOptions.html)

* **ResponseOptions<Response>**

Методы интерфейса **ResponseOptions**: [io/restassured : ResponseOptions](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseOptions.html)

* **Validatable<ValidatableResponse,Response>**

***

# 4.1. Вывод в консоль ответа

| Тип    | Метод         | Описание                                                           |
|--------|---------------|--------------------------------------------------------------------|
| T      | peek()        | Вывод в консоль в не отфоратированном виде                         |
| T      | prettyPeek()  | Вывод в консоль в отфоратированном виде                            |
| String | print()       | Вывод в консоль в не отфоратированном виде и возврат в виде строки |
| String | prettyPrint() | Вывод в консоль в отфоратированном виде и возврат в виде строки    |

### 4.1.1. Метод peek

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseURI = "https://rickandmortyapi.com/api/";
request.queryParam("name","Rick Sanchez");
// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
// Вывод в консоль в не отфоратированном виде 
response.peek();
```

### 4.1.2. Метод prettyPeek

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseURI = "https://rickandmortyapi.com/api/";
request.queryParam("name","Rick Sanchez");
// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
// Вывод в консоль в отфоратированном виде
response.prettyPeek();
```

### 4.1.3. Метод print

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseURI = "https://rickandmortyapi.com/api/";
request.queryParam("name","Rick Sanchez");
// Response - класс, хранящий ответ запроса
Response response = request.get(/character");
// Вывод в консоль в не отфоратированном виде и возврат в виде строки  
String printString = response.print();
System.out.println("\r\nprintString: " + printString);
```

### 4.1.4. Метод prettyPrint

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseURI = "https://rickandmortyapi.com/api/";
request.queryParam("name","Rick Sanchez");
// Response - класс, хранящий ответ запроса
Response response = request.get(/character");
// Вывод в консоль в отфоратированном виде и возврат в виде строки  
String prettyPrintString = response.prettyPrint();
System.out.println("\r\nprettyPrintString: " + prettyPrintString);
```

## 4.2. Преобразование данных из тела ответа

| Тип   | Метод                                         | Описание                                                                        |
|-------|-----------------------------------------------|---------------------------------------------------------------------------------|
| <T> T | as(Class<T> cls)                              | Преобразование тела ответа в **Java объект**                                    |
| <T> T | as(Class<T> cls, ObjectMapper mapper)         | Преобразование тела ответа в **Java объект** с помощью маппера                  |
| <T> T | as(Class<T> cls, ObjectMapperType mapperType) | Преобразование тела ответа в **Java объект** с помощью маппера конкретного типа |
| <T> T | as(Type cls)                                  | Преобразование тела ответа в **Java тип**                                       |
| <T> T | as(Type cls, ObjectMapper mapper)             | Преобразование тела ответа в **Java тип** с помощью маппера                     |
| <T> T | as(Type cls, ObjectMapperType mapperType)     | Преобразование тела ответа в **Java тип** с помощью маппера конкретного типа    |
| <T> T | as(TypeRef<T> typeRef)                        | Преобразование тела ответа дженерик тип                                         |

### 4.2.1. Метод as Class

*Пример*

Java объект

```java
public class Message {
    private String message;

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }
}
```

Ответ

```json
{
  "message": "My message"
}
```

Преобразование

```java
Message message = get("/message").as(Message.class);
```

### 4.2.2. Метод as Type

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
RickSanchez rickSanchez = response.as(RickSanchez.class);
System.out.println("rickSanchez: " + rickSanchez.toString());
```

## 4.3. Извлечение данных из тела ответа

| Тип      | Метод                                        | Описание                                                                                      |
|----------|----------------------------------------------|-----------------------------------------------------------------------------------------------|
| <T> T    | path(String path, String... arguments)       | Извлечение данных из тела ответа с помощью **JsonPath** или **XmlPath**                       |
| JsonPath | jsonPath()                                   | Извлечение данных из тела ответа с помощью **JsonPath**                                       |
| JsonPath | jsonPath(JsonPathConfig config)              | Извлечение данных из тела ответа с помощью **JsonPath**                                       |
| XmlPath  | xmlPath()                                    | Извлечение данных из тела ответа с помощью **XmlPath**                                        |
| XmlPath  | xmlPath(XmlPathConfig config)                | Извлечение данных из тела ответа с помощью **XmlPath**                                        |
| XmlPath  | xmlPath(CompatibilityMode compatibilityMode) | Извлечение данных из тела ответа с помощью **XmlPath** и **XmlPath.CompatibilityMode**        |
| XmlPath  | htmlPath()                                   | Извлечение данных из тела ответа с помощью **XmlPath** и **XmlPath.CompatibilityMode = HTML** |

### 4.3.1. Метод path

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String name = response.path("results[0].name");
System.out.println("name: " + name);
```

### 4.3.2. Метод jsonPath

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String name = response.jsonPath().getString("results[0].name");
System.out.println("name: " + name);
```

### 4.3.3. Метод xmlPath

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();

// Response - класс, хранящий ответ запроса
Response response = request.get("https://chercher.tech/sample/api/books.xml");
String book = response.xmlPath().getString("bookstore.book.title");
System.out.println("book: " + book);
```

### 4.3.4. Метод htmlPath

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();

// Response - класс, хранящий ответ запроса
Response response = request.get("https://github.com/");
String title = response.htmlPath().getString("html.head.title");
System.out.println("title: " + title);
```

## 4.4. Получение данных из тела ответа

| Тип         | Метод            | Описание                                                      |
|-------------|------------------|---------------------------------------------------------------|
| byte[]      | asByteArray()    | Получение данных из тела ответа в **byte array**              |
| InputStream | asInputStream()  | Получение данных из тела ответа в **input stream**            |
| String      | asPrettyString() | Получение данных из тела ответа в **pretty formatted string** |
| String      | asString()       | Получение данных из тела ответа в **string**                  |

### 4.4.1. Метод asByteArray

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
byte[] asByteArray = response.asByteArray();
System.out.println("asByteArray length: " + asByteArray.length);
```

### 4.4.2. Метод asPrettyString

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String asPrettyString = response.asPrettyString();
System.out.println("asPrettyString: " + asPrettyString);
```

## 4.5. Заголовки ответа

| Тип     | Метод                  | Описание                             |
|---------|------------------------|--------------------------------------|
| String  | header(String name)    | Получение заголовка ответа           |
| String  | getHeader(String name) | Получение заголовка ответа           |
| Headers | headers()              | Получение всех заголовков ответа     |
| Headers | getHeaders()           | Получение всех заголовков ответа     |
| String  | contentType()          | Получение типа контента тела запроса |
| String  | getContentType()       | Получение типа контента тела запроса |

### 4.5.1. Метод header

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String header  = response.header("Date");
System.out.println("header: " + header);
```

### 4.5.2. Метод headers

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
Headers headers  = response.headers();
System.out.println("headers: " + headers.toString());
```

### 4.5.3. Метод contentType

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String contentType = response.contentType();
System.out.println("contentType: " + contentType);
```

## 4.6. Тело ответа

| Тип          | Метод     | Описание               |
|--------------|-----------|------------------------|
| ResponseBody | body()    | Получение тела запроса |
| ResponseBody | getBody() | Получение тела запроса |

### 4.6.1. Метод body

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
ResponseBody body = response.body();
System.out.println("body: " + body.asPrettyString());
```

## 4.7. Куки ответа

| Тип                | Метод                          | Описание                |
|--------------------|--------------------------------|-------------------------|
| String             | cookie(String name)            | Получение куки по имени |
| String             | getCookie(String name)         | Получение куки по имени |
| Map<String,String> | cookies()                      | Получение всех куки     |
| Map<String,String> | getCookies()                   | Получение всех куки     |
| Cookie             | detailedCookie(String name)    | Получение куки по имени |
| Cookie             | getDetailedCookie(String name) | Получение куки по имени |
| Cookies            | detailedCookies()              | Получение всех куки     |
| Cookies            | getDetailedCookies()           | Получение всех куки     |

### 4.7.1. Метод cookie

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String cookie = response.cookie("Cookie 1");
System.out.println("cookie: " + cookie);
```

### 4.7.2. Метод cookies

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
Map<String,String> cookies = response.cookies();
for(Map.Entry<String, String> entry : cookies.entrySet()) {
   System.out.println(
           "key: " + entry.getKey() + 
           "value: " + entry.getValue()
   );
}
```

### 4.7.3. Метод detailedCookie

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
Cookie detailedCookie  = response.detailedCookie("Cookie 1");
System.out.println("detailedCookie: " + detailedCookie.toString());
```

### 4.7.4. Метод detailedCookies

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
Cookies detailedCookies  = response.detailedCookies();
System.out.println("detailedCookies: " + detailedCookies.toString());
```

## 4.8. Статус ответа

| Тип    | Метод           | Описание                      | 
|--------|-----------------|-------------------------------|
| int    | statusCode()    | Получение кода статуса ответа |
| int    | getStatusCode() | Получение кода статуса ответа |
| String | statusLine()    | Получение статуса ответа      |
| String | getStatusLine() | Получение статуса ответа      |

### 4.8.1. Метод statusCode

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
int statusCode  = response.statusCode();
System.out.println("statusCode: " + statusCode);
```

### 4.8.2. Метод statusLine

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
String statusLine  = response.statusLine();
System.out.println("statusLine: " + statusLine);
```

## 4.9. Время выполнения запроса

| Тип  | Метод                        | Описание                                                                   |
|------|------------------------------|----------------------------------------------------------------------------|
| long | time()                       | Получение времени выполнения запроса в миллисекундах                       |
| long | getTime()                    | Получение времени выполнения запроса в миллисекундах                       |
| long | timeIn(TimeUnit timeUnit)    | Получение времени выполнения запроса в заданных единицах измерения времени |
| long | getTimeIn(TimeUnit timeUnit) | Получение времени выполнения запроса в заданных единицах измерения времени |

### 4.9.1. Метод time

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
long time  = response.time();
System.out.println("time: " + time);
```

## 4.9.2. Метод timeIn

*Пример*

```java
// RequestSpecification - класс спецификация запроса
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/");
request.queryParam("name","Rick Sanchez");

// Response - класс, хранящий ответ запроса
Response response = request.get("/character");
long timeIn  = response.timeIn(TimeUnit.MILLISECONDS);
System.out.println("timeIn: " + timeIn);
```

***

# 5. Интерфейс RequestSpecification

**RequestSpecification** - интерфейс, содержащий методы для   .

Методы класса **RequestSpecification**:

[io/restassured : RequestSpecification](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/specification/RequestSpecification.html)

Далее рассмотрим основные методы.

## 5.1. Синтаксический сахар

| Тип                  | Метод     | Описание             |
|----------------------|-----------|----------------------|
| RequestSpecification | given()   | Синтаксический сахар |
| RequestSpecification | with()    | Синтаксический сахар |
| RequestSpecification | when()    | Синтаксический сахар |
| RequestSpecification | that()    | Синтаксический сахар |
| RequestSpecification | and()     | Синтаксический сахар |
| RequestSpecification | request() | Синтаксический сахар |

### 5.1.1. Метод given

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.given().baseUri("https://rickandmortyapi.com/api");
request.given().basePath("/character");
request.given().queryParam("name","Rick Sanchez");

Response response = request.get();
response.prettyPrint();
```

### 5.1.2. Метод with

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.with().baseUri("https://rickandmortyapi.com/api");
request.with().basePath("/character");
request.with().queryParam("name","Rick Sanchez");

Response response = request.get();
response.prettyPrint();
```

### 5.1.3. Метод when

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

Response response = request.when().get();
response.prettyPrint();
```

### 5.1.4. Метод that

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.that().baseUri("https://rickandmortyapi.com/api");
request.that().basePath("/character");
request.that().queryParam("name","Rick Sanchez");

Response response = request.get();
response.prettyPrint();
```

### 5.1.5. Метод and

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.and().basePath("/character");
request.and().queryParam("name","Rick Sanchez");

Response response = request.get();
response.prettyPrint();
```

## 5.2. Спецификация ответа

| Тип                   | Метод      | Описание            |
|-----------------------|------------|---------------------|
| ResponseSpecification | then()     | Спецификация ответа |
| ResponseSpecification | expect()   | Спецификация ответа |
| ResponseSpecification | response() | Спецификация ответа |

### 5.2.1. Метод then

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

ResponseSpecification response = request.then();
response.statusCode(200);
response.request().get().prettyPrint();
```

### 5.2.2. Метод expect

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

ResponseSpecification response = request.expect();
response.statusCode(200);
response.request().get().prettyPrint();
```

### 5.2.3. Метод response

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

ResponseSpecification response = request.response();
response.statusCode(200);
response.request().get().prettyPrint();
```

## 5.3. Спецификация логирования

| Тип                     | Метод | Описание                 |
|-------------------------|-------|--------------------------|
| RequestLogSpecification | log() | Спецификация логирования |

### 5.3.1. Метод log

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.log().method();
request.log().params();
request.log().body();

Response response = request.get();
response.prettyPrint();
```

## 5.4. Спецификация запроса

| Тип                   | Метод                            | Описание             |
|-----------------------|----------------------------------|----------------------|
| RequestSpecification  | spec(RequestSpecification spec)  | Спецификация запроса |
| RequestSpecification  | port(int port)                   | Порт                 |
| RequestSpecification  | baseUri(String baseUri)          | Базовый URL          |
| RequestSpecification  | basePath(String basePath)        | Базовый путь         |
| RequestSpecification  | config(RestAssuredConfig config) | Конфигурация         |
| RedirectSpecification | redirects()                      | Редирект             |

### 5.4.1. Метод spec

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.spec(new RequestSpecBuilder()
    .setBaseUri("https://rickandmortyapi.com/api")
    .setBasePath("/character")
    .addQueryParam("name","Rick Sanchez")
    .build());
request.log().uri();
request.log().params();

Response response = request.get();
response.prettyPrint();
```

### 5.4.2. Метод baseUri

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api/character");
request.queryParam("name","Rick Sanchez");
request.log().uri();

Response response = request.get();
response.prettyPrint();
```

### 5.4.3. Метод basePath

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.log().uri();

Response response = request.get();
response.prettyPrint();
```

## 5.5. Установка заголовков запроса

| Тип                  | Метод                                                      | Описание                                                                    |
|----------------------|------------------------------------------------------------|-----------------------------------------------------------------------------|
| RequestSpecification | header(Header header)                                      | Установка заголовка запроса. Объект класса **Header**                       | 
| RequestSpecification | header(String name, Object value, Object... values)        | Установка заголовка запроса. Название заголовка и набор значений            | 
| RequestSpecification | headers(Headers headers)                                   | Установка заголовков запроса. Объект класса **Headers**                     | 
| RequestSpecification | headers(Map<String,?> nameValues)                          | Установка заголовков запроса. Словарь из пар (название заголовка, значение) | 
| RequestSpecification | headers(String name1, Object value1, Object... nameValues) | Установка заголовков запроса. Пары (название заголовка, значение)           |
| RequestSpecification | accept(ContentType contentType)                            | Установка заголовка запроса **Accept**. Объект класса **ContentType**       | 
| RequestSpecification | accept(String mediaTypes)                                  | Установка заголовка запроса **Accept**. Тип контента                        |
| RequestSpecification | contentType(ContentType contentType)                       | Установка заголовка запроса **ContentType**. Объект класса **ContentType**  | 
| RequestSpecification | contentType(String contentType)                            | Установка заголовка запроса **ContentType**. Тип контента                   | 
| RequestSpecification | noContentType()                                            | Без установки заголовка запроса **ContentType**                             | 

### 5.5.1. Метод header

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.header("headerName", "headerValue");
request.log().headers();

Response response = request.get();
response.prettyPrint();
```

### 5.5.2. Метод headers

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.headers(
    "headerName1", "headerValue1",
    "headerName2", "headerValue2"
);
request.log().headers();

Response response = request.get();
response.prettyPrint();
```

### 5.5.3. Метод accept

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.accept(ContentType.JSON);
request.log().headers();

Response response = request.get();
response.prettyPrint();
```

### 5.5.4. Метод contentType

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.contentType(ContentType.JSON);
request.log().headers();

Response response = request.get();
response.prettyPrint();
```

## 5.6. Установка параметров запроса

| Тип                  | Метод                                                     | Описание                                                                    |
|----------------------|-----------------------------------------------------------|-----------------------------------------------------------------------------|
| RequestSpecification | param(String name, Collection<?> values)                  | Установка параметра запроса. Название параметра и набор значений            | 
| RequestSpecification | param(String name, Object... values)                      | Установка параметра запроса. Название параметра и набор значений            | 
| RequestSpecification | params(Map<String,?> nameValues)                          | Установка параметров запроса. Словарь из пар (название параметра, значение) | 
| RequestSpecification | params(String name1, Object value1, Object... nameValues) | Установка параметров запроса. Пары (название параметра, значение)           | 

### 5.6.1. Метод param

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.param("name","Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.get();
response.prettyPrint();
```

### 5.6.2. Метод params

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.params("name","Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.get();
response.prettyPrint();
```

## 5.7. Установка параметров пути запроса

| Тип                  | Метод                                                         | Описание                                                                                      |
|----------------------|---------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| RequestSpecification | pathParam(String name, Object value)                          | Установка параметра пути запроса. Название параметра пути запроса и значение                  | 
| RequestSpecification | pathParams(Map<String,?> nameValues)                          | Установка параметров пути запроса. Словарь из пар (название параметра пути запроса, значение) | 
| RequestSpecification | pathParams(String name1, Object value1, Object... nameValues) | Установка параметров пути запроса. Пары (название параметра пути запроса, значение)           | 

### 5.7.1. Метод pathParam

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.pathParam("method", "character");
request.queryParam("name","Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.get("{method}");
response.prettyPrint();
```

### 5.7.2. Метод pathParams

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.pathParams("method", "character");
request.queryParam("name","Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.get("{method}");
response.prettyPrint();
```

## 5.8. Установка параметров строки запроса

| Тип                  | Метод                                                          | Описание                                                                                          |
|----------------------|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| RequestSpecification | queryParam(String name, Collection<?> values)                  | Установка параметра строки запроса. Название параметра строки запроса и набор значений            | 
| RequestSpecification | queryParam(String name, Object... values)                      | Установка параметра строки запроса. Название параметра строки запроса и набор значений            | 
| RequestSpecification | queryParams(Map<String,?> nameValues)                          | Установка параметров строки запроса. Словарь из пар (название параметра строки запроса, значение) | 
| RequestSpecification | queryParams(String name1, Object value1, Object... nameValues) | Установка параметров строки запроса. Пары (название параметра строки запроса, значение)           | 

### 5.8.1. Метод queryParam

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.get();
response.prettyPrint();
```

### 5.8.2. Метод queryParams

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParams("name","Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.get();
response.prettyPrint();
```

## 5.9. Установка параметров формы

| Тип                  | Метод                                                          | Описание                                                                        |
|----------------------|----------------------------------------------------------------|---------------------------------------------------------------------------------|
| RequestSpecification | formParam(String name, Collection<?> values)                   | Установка параметра формы. Название параметра формы и набор значений            | 
| RequestSpecification | formParam(String name, Object... values)                       | Установка параметра формы. Название параметра формы и набор значений            | 
| RequestSpecification | formParams(Map<String,?> nameValues)                           | Установка параметров формы. Словарь из пар (название параметра формы, значение) | 
| RequestSpecification | formParams(String name1, Object value1, Object... nameValues)  | Установка параметров формы. Пары (название параметра формы, значение)           | 

### 5.9.1. Метод formParam

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.formParam("name", "Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.post();
response.prettyPrint();
```

### 5.9.2. Метод formParams

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.formParams("name", "Rick Sanchez");
request.log().uri();
request.log().params();

Response response = request.post();
response.prettyPrint();
```

## 5.10. Установка тела запроса

| Тип                  | Метод                                            | Описание                                     |
|----------------------|--------------------------------------------------|----------------------------------------------|
| RequestSpecification | body(byte[] body)                                | Установка тела запроса. Массив байтов        | 
| RequestSpecification | body(File body)                                  | Установка тела запроса. Файл                 | 
| RequestSpecification | body(InputStream body)                           | Установка тела запроса. Входной поток данных | 
| RequestSpecification | body(Object object)                              | Установка тела запроса. Объект               | 
| RequestSpecification | body(Object object, ObjectMapper mapper)         | Установка тела запроса. Объект и маппер      | 
| RequestSpecification | body(Object object, ObjectMapperType mapperType) | Установка тела запроса. Объект и маппер      | 
| RequestSpecification | body(String body)                                | Установка тела запроса. Строка               | 

### 5.10.1. Метод body

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.body("{\"name\" : \"Rick Sanchez\"}");
request.log().uri();
request.log().params();

Response response = request.post();
response.prettyPrint();
```

## 5.11. Установка загружаемых данных

| Тип                  | Метод                                                                               | Описание                                                                   |
|----------------------|-------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
| RequestSpecification | multiPart(File file)                                                                | Установка загружаемых данных. Файл                                         | 
| RequestSpecification | multiPart(MultiPartSpecification multiPartSpecification)                            | Установка загружаемых данных. Спецификация загружаемых данных              | 
| RequestSpecification | multiPart(String controlName, File file)                                            | Установка загружаемых данных. Название                                     | 
| RequestSpecification | multiPart(String controlName, File file, String mimeType)                           | Установка загружаемых данных. Файл и **MIME** тип                          | 
| RequestSpecification | multiPart(String controlName, Object object)                                        | Установка загружаемых данных. Объект                                       | 
| RequestSpecification | multiPart(String controlName, Object object, String mimeType)                       | Установка загружаемых данных. Объект и **MIME** тип                        | 
| RequestSpecification | multiPart(String controlName, String contentBody)                                   | Установка загружаемых данных. Контент в виде строки                        | 
| RequestSpecification | multiPart(String controlName, String fileName, byte[] bytes)                        | Установка загружаемых данных. Название файла и массив байт                 | 
| RequestSpecification | multiPart(String controlName, String fileName, byte[] bytes, String mimeType)       | Установка загружаемых данных. Название файла, массив байт и **MIME** тип   | 
| RequestSpecification | multiPart(String controlName, String fileName, InputStream stream)                  | Установка загружаемых данных. Название файла, входной поток                | 
| RequestSpecification | multiPart(String controlName, String fileName, InputStream stream, String mimeType) | Установка загружаемых данных. Название файла, входной поток и **MIME** тип | 
| RequestSpecification | multiPart(String controlName, String filename, Object object, String mimeType)      | Установка загружаемых данных. Название файла, объект и **MIME** тип        | 
| RequestSpecification | multiPart(String controlName, String contentBody, String mimeType)                  | Установка загружаемых данных. Контент в виде строки и **MIME** тип         | 

### 5.11.1. Метод multiPart

*Пример*

```java

```

## 5.12. Установка куки

| Тип                  | Метод                                                          | Описание                                                 |
|----------------------|----------------------------------------------------------------|----------------------------------------------------------|
| RequestSpecification | cookie(Cookie cookie)                                          | Установка куки. Класс **Cookie**                         | 
| RequestSpecification | cookie(String name)                                            | Установка куки. Название куки                            | 
| RequestSpecification | cookie(String name, Object value, Object... values)            | Установка куки. Название куки и набор значений           | 
| RequestSpecification | cookies(Cookies cookies)                                       | Установка куки. Класс **Cookies**                        | 
| RequestSpecification | cookies(Map<String,?> cookies)                                 | Установка куки. Словарь из пар (название куки, значение) | 
| RequestSpecification | cookies(String fstName, Object fstValue, Object... nameValues) | Установка куки. Пары (название куки, значение)           | 

### 5.12.1. Метод cookie

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.cookie("name", "Rick Sanchez");
request.log().uri();
request.log().cookies();

Response response = request.get();
response.prettyPrint();
```

### 5.12.2. Метод cookies

*Пример*

```java
RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");
request.cookies("name1", "Rick", "name2", "Sanchez");
request.log().uri();
request.log().cookies();

Response response = request.get();
response.prettyPrint();
```

***

# 6. Интерфейс ResponseSpecification

**ResponseSpecification** - интерфейс, содержащий методы для   .

Методы класса **ResponseSpecification**:

[io/restassured : ResponseSpecification](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/specification/ResponseSpecification.html)

Далее рассмотрим основные методы.

## 6.1. Синтаксический сахар

| Тип                   | Метод      | Описание             |
|-----------------------|------------|----------------------|
| ResponseSpecification | expect()   | Синтаксический сахар |
| ResponseSpecification | then()     | Синтаксический сахар |
| ResponseSpecification | that()     | Синтаксический сахар |
| ResponseSpecification | and()      | Синтаксический сахар |
| ResponseSpecification | response() | Синтаксический сахар |

### 6.1.1. Метод expect

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.expect().statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.1.2. Метод then

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.then().statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.1.3. Метод that

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.that().statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.1.4. Метод and

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusCode(500);
response.and().contentType(ContentType.MULTIPART);
response.and().header("name", "Sanchez");

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.2. Спецификация запроса

| Тип                  | Метод     | Описание             |
|----------------------|-----------|----------------------|
| RequestSpecification | given()   | Спецификация запроса |
| RequestSpecification | with()    | Спецификация запроса |
| RequestSpecification | request() | Спецификация запроса |

### 6.2.1. Метод given

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusCode(500);

RequestSpecification request = response.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.2.2. Метод with

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusCode(500);

RequestSpecification request = response.with();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.2.3. Метод request

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusCode(500);

RequestSpecification request = response.request();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.3. Спецификация логирования

| Тип                      | Метод                          | Описание                 |
|--------------------------|--------------------------------|--------------------------|
| ResponseLogSpecification | log()                          | Спецификация логирования |
| ResponseSpecification    | logDetail(LogDetail logDetail) | Спецификация логирования |

### 6.3.1. Метод log

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.log().ifError();
response.statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.3.2. Метод logDetail

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.logDetail(LogDetail.ALL);
response.statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.4. Спецификация ответа

| Тип                   | Метод                            | Описание                                  |
|-----------------------|----------------------------------|-------------------------------------------|
| ResponseSpecification | spec(ResponseSpecification spec) | Спецификация ответа                       |
| Response              | validate(Response response)      | Валидация ответа по заданной спецификации |

### 6.4.1. Метод spec

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.spec(new ResponseSpecBuilder()
    .expectStatusCode(500)
    .expectContentType(ContentType.MULTIPART)
    .expectHeader("name", "Sanchez")
    .build());

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.4.2. Метод validate

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

response.validate(request.get());
```

## 6.5. Проверка заголовков ответа

| Тип                       | Метод                                                                            | Описание                                                                  |
|---------------------------|----------------------------------------------------------------------------------|---------------------------------------------------------------------------|
| <T> ResponseSpecification | header(String name, Function<String,T> mapFunc, Matcher<? super T> valueMatcher) | Проверка заголовка ответа. Название заголовка и матчер значений           |
| ResponseSpecification     | header(String name, Matcher<?> valueMatcher)                                     | Проверка заголовка ответа. Название заголовка и матчер значений           |
| ResponseSpecification     | header(String name, String value)                                                | Проверка заголовка ответа. Название заголовка и значение                  |
| ResponseSpecification     | headers(Map<String,?> nameValues)                                                | Проверка заголовков ответа. Словарь из пар (название заголовка, значение) |
| ResponseSpecification     | headers(String name1, Object value1, Object... nameValues)                       | Проверка заголовков ответа. Пары (название заголовка, значение)           |
| ResponseSpecification     | contentType(ContentType contentType)                                             | Проверка заголовка ответа **ContentType**. Объект класса **ContentType**  |
| ResponseSpecification     | contentType(Matcher<? super String> contentType)                                 | Проверка заголовка ответа **ContentType**. Матчер контента                |
| ResponseSpecification     | contentType(String contentType)                                                  | Проверка заголовка ответа **ContentType**. Тип контента                   |

### 6.5.1. Метод header

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.header("name","Rick Sanchez");

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.5.2. Метод headers

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.headers("name","Rick Sanchez");

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.5.3. Метод contentType

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.contentType(ContentType.MULTIPART);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.6. Проверка статуса ответа

| Тип                   | Метод                                           | Описание                                           |
|-----------------------|-------------------------------------------------|----------------------------------------------------|
| ResponseSpecification | statusCode(int statusCode)                      | Проверка кода статуса ответа. Значение кода ответа |
| ResponseSpecification | statusCode(Matcher<? super Integer> statusCode) | Проверка кода статуса ответа. Матчер кода ответа   |
| ResponseSpecification | statusLine(Matcher<? super String> statusLine)  | Проверка статуса ответа. Матчер статуса ответа     |
| ResponseSpecification | statusLine(String statusLine)                   | Проверка статуса ответа. Статус ответа             |

### 6.6.1. Метод statusCode

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusCode(500);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.6.2. Метод statusLine

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.statusLine("HTTP/1.1 500 OK");

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.7. Проверка тела ответа

| Тип                   | Метод                                                                                  | Описание                                          |
|-----------------------|----------------------------------------------------------------------------------------|---------------------------------------------------|
| ResponseSpecification | body(List<Argument> arguments, Matcher matcher, Object... keyMatcherPairs)             | Проверка тела ответа. Набор аргументов и матчеров |
| ResponseSpecification | body(Matcher<?> matcher, Matcher<?>... matchers)                                       | Проверка тела ответа. Матчеры                     |
| ResponseSpecification | body(String key, List<Argument> arguments, Matcher matcher, Object... keyMatcherPairs) | Проверка тела ответа. Ключ и матчеры              |
| ResponseSpecification | body(String path, Matcher<?> matcher, Object... keyMatcherPairs)                       | Проверка тела ответа. путь и матчеры              |

### 6.7.1. Метод body

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.body("results[0].name", equalTo("Rick Zanchez"));

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.8. Проверка времени ответа

| Тип                   | Метод                                          | Описание                                          |
|-----------------------|------------------------------------------------|---------------------------------------------------|
| ResponseSpecification | time(Matcher<Long> matcher)                    | Проверка времени ответа. Матчер                   |
| ResponseSpecification | time(Matcher<Long> matcher, TimeUnit timeUnit) | Проверка времени ответа. Матчер и единицы времени |

### 6.8.1. Метод time

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.time( equalTo(10L), TimeUnit.DAYS);

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.9. Проверка куки

| Тип                   | Метод                                                            | Описание                                                |
|-----------------------|------------------------------------------------------------------|---------------------------------------------------------|
| ResponseSpecification | cookie(String name)                                              | Проверка куки. Название куки                            |
| ResponseSpecification | cookie(String name, DetailedCookieMatcher detailedCookieMatcher) | Проверка куки. Название куки и матчер                   |
| ResponseSpecification | cookie(String name, Matcher<?> valueMatcher)                     | Проверка куки. Название куки и матчер                   |
| ResponseSpecification | cookie(String name, Object value)                                | Проверка куки. Название куки и значение                 |
| ResponseSpecification | cookies(Map<String,?> cookies)                                   | Проверка куки. Словарь из пар (название куки, значение) |
| ResponseSpecification | cookies(String fstName, Object fstValue, Object... nameValues)   | Проверка куки. Пары (название куки, значение)           |

### 6.9.1. Метод cookie

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.cookie( "name", equalTo("Rick Sanchez"));

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.9.2. Метод cookies

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.cookies( "name", equalTo("Rick Sanchez"));

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.10. Установка корневого узла

| Тип                   | Метод                                                         | Описание                                  |
|-----------------------|---------------------------------------------------------------|-------------------------------------------|
| ResponseSpecification | rootPath(String rootPath)                                     | Установка корневого узла                  |
| ResponseSpecification | rootPath(String rootPath, List<Argument> arguments)           | Установка корневого узла                  |
| ResponseSpecification | noRootPath()                                                  | Отмена установки корневого узла           |
| ResponseSpecification | appendRootPath(String pathToAppend)                           | Добавление пути для корневого узла        |
| ResponseSpecification | appendRootPath(String pathToAppend, List<Argument> arguments) | Добавление пути для корневого узла        |
| ResponseSpecification | detachRootPath(String pathToDetach)                           | Отмена добавления пути для корневого узла |

### 6.10.1. Метод rootPath

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.rootPath("results[0]");
response.body( "name", equalTo("Rick Zanchez"));

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

### 6.10.2. Метод appendRootPath

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.rootPath("results[0]");
response.appendRootPath("origin");
response.body( "name", equalTo("Mars (C-137)"));

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.11. Установка парсера

| Тип                   | Метод                                     | Описание                             |
|-----------------------|-------------------------------------------|--------------------------------------|
| ResponseSpecification | defaultParser(Parser parser)              | Дефолтный парсер                     |
| ResponseSpecification | parser(String contentType, Parser parser) | Парсер для конкретного типа контента |

*Пример*

```java
ResponseSpecification response = RestAssured.expect();
response.defaultParser(Parser.JSON);
response.body("results[0].name", equalTo("Rick Sanchez"));

RequestSpecification request = RestAssured.given();
request.baseUri("https://rickandmortyapi.com/api");
request.basePath("/character");
request.queryParam("name","Rick Sanchez");

request.get().then().spec(response);
```

## 6.12. Сообщение об ошибке

| Тип                   | Метод                         | Описание            |
|-----------------------|-------------------------------|---------------------|
| ResponseSpecification | onFailMessage(String message) | Сообщение об ошибке |

*Пример*

```java

```

***

# Best Practices https://otus.ru/nest/post/1271/

## Выносите end-pointы в отдельное место

С одной стороны, это очевидно. Но увы, до сих пор нередко встречается код, имеющий захардкоженные end-point'ы в запросе.
В целом же, лучше выносить end-point'ы в статические константы финального класса. 
Но тут есть нюанс — избегайте антипаттерна **константный интерфейс**, т. к. это является плохой практикой. 
И помните, что **REST Assured** даёт возможность выносить параметры пути.

**Пример**

```java
public final class EndPoints {
    public static final String users = "/users/{id}";
...
}

given().pathParams("id", someId).get(EndPoints.users)...;
```

или так

```java
given().get(EndPoints.users, someId)....
```

Кроме того, если вы во многих запросах применяете одинаковый базовый путь,
считается хорошей практикой выносить его в отдельную константу, передавая в **basePath**.

**Пример**

Имеем URL приложения **http://host:port/appname/rest/someEndpoints**.

Можно задать базовый путь на глобальном уровне.

```java
private static final basePath = "/appname/rest/";
```

И он будет использоваться ко всем запросам.

```java
RestAssured.basePath = basePath;
// либо на уровне одного запроса
given().basePath(basePath)...
// либо на уровне спецификации
```

То же применимо как к хосту, так и к порту тестируемого программного приложения.

## Используйте методы для заголовков ContentType и Accept

Эти заголовки применяются почти во всех **HTTP** запросах.
Разработчики **REST Assured** прекрасно это понимают,
поэтому они обеспечили возможность их установки посредством вызова специальных методов.

**Пример**

```java
// вот то плохая практика написания:
given().header("content-type", "application/json").header("accept", "application/json")...;
```
        
**Пример**

```java
// а вот эта хорошая:
given().contentType(ContentType.JSON).accept(ContentType.JSON)...;
```

Хорошей практикой станет установка данных заголовков в спецификации либо на глобальном уровне.
Результат — повышение читабельности кода.

## Используйте методы для проверки кода статуса и т. п.

Для выполнения проверки каждой составляющей **HTTP** ответа, 
библиотека **REST Assured** предоставляет удобный синтаксис.

**Пример**

```java
// это плохая практика написания:
Response response = given()...when().get(someEndpoint);
Assert.assertEquals(200, response.then().extract().statusCode());
```

**Пример**

```java
//а это хорошая:
given()...when().get(someEndpoint).then().statusCode(200);
```

## Используйте спецификации
   
Мы знаем, что дублировать код не есть хорошо. 
Для уменьшения дублирования нужно использовать спецификации.
В **REST Assured** есть возможность создания спецификации и для запроса, и для ответа.

В спецификацию запроса можно вынести всё, что можно продублировать в запросах.

**Пример**

```java
RequestSpecification requestSpec = new RequestSpecBuilder()
    .setBaseUri("http://localhost")
    .setPort(8080)
    .setAccept(ContentType.JSON)
    .setContentType(ContentType.ANY)
...
    .log(LogDetail.ALL)
    .build();

// мы можем задать одну спецификацию для всех запросов:
RestAssured.requestSpecification = requestSpec;

// либо для отдельного:
given().spec(requestSpec)...when().get(someEndpoint);
```

Кроме того, в спецификацию ответа можно выносить все проверки, дублируемые от запроса к запросу.

**Пример**

```java
ResponseSpecification responseSpec = new ResponseSpecBuilder()
    .expectStatusCode(200)
    .expectBody(containsString("success"))
    .build();

// мы можем задать одну спецификацию для всех ответов:
RestAssured.responseSpecification = responseSpec;

// либо для отдельного:
given()...when().get(someEndpoint).then().spec(responseSpec)...;
```

Также мы можем создавать несколько спецификаций для различных типов запросов/ответов и применять их в нужном случае.

## Не надо писать собственные костыли для преобразования объектов
   
Не нужно преобразовывать свои **POJO** в **JSON**, используя **Jackson ObjectMapper**, 
а потом передавать полученную строку в тело запроса. 

Потому что с этой задачей отлично справляется библиотека **REST Assured**. 
Причём применяется всё тот же **Jackson** либо **Gson** с учётом того, что находится в classpath. 
А чтобы выполнить преобразование в **XML**, применяется **JAXB**.
Что касается исходного формата, то он определяется автоматически по значению **Content-Type**.

**Пример**

```java
given().contentType(ContentType.JSON).body(somePojo)
    .when().post(EndPoints.add)
    .then()
    .statusCode(201);

// то же самое действует и в обратную сторону:
SomePojo pojo = given().
    .when().get(EndPoints.get)
    .then().extract().body().as(SomePojo.class);
```

Вдобавок к вышесказанному, **REST Assured** хорошо справляется и с преобразованием **HashMap** в **JSON** и в обратном порядке.

## Используйте всю силу Groovy

Так как сама библиотека написана на **Groovy**, 
она даёт возможность использовать к полученному **JSON/XML** ответу разные методы из **Groovy**. 

**Пример**

```java
// методы find, findAll используются к коллекции для поиска первого и всех вхождений, 
// а метод collect — для  создания новой коллекции из найденных результатов. 

// переменная it создается неявно, указывая на текущий элемент коллекции
Map<String, ?> map = get(EndPoints.anyendpoint).path("rootelement.find { it.title =~ 'anythingRegExp'}");

// можно явно задать название переменной, указывающей на текущий элемент
Map<String, ?> map = get(EndPoints.anyendpoint).path("rootelement.findAll { element -> element.title.length() > 4 }");

// можно применять методы max, min, sum в целях суммирования всех значений коллекции и поиска максимального и минимально значений
String expensiveCar = get(EndPoints.cars).path("cars.find { it.title == 'Toyota Motor Corporation'}.models.max { it.averagePrice }.title");
```

Применение методов из **Groovy** сократит количество кода, написанного вами в целях поиска необходимого значения из ответа.


# Best Practices https://qa.crtweb.ru/docs/testing/auto/api/rest-assured-best-practices/

## Используйте спецификации

Конструкция типа

```java
given()
        .accept(ContentType.JSON)
```

используется абсолютно в каждом запросе, и, даже если это всего две строчки, 
их можно сократить до вызова одного метода, увеличив тем самым читаемость кода, если вынести их в отдельный метод:

**Пример**

```java
public static RequestSpecification requestSpec() {
    return given().accept(ContentType.JSON);
}
```

или билдер:

```java
RequestSpecification requestSpec = new RequestSpecBuilder()
    .setAccept(ContentType.JSON)
    .build();
```

А в каждом запросе достаточно использовать только вызов этого метода или билдера.

Кроме того, на деле вряд ли весь код, который можно было бы вынести в спецификацию запроса ограничивается двумя строками – 
наверняка туда можно добавить заголовки для авторизации, установку хоста и порта, 
настройки логирования, фильтры для Allure и что угодно еще, что необходимо выполнять при каждом запросе.

То же самое можно сделать и с ответом. В нем можно проверить статус-код, время ожидания ответа, 
а так же наличие необходимых полей в теле ответа или заголовков. Как и в случае с запросом, можно использовать метод:

**Пример**

```java
public static ValidatableResponse responseSpecOk(Response response) {
    return response
        .then()
        .statusCode(200)
        .time(lessThanOrEqualTo(responseTime));
}
```

или билдер:

```java
ResponseSpecification responseSpecOk = new ResponseSpecBuilder()
        .expectStatusCode(200)
        .expectResponseTime(lessThanOrEqualTo(responseTime))
        .build();
```

## Храните эндпойнты в отдельном месте

Не стоит отдельно прописывать эндпойнт для каждого запроса.
Даже если их немного, при необходимости внесения изменений что-то все равно может потеряться и 
поиск проблемы гарантированно займет куда больше времени, чем организация корректного хранения эндпойнтов.

Тут есть несколько вариантов:

если для каждого эндпойнта существует свой собственный класс, можно просто хранить их в переменных этого класса;
можно создать отдельный класс для управления эндпойнтами, и хранить все эндпойнты в переменных этого класса;
и, наконец, эндпойнты можно хранить в отдельном property-файле.

В случае, если эндпойнт включает в себя какое-то изменяемое значение (например, ID), можно пользоваться записью такого вида:

**Пример**

```java
String endpoint = endpoint/{id}
```

В таком случае, подставить на место значения в фигурных скобках нужную переменную можно будет следующим образом:

**Пример**

```java
.get(endpoint, id)
```

Однако стоит иметь в виду, что подобная запись не всегда работает корректно, 
так что в некоторых проектах, возможно, придется обходиться без нее.

## Выносите base URI в properties

Так же, как и упомянутые выше заголовки, скорее всего часть URL повторяется в каждом запросе. 
Ее также можно вынести в отдельное место и объявить только один раз.

Для этого удобнее всего вынести baseURI в properties-файл и получать его значение через класс типа ManageProperties. 
Объявить baseURI можно двумя способами:

**Пример**

```java
given()
    .baseUri(getProperty("baseUri"))
```

или

```java
RestAssured.baseURI = getProperty("baseUri");
```

Что касается непосредственно самого вызова baseURI, тут тоже есть пара вариантов:

Первый – вызывать его в каждом запросе. 
Такой вариант выглядит более громоздко, но подойдет в том случае, 
если в определенных случаях нужно использовать другой base URI.

Второй – объявить его однократно, например, в спецификации запроса.

## Используйте функционал Rest Assured для преобразования объектов

Нет необходимости преобразовывать POJO в Json с помощью возможностей внешних библиотек, 
так как Rest Assured прекрасно справляется с этим самостоятельно. 
Достаточно добавить нужный POJO в тело запроса:

**Пример**

```java
Pojo pojo = new Pojo();
```

```java
given()
    .body(pojo)
    .post(URI);
```

Обратный процесс также работает:

**Пример**

```java
Pojo pojo = given()
    .get(URI)
    .then
    .extract().body().as(Pojo.class)
```

Кроме того, Rest Assured умеет преобразовывать в Json и HashMap, в том числе и вложенные:

**Пример**

```java
Map <Object, Object> outerMap = new HashMap<Object, Object>();
Map <Object, Object> innerMap = new HashMap<Object, Object>();

innerMap.put("key", "value");

outerMap.put("key", "value");
outerMap.put("innerMap", innerMap);

given()
    .body(outerMap)
    .post(URI);
```

## Используйте валидацию Json-схемы

Валидация Json-схемы - это простой и надежный способ убедиться, что полученные данные соответствуют ожидаемому формату. 
Json-схема имеет следующий вид:

```json
{
    "type": "object",
    "properties": {
        "id": {
            "type": "integer"
        },
        "item": {
            "type": "object",
            "properties": {
                "key1": {
                    "type": ["string", "integer"]
                },
                "key2": {
                    "type": "string"
                }

            },
            "required": ["key1", "key2"]
        }
    },
    "required": ["id", "item"]
}

```

Создавать Json-схемы можно и вручную, но из-за не слишком человекоориентированного формата это может быть довольно утомительно, 
так что куда проще использовать для этого любой из многочисленных автоматических инструментов. 
Например: https://www.liquid-technologies.com/online-json-to-schema-converter

Такая схема проверяет, что полученный в ответе Json содержит в себе все поля, 
которые указаны как обязательные, и что тип данных в каждом из этих полей соответствует ожидаемому.

Для использования валидации Json-схем понадобится установить библиотеку json-schema-validator 
(в данном случае используется библиотека от io.rest-assured) и использовать следующий метод:

**Пример**

```java
.body(matchesJsonSchemaInClasspath("schema.json"));
```

## Выносите повторяющиеся действия в отдельные методы

Нет никакой необходимости десять раз проверять, что ответ на запрос в десяти тестах соответствует схеме, 
достаточно один раз написать отдельный метод, который проводит эту проверку, и в дальнейшем просто обращаться к нему.

Это справедливо и для любых повторяющихся действий – намного удобнее читать (и тем более писать!) код, 
в котором все спецификации, конструкторы и проверки разбиты на отдельные блоки, 
из которых можно создать нужные тесты. Например, вот так:

**Пример**

```java
public static RequestSpecification requestSpec = new RequestSpecBuilder()
    .setBaseUri(BASE_URI)
    .setContentType(ContentType.JSON)
    .setAccept(ContentType.JSON)
    .build();

public static ResponseSpecification responseSpec(int statusCode) {
    return new ResponseSpecBuilder()
            .expectStatusCode(statusCode)
            .expectResponseTime(lessThanOrEqualTo(responseTime))
            .build();
}

public static Response createItem(Pojo body) {
    return given()
        .spec(requestSpec)
        .body(body)
        .post(Uri);
    }

public static ValidatableResponse createItem_valid(Response response) {
    return response
            .then()
            .spec(responseSpec(200))
            .body(matchesJsonSchemaInClasspath("schemas/CreateItem.json"));
}

@Test
public void createItemTest() {
    createItem_valid(
        createItem(body))
}
```

## Используйте Hamcrest Matchers

В случе, когда нет необходимости десериализовать ответ в POJO, 
мэтчеры из библиотеки Hamcrest являются самым быстрым способом повести валидацию отдельных элементов содержимого ответа.

Они позволяют проверить, что, например, ответ содержит в себе определенную строку или значение, 
или что конкретное поле равно определенному значению, или что массив содержит в себе некоторый набор элементов в произвольном порядке.

**Пример**

```java
.body("id", equals(getId()))
.body("id", greaterThanOrEqualTo(1))
.body("items", either(hasItem("a")).and(hasItem("b"))
```

Все выполняемые мэтчерами проверки, несомненно, можно произвести и другими способами, 
однако они позволяют сделать это в краткой и удобной для чтения форме.

С полной документацией к мэтчерам можно ознакомиться здесь: http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html

## Используйте методы для добавления заголовков

Так как по крайней мере один из этих заголовков используется практически в любом запросе, для них был создан более краткий вариант записи:

**Пример**

```java
given()
	.contentType(ContentType.JSON)
	.accept(ContentType.JSON)
```

Такой вариант немного короче обычной записи заголовков через метод header и, 
что более важно, минимизирует шанс возникновения ошибки из-за опечатки.

Однако стоит обратить внимание на то, что при таком оформлении заголовков в
Accept помимо application/json также передаются application/javascript, text/javascript и text/json. 
В некоторых API это может привести к ошибкам, 
и в таком случае enum ContentType стоит заменить на строку с указанием конкретного типа данных.

## Проверяйте статус-код без assertThat

Запись типа

**Пример**

```java
.assertThat(statusCode(200))
```

просто излишня. Эта строка выполняет ту же самую работу:

**Пример**

```java
.statusCode(200)
```

## Передавайте статус-коды в качестве аргумента

При наличии большого количества негативных проверок с разными ожидаемыми кодами ошибок, 
нет необходимости писать отдельную спецификацию под каждый статус-код, 
вместо этого можно просто добавить спецификацию в метод и передавать в нее ожидаемый статус-код из теста:

**Пример**

```java
public static ResponseSpecification responseSpecError(int statusCode) {
    return new ResponseSpecBuilder()
        .expectStatusCode(statusCode)
        .expectResponseTime(lessThanOrEqualTo(responseTime))
        .build();
}
```

## Используйте логирование для отладки тестов

Метод .log() позволяет получить информацию как об отправленном запросе, так и о полученном ответе. 
В первом случае необходимо его применить до отправки запроса (get, post и т.д.), во втором случае – после.

Вам доступны следующие методы:

**Пример**

```java
.log().all()
.log().params()
.log().body()
.log().headers()
.log().cookies()
```

Однако оставлять логирование в тестах, которые уже дописаны и корректно работают, 
не стоит – объем в информации в логах может быть настолько большим, 
что результаты всех тестов перестанут умещаться в консоли IDE, не говоря уже о том, 
что просматривать результаты тестов в таком случае будет очень неудобно.

***

[![Главная](https://img.shields.io/badge/-Главная-aaccee)](README.md)
[![Практика](https://img.shields.io/badge/-Практика-aaffaa)](2.%20Практика.md)