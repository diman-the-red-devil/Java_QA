
# 4. Интерфейс Response

***Response*** - интерфейс, содержащий методы для обработки **HTTP** ответа.

Методы интерфейса **Response**: [io/restassured : Response](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/Response.html)

Интерфейс **Response** наследует следующие интерфейсы:

* **ResponseBody<Response>**

Методы интерфейса **ResponseBody<Response>**: [io/restassured : ResponseBody](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseBody.html)

* **ResponseBodyData**

Методы интерфейса **ResponseBodyData**: [io/restassured : ResponseBodyData](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseBodyData.html)

* **ResponseBodyExtractionOptions**

Методы интерфейса **ResponseBodyExtractionOptions**: [io/restassured : ResponseBodyExtractionOptions](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseBodyExtractionOptions.html)

* **ResponseOptions<Response>**

Методы интерфейса **ResponseOptions**: [io/restassured : ResponseOptions](https://www.javadoc.io/static/io.rest-assured/rest-assured/5.2.0/io/restassured/response/ResponseOptions.html)

* **Validatable<ValidatableResponse,Response>**

***

# 4.1. Вывод в консоль

| Тип    | Метод         | Описание                                                           |
|--------|---------------|--------------------------------------------------------------------|
| T      | peek()        | Вывод в консоль в не отфоратированном виде                         |
| T      | prettyPeek()  | Вывод в консоль в отфоратированном виде                            |
| String | print()       | Вывод в консоль в не отфоратированном виде и возврат в виде строки |
| String | prettyPrint() | Вывод в консоль в отфоратированном виде и возврат в виде строки    |

### 4.1.1. Метод peek

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RestAssured
    .given()
	    .accept(ContentType.JSON)
	    .queryParam("name","Rick Sanchez")
    .when()
	    .request("GET","/character")
	    .prettyPeek()
    .then()
	    .statusCode(200)
	    .contentType(ContentType.JSON);
```

### 4.1.2. Метод print

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String print  = response.prettyPrint();
```

## 4.2. Преобразование данных из тела запроса

| Тип   | Метод                                         | Описание                                                                         |
|-------|-----------------------------------------------|----------------------------------------------------------------------------------|
| <T> T | as(Class<T> cls)                              | Преобразование тела запроса в **Java объект**                                    |
| <T> T | as(Class<T> cls, ObjectMapper mapper)         | Преобразование тела запроса в **Java объект** с помощью маппера                  |
| <T> T | as(Class<T> cls, ObjectMapperType mapperType) | Преобразование тела запроса в **Java объект** с помощью маппера конкретного типа |
| <T> T | as(Type cls)                                  | Преобразование тела запроса в **Java тип**                                       |
| <T> T | as(Type cls, ObjectMapper mapper)             | Преобразование тела запроса в **Java тип** с помощью маппера                     |
| <T> T | as(Type cls, ObjectMapperType mapperType)     | Преобразование тела запроса в **Java тип** с помощью маппера конкретного типа    |
| <T> T | as(TypeRef<T> typeRef)                        | Преобразование тела запроса дженерик тип                                         |

### 4.2.1. Метод as Class

*Пример*

Java объект

```java
public class Message {
    private String message;

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }
}
```

Ответ

```json
{
  "message": "My message"
}
```

Преобразование

```java
Message message = get("/message").as(Message.class);
```

### 4.2.2. Метод as Type

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
RickSanchez rickSanchez = response.as(RickSanchez.class);
System.out.println("rickSanchez: " + rickSanchez.toString());
```

## 4.3. Извлечение данных из тела запроса

| Тип      | Метод                                        | Описание                                                                                       |
|----------|----------------------------------------------|------------------------------------------------------------------------------------------------|
| <T> T    | path(String path, String... arguments)       | Извлечение данных из тела запроса с помощью **JsonPath** или **XmlPath**                       |
| JsonPath | jsonPath()                                   | Извлечение данных из тела запроса с помощью **JsonPath**                                       |
| JsonPath | jsonPath(JsonPathConfig config)              | Извлечение данных из тела запроса с помощью **JsonPath**                                       |
| XmlPath  | xmlPath()                                    | Извлечение данных из тела запроса с помощью **XmlPath**                                        |
| XmlPath  | xmlPath(XmlPathConfig config)                | Извлечение данных из тела запроса с помощью **XmlPath**                                        |
| XmlPath  | xmlPath(CompatibilityMode compatibilityMode) | Извлечение данных из тела запроса с помощью **XmlPath** и **XmlPath.CompatibilityMode**        |
| XmlPath  | htmlPath()                                   | Извлечение данных из тела запроса с помощью **XmlPath** и **XmlPath.CompatibilityMode = HTML** |

### 4.3.1. Метод path

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String name = response.path("results[0].name");
System.out.println("name: " + name);
```

### 4.3.2. Метод jsonPath

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String name = response.jsonPath().getString("results[0].name");
System.out.println("name: " + name);
```

### 4.3.3. Метод xmlPath

*Пример*

```java
RequestSpecification request = RestAssured.given();

Response response = request.request("GET","https://chercher.tech/sample/api/books.xml");
String book = response.xmlPath().getString("bookstore.book.title");
System.out.println("book: " + book);
```

### 4.3.4. Метод htmlPath

*Пример*

```java
RequestSpecification request = RestAssured.given();

Response response = request.request("GET","https://github.com/");
String title = response.htmlPath().getString("html.head.title");
System.out.println("title: " + title);
```

## 4.4. Получение данных из тела запроса

| Тип         | Метод            | Описание                                                       |
|-------------|------------------|----------------------------------------------------------------|
| byte[]      | asByteArray()    | Получение данных из тела запроса в **byte array**              |
| InputStream | asInputStream()  | Получение данных из тела запроса в **input stream**            |
| String      | asPrettyString() | Получение данных из тела запроса в **pretty formatted string** |
| String      | asString()       | Получение данных из тела запроса в **string**                  |

### 4.4.1. Метод asByteArray

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
byte[] asByteArray = response.asByteArray();
System.out.println("asByteArray length: " + asByteArray.length);
```

### 4.4.2. Метод asPrettyString

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String asPrettyString = response.asPrettyString();
System.out.println("asPrettyString: " + asPrettyString);
```

## 4.5. Заголовки ответа

| Тип     | Метод                  | Описание                             |
|---------|------------------------|--------------------------------------|
| String  | header(String name)    | Получение заголовка ответа           |
| String  | getHeader(String name) | Получение заголовка ответа           |
| Headers | headers()              | Получение всех заголовков ответа     |
| Headers | getHeaders()           | Получение всех заголовков ответа     |
| String  | contentType()          | Получение типа контента тела запроса |
| String  | getContentType()       | Получение типа контента тела запроса |

### 4.5.1. Метод header

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String header  = response.header("Date");
System.out.println("header: " + header);
```

### 4.5.2. Метод headers

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
Headers headers  = response.headers();
System.out.println("headers: " + headers.toString());
```

### 4.5.3. Метод contentType

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String contentType = response.contentType();
System.out.println("contentType: " + contentType);
```

## 4.6. Тело ответа

| Тип          | Метод     | Описание               |
|--------------|-----------|------------------------|
| ResponseBody | body()    | Получение тела запроса |
| ResponseBody | getBody() | Получение тела запроса |

### 4.6.1. Метод body

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
ResponseBody body = response.body();
System.out.println("body: " + body.asPrettyString());
```


## 4.7. Куки ответа

| Тип                | Метод                          | Описание                |
|--------------------|--------------------------------|-------------------------|
| String             | cookie(String name)            | Получение куки по имени |
| String             | getCookie(String name)         | Получение куки по имени |
| Map<String,String> | cookies()                      | Получение всех куки     |
| Map<String,String> | getCookies()                   | Получение всех куки     |
| Cookie             | detailedCookie(String name)    | Получение куки по имени |
| Cookie             | getDetailedCookie(String name) | Получение куки по имени |
| Cookies            | detailedCookies()              | Получение всех куки     |
| Cookies            | getDetailedCookies()           | Получение всех куки     |

### 4.7.1. Метод cookie

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String cookie = response.cookie("Cookie 1");
System.out.println("cookie: " + cookie);
```

### 4.7.2. Метод cookies

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
Map<String,String> cookies = response.cookies();
for(Map.Entry<String, String> entry : cookies.entrySet()) {
   System.out.println(
           "key: " + entry.getKey() + 
           "value: " + entry.getValue()
   );
}
```

### 4.7.3. Метод detailedCookie

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
Cookie detailedCookie  = response.detailedCookie("Cookie 1");
System.out.println("detailedCookie: " + detailedCookie.toString());
```

### 4.7.4. Метод detailedCookies

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
Cookies detailedCookies  = response.detailedCookies();
System.out.println("detailedCookies: " + detailedCookies.toString());
```

## 4.8. Статус ответа

| Тип    | Метод           | Описание                      | 
|--------|-----------------|-------------------------------|
| int    | statusCode()    | Получение кода статуса ответа |
| int    | getStatusCode() | Получение кода статуса ответа |
| String | statusLine()    | Получение статуса ответа      |
| String | getStatusLine() | Получение статуса ответа      |

### 4.8.1. Метод statusCode

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
int statusCode  = response.statusCode();
System.out.println("statusCode: " + statusCode);
```

### 4.8.2. Метод statusLine

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
String statusLine  = response.statusLine();
System.out.println("statusLine: " + statusLine);
```

## 4.9. Время выполнения запроса

| Тип  | Метод                        | Описание                                                                   |
|------|------------------------------|----------------------------------------------------------------------------|
| long | time()                       | Получение времени выполнения запроса в миллисекундах                       |
| long | getTime()                    | Получение времени выполнения запроса в миллисекундах                       |
| long | timeIn(TimeUnit timeUnit)    | Получение времени выполнения запроса в заданных единицах измерения времени |
| long | getTimeIn(TimeUnit timeUnit) | Получение времени выполнения запроса в заданных единицах измерения времени |

### 4.9.1. Метод time

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
long time  = response.time();
System.out.println("time: " + time);
```

## 4.9.2. Метод timeIn

*Пример*

```java
RestAssured.baseURI = "https://rickandmortyapi.com/api/";
RequestSpecification request = RestAssured.given();
request.accept(ContentType.JSON);
request.queryParam("name","Rick Sanchez");

Response response = request.request("GET","/character");
long timeIn  = response.timeIn(TimeUnit.MILLISECONDS);
System.out.println("timeIn: " + timeIn);
```